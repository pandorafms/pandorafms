{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/lib/index.ts","webpack:///./src/Item.ts","webpack:///./src/lib/TypedEvent.ts","webpack:///./src/Form.ts","webpack:///./src/items/EventsHistory.ts","webpack:///./src/items/DonutGraph.ts","webpack:///./src/items/BarsGraph.ts","webpack:///./src/items/ModuleGraph.ts","webpack:///./src/items/StaticGraph.ts","webpack:///./src/items/Icon.ts","webpack:///./src/items/ColorCloud.ts","webpack:///./src/items/Group.ts","webpack:///./src/items/Clock/index.ts","webpack:///./src/items/Box.ts","webpack:///./src/items/Line.ts","webpack:///./src/items/Label.ts","webpack:///./src/items/SimpleValue.ts","webpack:///./node_modules/d3-path/src/path.js","webpack:///./node_modules/d3-shape/src/constant.js","webpack:///./node_modules/d3-shape/src/math.js","webpack:///./node_modules/d3-shape/src/arc.js","webpack:///./node_modules/d3-shape/src/curve/linear.js","webpack:///./node_modules/d3-shape/src/curve/radial.js","webpack:///./node_modules/d3-shape/src/array.js","webpack:///./node_modules/d3-shape/src/symbol/diamond.js","webpack:///./node_modules/d3-shape/src/symbol/circle.js","webpack:///./node_modules/d3-shape/src/symbol/star.js","webpack:///./node_modules/d3-shape/src/noop.js","webpack:///./node_modules/d3-shape/src/symbol/triangle.js","webpack:///./node_modules/d3-shape/src/symbol/wye.js","webpack:///./node_modules/d3-shape/src/curve/basis.js","webpack:///./node_modules/d3-shape/src/curve/basisClosed.js","webpack:///./node_modules/d3-shape/src/curve/basisOpen.js","webpack:///./node_modules/d3-shape/src/curve/bundle.js","webpack:///./node_modules/d3-shape/src/curve/cardinal.js","webpack:///./node_modules/d3-shape/src/curve/cardinalClosed.js","webpack:///./node_modules/d3-shape/src/curve/cardinalOpen.js","webpack:///./node_modules/d3-shape/src/curve/catmullRom.js","webpack:///./node_modules/d3-shape/src/curve/catmullRomClosed.js","webpack:///./node_modules/d3-shape/src/curve/catmullRomOpen.js","webpack:///./node_modules/d3-shape/src/curve/linearClosed.js","webpack:///./node_modules/d3-shape/src/curve/monotone.js","webpack:///./node_modules/d3-shape/src/curve/natural.js","webpack:///./node_modules/d3-shape/src/curve/step.js","webpack:///./node_modules/d3-shape/src/order/descending.js","webpack:///./src/items/Percentile.ts","webpack:///./src/items/Service.ts","webpack:///./src/VisualConsole.ts","webpack:///./src/lib/AsyncTaskManager.ts","webpack:///./src/index.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","parseIntOr","defaultValue","length","isNaN","parseInt","parseFloatOr","parseFloat","stringIsEmpty","notEmptyStringOr","parseBoolean","leftPad","pad","diffLength","substr","Math","abs","substring","repeatTimes","floor","restLength","newPad","positionPropsDecoder","data","x","y","sizePropsDecoder","width","height","TypeError","modulePropsDecoder","__assign","moduleName","moduleDescription","agentProps","agentId","agent","agentName","agentAlias","agentDescription","agentAddress","metaconsoleId","agentPropsDecoder","linkedVCPropsDecoder","id","linkedLayoutId","linkedLayoutAgentId","linkedLayoutStatusProps","linkedLayoutStatusType","weight","linkedLayoutStatusTypeWeight","warningThreshold","linkedLayoutStatusTypeWarningThreshold","criticalThreshold","linkedLayoutStatusTypeCriticalThreshold","linkedLayoutBaseProps","itemMetaDecoder","receivedAt","Date","Number","getTime","error","Error","editMode","isFromCache","isFetching","isUpdating","isBeingMoved","isBeingResized","isSelected","prefixedCssRules","ruleName","ruleValue","rule","decodeBase64","input","decodeURIComponent","escape","window","atob","humanDate","date","locale","Intl","DateTimeFormat","day","month","year","format","getDate","getMonth","getFullYear","humanTime","getHours","getMinutes","getSeconds","replaceMacros","macros","text","reduce","acc","_a","macro","replace","throttle","delay","fn","last","args","_i","arguments","now","apply","debounce","timerRef","clearTimeout","setTimeout","getOffset","el","offsetLeft","offsetTop","scrollLeft","scrollTop","offsetParent","top","left","addMovementListener","element","onMoved","altContainer","container","parentElement","isDraggable","draggable","lastX","lastY","lastMouseX","lastMouseY","mouseElementOffsetX","mouseElementOffsetY","containerBounds","getBoundingClientRect","containerOffset","containerTop","containerBottom","containerLeft","containerRight","elementBounds","borderWidth","getComputedStyle","borderFix","debouncedMovement","throttledMovement","handleMove","e","mouseX","pageX","mouseY","pageY","mouseDeltaX","mouseDeltaY","maxX","maxY","outOfBoundsLeft","outOfBoundsRight","outOfBoundsTop","outOfBoundsBottom","handleEnd","document","removeEventListener","body","style","userSelect","handleStart","stopPropagation","offsetX","offsetY","addEventListener","addResizementListener","onResized","resizeDraggable","createElement","className","appendChild","lastWidth","lastHeight","elementOffset","elementTop","elementLeft","debouncedResizement","throttledResizement","handleResize","remove","PositionInputGroup","_super","__extends","createContent","_this","this","positionLabel","textContent","_lib__WEBPACK_IMPORTED_MODULE_0__","positionInputX","type","min","required","currentData","initialData","updateData","target","positionInputY","_Form__WEBPACK_IMPORTED_MODULE_2__","parseLabelPosition","labelPosition","itemBasePropsDecoder","label","isLinkEnabled","link","isOnTop","parentId","aclGroupId","VisualConsoleItem","props","metadata","deferInit","elementRef","labelElementRef","childElementRef","clickEventManager","_lib_TypedEvent__WEBPACK_IMPORTED_MODULE_1__","dblClickEventManager","movedEventManager","resizedEventManager","removeEventManager","disposables","debouncedMovementSave","_metadata","prevPosition","newPosition","positionChanged","move","emit","item","removeMovement","debouncedResizementSave","prevSize","newSize","sizeChanged","resize","removeResizement","itemProps","init","initMovementListener","moveElement","stopMovementListener","initResizementListener","labelWidth","labelHeight","resizeElement","stopResizementListener","createContainerDomElement","createLabelDomElement","createDomElement","append","changeLabelPosition","box","href","zIndex","meta","nativeEvent","preventDefault","classList","add","getLabelWithMacrosReplaced","table","row","emptyRow1","emptyRow2","cell","innerHTML","textAlign","updateDomElement","newProps","setProps","prevProps","shouldBeUpdated","render","newMetadata","setMeta","prevMetadata","prevMeta","oldLabelHtml","newLabelHtml","attrs","attributes","nodeName","setAttributeNode","parentNode","replaceChild","divParent","divSpinner","div","querySelector","parent_1","removeChild","forEach","disposable","dispose","ignored","position","flexDirection","tables","getElementsByTagName","getFormContainer","onClick","listener","on","push","onDblClick","onRemove","__webpack_exports__","TypedEvent","listeners","listenersOncer","off","once","callbackIndex","indexOf","splice","event","pipe","te","InputGroup","_name","RangeError","_element","content","Array","reset","FormContainer","title","inputGroups","enabledInputGroups","inputGroupsByName","enabledInputGroupNames","submitEventManager","_lib_TypedEvent__WEBPACK_IMPORTED_MODULE_0__","prevVal","inputGroup","concat","filter","getInputGroup","inputGroupName","addInputGroup","index","slice","removeInputGroup","getFormElement","form","formContent","submitBtn","_lib__WEBPACK_IMPORTED_MODULE_1__","onSubmit","eventsHistoryPropsDecoder","html","encodedHtml","_Item__WEBPACK_IMPORTED_MODULE_1__","maxTime","EventsHistory","scripts","src","eval","trim","aux","donutGraphPropsDecoder","DonutGraph","barsGraphPropsDecoder","BarsGraph","moduleGraphPropsDecoder","ModuleGraph","legendP","margin","overviewGraphs","getElementsByClassName","parseShowLastValueTooltip","showLastValueTooltip","staticGraphPropsDecoder","imageSrc","Item","statusImageSrc","lib","lastValue","StaticGraph","imgSrc","background","backgroundSize","backgroundPosition","setAttribute","iconPropsDecoder","Icon_assign","Icon","Icon_extends","colorCloudPropsDecoder","color","ColorCloud_assign","ColorCloud_svgNS","ColorCloud","ColorCloud_extends","createSvgElement","gradientId","svg","createElementNS","defs","radialGradient","stop0","stop100","circle","groupPropsDecoder","groupId","showStatistics","extractHtml","Group_assign","Group","Group_extends","parseClockType","clockType","parseClockFormat","clockFormat","clockPropsDecoder","clockTimezone","Clock_assign","clockTimezoneOffset","showClockTimezone","items_Clock","Clock","intervalRef","startTick","createClock","TICK_INTERVAL","Clock_extends","stopTick","clearInterval","handler","interval","setInterval","getElementSize","newWidth","newHeight","createAnalogicClock","createDigitalClock","svgNS","colors","dateFontSize","baseTimeFontSize","clockFace","clockFaceBackground","city","getHumanTimezone","timezoneComplication","marksGroup","mainMarkGroup","mark1a","mark1b","mark","hourHand","hourHandA","hourHandB","minuteHand","minuteHandA","minuteHandB","minuteHandPin","secondHand","secondHandBar","secondHandPin","pin","getOriginDate","seconds","minutes","secAngle","minuteAngle","hourAngle","join","dateElem","fontSize","tzFontSizeMultiplier","timeFontSize","tzFontSize","timeElem","tzElem","initialDate","targetTZOffset","localTZOffset","getTimezoneOffset","utimestamp","timezone","_b","split","diameter","boxPropsDecoder","Box_assign","borderColor","fillColor","Box","Box_extends","boxSizing","backgroundColor","borderStyle","maxBorderWidth","linePropsDecoder","Line_assign","startPosition","startX","startY","endPosition","endX","endY","lineWidth","Line_Line","extractBoxSizeAndPosition","Line","moveMode","debouncedStartPositionMovementSave","removeStartPositionMovement","startCircle","Line_extends","initStartPositionMovementListener","console","log","stopStartPositionMovementListener","startIsLeft","startIsTop","x1","y1","x2","y2","line","borderRadius","endCircle","labelPropsDecoder","Label_assign","Label","Label_extends","parseValueType","valueType","parseProcessValue","processValue","simpleValuePropsDecoder","SimpleValue_assign","period","SimpleValue","SimpleValue_extends","img","pi","PI","tau","tauEpsilon","Path","_x0","_y0","_x1","_y1","_","path","constructor","moveTo","closePath","lineTo","quadraticCurveTo","bezierCurveTo","arcTo","x0","y0","x21","y21","x01","y01","l01_2","x20","y20","l21_2","l20_2","l21","sqrt","l01","tan","acos","t01","t21","arc","a0","a1","ccw","dx","cos","dy","sin","cw","da","rect","w","h","toString","src_path","constant","atan2","max","math_epsilon","math_pi","halfPi","math_tau","asin","arcInnerRadius","innerRadius","arcOuterRadius","outerRadius","arcStartAngle","startAngle","arcEndAngle","endAngle","arcPadAngle","padAngle","cornerTangents","r1","rc","lo","ox","oy","x11","y11","x10","y10","x00","y00","d2","D","cx0","cy0","cx1","cy1","dx0","dy0","dx1","dy1","cx","cy","src_arc","cornerRadius","padRadius","context","buffer","r0","t0","t1","a01","a11","a00","a10","da0","da1","ap","rp","rc0","rc1","p0","p1","oc","x3","y3","x32","y32","intersect","ax","ay","bx","by","kc","lc","centroid","a","Linear","_context","areaStart","_line","areaEnd","NaN","lineStart","_point","lineEnd","point","linear","curveRadial","Radial","curve","_curve","radial","kr","noop","that","Basis","BasisClosed","_x2","_x3","_x4","_y2","_y3","_y4","BasisOpen","Bundle","beta","_basis","_beta","_x","_y","j","custom","bundle","cardinal_point","_k","Cardinal","tension","cardinal","CardinalClosed","_x5","_y5","CardinalOpen","catmullRom_point","_l01_a","_l01_2a","_l12_a","_l12_2a","_l23_a","b","_l23_2a","CatmullRom","alpha","_alpha","x23","y23","pow","catmullRom","CatmullRomClosed","CatmullRomOpen","LinearClosed","sign","slope3","h0","h1","s0","s1","slope2","monotone_point","MonotoneX","MonotoneY","ReflectContext","Natural","controlPoints","_t0","px","py","i0","i1","Step","_t","extractPercentileType","extractValueType","percentilePropsDecoder","Percentile_assign","percentileType","minValue","maxValue","labelColor","unit","Percentile_svgNS","Percentile","Percentile_extends","formatValue","progress","getProgress","NumberFormat","backgroundRect","progressRect","backgroundCircle","progressCircle","arcProps","trunc","servicePropsDecoder","encodedTitle","serviceId","Service_assign","Service","Service_extends","itemInstanceFrom","items_StaticGraph","items_SimpleValue","items_Percentile","items_Label","items_Icon","items_Service","items_Group","items_Box","items_Line","items_ColorCloud","decodeProps","VisualConsole","items","elementsById","elementIds","relations","handleElementClick","handleElementDblClick","handleElementMovement","itemId","getItemRelations","relation","VisualConsole_assign","getVisualCenter","childId","handleElementResizement","handleElementRemove","clearRelations","handleContainerClick","unselectItems","containerRef","_props","backgroundURL","isFavorite","relationLineWidth","visualConsolePropsDecoder","sort","itemInstance","message","buildRelations","map","updateElements","itemIds","updateElement","backgroundImage","elements","child","addRelationLine","ids","getRelationLine","identifier","itemRelations","clientWidth","clientHeight","parent","onItemClick","onItemDblClick","onItemMoved","onItemResized","enableEditMode","disableEditMode","selectItem","unique","currentItemId","unselectItem","AsyncTaskManager_AsyncTask","AsyncTask","taskInitiator","cancellable","cancel","_status","statusChangeEventManager","status","onStatusChange","AsyncTaskManager","tasks","asyncTask","task","ref","asyncPeriodic","src_VisualConsole","Form","lib_AsyncTaskManager"],"mappings":"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","file":"vc.main.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 10);\n","import {\n  AnyObject,\n  Position,\n  Size,\n  WithAgentProps,\n  WithModuleProps,\n  LinkedVisualConsoleProps,\n  LinkedVisualConsolePropsStatus,\n  UnknownObject,\n  ItemMeta\n} from \"./types\";\n\n/**\n * Return a number or a default value from a raw value.\n * @param value Raw value from which we will try to extract a valid number.\n * @param defaultValue Default value to use if we cannot extract a valid number.\n * @return A valid number or the default value.\n */\nexport function parseIntOr<T>(value: unknown, defaultValue: T): number | T {\n  if (typeof value === \"number\") return value;\n  if (typeof value === \"string\" && value.length > 0 && !isNaN(parseInt(value)))\n    return parseInt(value);\n  else return defaultValue;\n}\n\n/**\n * Return a number or a default value from a raw value.\n * @param value Raw value from which we will try to extract a valid number.\n * @param defaultValue Default value to use if we cannot extract a valid number.\n * @return A valid number or the default value.\n */\nexport function parseFloatOr<T>(value: unknown, defaultValue: T): number | T {\n  if (typeof value === \"number\") return value;\n  if (\n    typeof value === \"string\" &&\n    value.length > 0 &&\n    !isNaN(parseFloat(value))\n  )\n    return parseFloat(value);\n  else return defaultValue;\n}\n\n/**\n * Check if a string exists and it's not empty.\n * @param value Value to check.\n * @return The check result.\n */\nexport function stringIsEmpty(value?: string | null): boolean {\n  return value == null || value.length === 0;\n}\n\n/**\n * Return a not empty string or a default value from a raw value.\n * @param value Raw value from which we will try to extract a non empty string.\n * @param defaultValue Default value to use if we cannot extract a non empty string.\n * @return A non empty string or the default value.\n */\nexport function notEmptyStringOr<T>(\n  value: unknown,\n  defaultValue: T\n): string | T {\n  return typeof value === \"string\" && value.length > 0 ? value : defaultValue;\n}\n\n/**\n * Return a boolean from a raw value.\n * @param value Raw value from which we will try to extract the boolean.\n * @return A valid boolean value. false by default.\n */\nexport function parseBoolean(value: unknown): boolean {\n  if (typeof value === \"boolean\") return value;\n  else if (typeof value === \"number\") return value > 0;\n  else if (typeof value === \"string\") return value === \"1\" || value === \"true\";\n  else return false;\n}\n\n/**\n * Return a valid date or a default value from a raw value.\n * @param value Raw value from which we will try to extract a valid date.\n * @param defaultValue Default value to use if we cannot extract a valid date.\n * @return A valid date or the default value.\n */\nexport function parseDateOr<T>(value: unknown, defaultValue: T): Date | T {\n  if (value instanceof Date) return value;\n  else if (typeof value === \"number\") return new Date(value * 1000);\n  else if (\n    typeof value === \"string\" &&\n    !Number.isNaN(new Date(value).getTime())\n  )\n    return new Date(value);\n  else return defaultValue;\n}\n\n/**\n * Pad the current string with another string (multiple times, if needed)\n * until the resulting string reaches the given length.\n * The padding is applied from the start (left) of the current string.\n * @param value Text that needs to be padded.\n * @param length Length of the returned text.\n * @param pad Text to add.\n * @return Padded text.\n */\nexport function leftPad(\n  value: string | number,\n  length: number,\n  pad: string | number = \" \"\n): string {\n  if (typeof value === \"number\") value = `${value}`;\n  if (typeof pad === \"number\") pad = `${pad}`;\n\n  const diffLength = length - value.length;\n  if (diffLength === 0) return value;\n  if (diffLength < 0) return value.substr(Math.abs(diffLength));\n\n  if (diffLength === pad.length) return `${pad}${value}`;\n  if (diffLength < pad.length) return `${pad.substring(0, diffLength)}${value}`;\n\n  const repeatTimes = Math.floor(diffLength / pad.length);\n  const restLength = diffLength - pad.length * repeatTimes;\n\n  let newPad = \"\";\n  for (let i = 0; i < repeatTimes; i++) newPad += pad;\n\n  if (restLength === 0) return `${newPad}${value}`;\n  return `${newPad}${pad.substring(0, restLength)}${value}`;\n}\n\n/* Decoders */\n\n/**\n * Build a valid typed object from a raw object.\n * @param data Raw object.\n * @return An object representing the position.\n */\nexport function positionPropsDecoder(data: AnyObject): Position {\n  return {\n    x: parseIntOr(data.x, 0),\n    y: parseIntOr(data.y, 0)\n  };\n}\n\n/**\n * Build a valid typed object from a raw object.\n * @param data Raw object.\n * @return An object representing the size.\n * @throws Will throw a TypeError if the width and height are not valid numbers.\n */\nexport function sizePropsDecoder(data: AnyObject): Size | never {\n  if (\n    data.width == null ||\n    isNaN(parseInt(data.width)) ||\n    data.height == null ||\n    isNaN(parseInt(data.height))\n  ) {\n    throw new TypeError(\"invalid size.\");\n  }\n\n  return {\n    width: parseInt(data.width),\n    height: parseInt(data.height)\n  };\n}\n\n/**\n * Build a valid typed object from a raw object.\n * @param data Raw object.\n * @return An object representing the agent properties.\n */\nexport function agentPropsDecoder(data: AnyObject): WithAgentProps {\n  const agentProps: WithAgentProps = {\n    agentId: parseIntOr(data.agent, null),\n    agentName: notEmptyStringOr(data.agentName, null),\n    agentAlias: notEmptyStringOr(data.agentAlias, null),\n    agentDescription: notEmptyStringOr(data.agentDescription, null),\n    agentAddress: notEmptyStringOr(data.agentAddress, null)\n  };\n\n  return data.metaconsoleId != null\n    ? {\n        metaconsoleId: data.metaconsoleId,\n        ...agentProps // Object spread: http://es6-features.org/#SpreadOperator\n      }\n    : agentProps;\n}\n\n/**\n * Build a valid typed object from a raw object.\n * @param data Raw object.\n * @return An object representing the module and agent properties.\n */\nexport function modulePropsDecoder(data: AnyObject): WithModuleProps {\n  return {\n    moduleId: parseIntOr(data.moduleId, null),\n    moduleName: notEmptyStringOr(data.moduleName, null),\n    moduleDescription: notEmptyStringOr(data.moduleDescription, null),\n    ...agentPropsDecoder(data) // Object spread: http://es6-features.org/#SpreadOperator\n  };\n}\n\n/**\n * Build a valid typed object from a raw object.\n * @param data Raw object.\n * @return An object representing the linked visual console properties.\n * @throws Will throw a TypeError if the status calculation properties are invalid.\n */\nexport function linkedVCPropsDecoder(\n  data: AnyObject\n): LinkedVisualConsoleProps | never {\n  // Object destructuring: http://es6-features.org/#ObjectMatchingShorthandNotation\n  const {\n    metaconsoleId,\n    linkedLayoutId: id,\n    linkedLayoutAgentId: agentId\n  } = data;\n\n  let linkedLayoutStatusProps: LinkedVisualConsolePropsStatus = {\n    linkedLayoutStatusType: \"default\"\n  };\n  switch (data.linkedLayoutStatusType) {\n    case \"weight\": {\n      const weight = parseIntOr(data.linkedLayoutStatusTypeWeight, null);\n      if (weight == null)\n        throw new TypeError(\"invalid status calculation properties.\");\n\n      if (data.linkedLayoutStatusTypeWeight)\n        linkedLayoutStatusProps = {\n          linkedLayoutStatusType: \"weight\",\n          linkedLayoutStatusTypeWeight: weight\n        };\n      break;\n    }\n    case \"service\": {\n      const warningThreshold = parseIntOr(\n        data.linkedLayoutStatusTypeWarningThreshold,\n        null\n      );\n      const criticalThreshold = parseIntOr(\n        data.linkedLayoutStatusTypeCriticalThreshold,\n        null\n      );\n      if (warningThreshold == null || criticalThreshold == null) {\n        throw new TypeError(\"invalid status calculation properties.\");\n      }\n\n      linkedLayoutStatusProps = {\n        linkedLayoutStatusType: \"service\",\n        linkedLayoutStatusTypeWarningThreshold: warningThreshold,\n        linkedLayoutStatusTypeCriticalThreshold: criticalThreshold\n      };\n      break;\n    }\n  }\n\n  const linkedLayoutBaseProps = {\n    linkedLayoutId: parseIntOr(id, null),\n    linkedLayoutAgentId: parseIntOr(agentId, null),\n    ...linkedLayoutStatusProps // Object spread: http://es6-features.org/#SpreadOperator\n  };\n\n  return metaconsoleId != null\n    ? {\n        metaconsoleId,\n        ...linkedLayoutBaseProps // Object spread: http://es6-features.org/#SpreadOperator\n      }\n    : linkedLayoutBaseProps;\n}\n\n/**\n * Build a valid typed object from a raw object.\n * @param data Raw object.\n * @return An object representing the item's meta properties.\n */\nexport function itemMetaDecoder(data: UnknownObject): ItemMeta | never {\n  const receivedAt = parseDateOr(data.receivedAt, null);\n  if (receivedAt === null) throw new TypeError(\"invalid meta structure\");\n\n  let error = null;\n  if (data.error instanceof Error) error = data.error;\n  else if (typeof data.error === \"string\") error = new Error(data.error);\n\n  return {\n    receivedAt,\n    error,\n    editMode: parseBoolean(data.editMode),\n    isFromCache: parseBoolean(data.isFromCache),\n    isFetching: false,\n    isUpdating: false,\n    isBeingMoved: false,\n    isBeingResized: false,\n    isSelected: false\n  };\n}\n\n/**\n * To get a CSS rule with the most used prefixes.\n * @param ruleName Name of the CSS rule.\n * @param ruleValue Value of the CSS rule.\n * @return An array of rules with the prefixes applied.\n */\nexport function prefixedCssRules(\n  ruleName: string,\n  ruleValue: string\n): string[] {\n  const rule = `${ruleName}: ${ruleValue};`;\n  return [\n    `-webkit-${rule}`,\n    `-moz-${rule}`,\n    `-ms-${rule}`,\n    `-o-${rule}`,\n    `${rule}`\n  ];\n}\n\n/**\n * Decode a base64 string.\n * @param input Data encoded using base64.\n * @return Decoded data.\n */\nexport function decodeBase64(input: string): string {\n  return decodeURIComponent(escape(window.atob(input)));\n}\n\n/**\n * Generate a date representation with the format 'd/m/Y'.\n * @param initialDate Date to be used instead of a generated one.\n * @param locale Locale to use if localization is required and available.\n * @example 24/02/2020.\n * @return Date representation.\n */\nexport function humanDate(date: Date, locale: string | null = null): string {\n  if (locale && Intl && Intl.DateTimeFormat) {\n    // Format using the user locale.\n    const options: Intl.DateTimeFormatOptions = {\n      day: \"2-digit\",\n      month: \"2-digit\",\n      year: \"numeric\"\n    };\n    return Intl.DateTimeFormat(locale, options).format(date);\n  } else {\n    // Use getDate, getDay returns the week day.\n    const day = leftPad(date.getDate(), 2, 0);\n    // The getMonth function returns the month starting by 0.\n    const month = leftPad(date.getMonth() + 1, 2, 0);\n    const year = leftPad(date.getFullYear(), 4, 0);\n\n    // Format: 'd/m/Y'.\n    return `${day}/${month}/${year}`;\n  }\n}\n\n/**\n * Generate a time representation with the format 'hh:mm:ss'.\n * @param initialDate Date to be used instead of a generated one.\n * @example 01:34:09.\n * @return Time representation.\n */\nexport function humanTime(date: Date): string {\n  const hours = leftPad(date.getHours(), 2, 0);\n  const minutes = leftPad(date.getMinutes(), 2, 0);\n  const seconds = leftPad(date.getSeconds(), 2, 0);\n\n  return `${hours}:${minutes}:${seconds}`;\n}\n\ninterface Macro {\n  macro: string | RegExp;\n  value: string;\n}\n/**\n * Replace the macros of a text.\n * @param macros List of macros and their replacements.\n * @param text Text in which we need to replace the macros.\n */\nexport function replaceMacros(macros: Macro[], text: string): string {\n  return macros.reduce(\n    (acc, { macro, value }) => acc.replace(macro, value),\n    text\n  );\n}\n\n/**\n * Create a function which will limit the rate of execution of\n * the selected function to one time for the selected interval.\n * @param delay Interval.\n * @param fn Function to be executed at a limited rate.\n */\nexport function throttle<T, R>(delay: number, fn: (...args: T[]) => R) {\n  let last = 0;\n  return (...args: T[]) => {\n    const now = Date.now();\n    if (now - last < delay) return;\n    last = now;\n    return fn(...args);\n  };\n}\n\n/**\n * Create a function which will call the selected function only\n * after the interval time has passed after its last execution.\n * @param delay Interval.\n * @param fn Function to be executed after the last call.\n */\nexport function debounce<T>(delay: number, fn: (...args: T[]) => void) {\n  let timerRef: number | null = null;\n  return (...args: T[]) => {\n    if (timerRef !== null) window.clearTimeout(timerRef);\n    timerRef = window.setTimeout(() => {\n      fn(...args);\n      timerRef = null;\n    }, delay);\n  };\n}\n\n/**\n * Retrieve the offset of an element relative to the page.\n * @param el Node used to calculate the offset.\n */\nfunction getOffset(el: HTMLElement | null) {\n  let x = 0;\n  let y = 0;\n  while (el && !Number.isNaN(el.offsetLeft) && !Number.isNaN(el.offsetTop)) {\n    x += el.offsetLeft - el.scrollLeft;\n    y += el.offsetTop - el.scrollTop;\n    el = el.offsetParent as HTMLElement | null;\n  }\n  return { top: y, left: x };\n}\n\n/**\n * Add the grab & move functionality to a certain element inside it's container.\n *\n * @param element Element to move.\n * @param onMoved Function to execute when the element moves.\n * @param altContainer Alternative element to contain the moved element.\n *\n * @return A function which will clean the event handlers when executed.\n */\nexport function addMovementListener(\n  element: HTMLElement,\n  onMoved: (x: Position[\"x\"], y: Position[\"y\"]) => void,\n  altContainer?: HTMLElement\n): Function {\n  const container = altContainer || (element.parentElement as HTMLElement);\n\n  // Store the initial draggable state.\n  const isDraggable = element.draggable;\n  // Init the coordinates.\n  let lastX: Position[\"x\"] = 0;\n  let lastY: Position[\"y\"] = 0;\n  let lastMouseX: Position[\"x\"] = 0;\n  let lastMouseY: Position[\"y\"] = 0;\n  let mouseElementOffsetX: Position[\"x\"] = 0;\n  let mouseElementOffsetY: Position[\"y\"] = 0;\n  // Bounds.\n  let containerBounds = container.getBoundingClientRect();\n  let containerOffset = getOffset(container);\n  let containerTop = containerOffset.top;\n  let containerBottom = containerTop + containerBounds.height;\n  let containerLeft = containerOffset.left;\n  let containerRight = containerLeft + containerBounds.width;\n  let elementBounds = element.getBoundingClientRect();\n  let borderWidth = window.getComputedStyle(element).borderWidth || \"0\";\n  let borderFix = Number.parseInt(borderWidth) * 2;\n\n  // Will run onMoved 32ms after its last execution.\n  const debouncedMovement = debounce(32, (x: Position[\"x\"], y: Position[\"y\"]) =>\n    onMoved(x, y)\n  );\n  // Will run onMoved one time max every 16ms.\n  const throttledMovement = throttle(16, (x: Position[\"x\"], y: Position[\"y\"]) =>\n    onMoved(x, y)\n  );\n\n  const handleMove = (e: MouseEvent) => {\n    // Calculate the new element coordinates.\n    let x = 0;\n    let y = 0;\n\n    const mouseX = e.pageX;\n    const mouseY = e.pageY;\n    const mouseDeltaX = mouseX - lastMouseX;\n    const mouseDeltaY = mouseY - lastMouseY;\n\n    const minX = 0;\n    const maxX = containerBounds.width - elementBounds.width + borderFix;\n    const minY = 0;\n    const maxY = containerBounds.height - elementBounds.height + borderFix;\n\n    const outOfBoundsLeft =\n      mouseX < containerLeft ||\n      (lastX === 0 &&\n        mouseDeltaX > 0 &&\n        mouseX < containerLeft + mouseElementOffsetX);\n    const outOfBoundsRight =\n      mouseX > containerRight ||\n      mouseDeltaX + lastX + elementBounds.width - borderFix >\n        containerBounds.width ||\n      (lastX === maxX &&\n        mouseDeltaX < 0 &&\n        mouseX > containerLeft + maxX + mouseElementOffsetX);\n    const outOfBoundsTop =\n      mouseY < containerTop ||\n      (lastY === 0 &&\n        mouseDeltaY > 0 &&\n        mouseY < containerTop + mouseElementOffsetY);\n    const outOfBoundsBottom =\n      mouseY > containerBottom ||\n      mouseDeltaY + lastY + elementBounds.height - borderFix >\n        containerBounds.height ||\n      (lastY === maxY &&\n        mouseDeltaY < 0 &&\n        mouseY > containerTop + maxY + mouseElementOffsetY);\n\n    if (outOfBoundsLeft) x = minX;\n    else if (outOfBoundsRight) x = maxX;\n    else x = mouseDeltaX + lastX;\n\n    if (outOfBoundsTop) y = minY;\n    else if (outOfBoundsBottom) y = maxY;\n    else y = mouseDeltaY + lastY;\n\n    if (x < 0) x = minX;\n    if (y < 0) y = minY;\n\n    // Store the last mouse coordinates.\n    lastMouseX = mouseX;\n    lastMouseY = mouseY;\n\n    if (x === lastX && y === lastY) return;\n\n    // Run the movement events.\n    throttledMovement(x, y);\n    debouncedMovement(x, y);\n\n    // Store the coordinates of the element.\n    lastX = x;\n    lastY = y;\n  };\n  const handleEnd = () => {\n    // Reset the positions.\n    lastX = 0;\n    lastY = 0;\n    lastMouseX = 0;\n    lastMouseY = 0;\n    // Remove the move event.\n    document.removeEventListener(\"mousemove\", handleMove);\n    // Clean itself.\n    document.removeEventListener(\"mouseup\", handleEnd);\n    // Reset the draggable property to its initial state.\n    element.draggable = isDraggable;\n    // Reset the body selection property to a default state.\n    document.body.style.userSelect = \"auto\";\n  };\n  const handleStart = (e: MouseEvent) => {\n    e.stopPropagation();\n\n    // Disable the drag temporarily.\n    element.draggable = false;\n\n    // Store the difference between the cursor and\n    // the initial coordinates of the element.\n    lastX = element.offsetLeft;\n    lastY = element.offsetTop;\n    // Store the mouse position.\n    lastMouseX = e.pageX;\n    lastMouseY = e.pageY;\n    // Store the relative position between the mouse and the element.\n    mouseElementOffsetX = e.offsetX;\n    mouseElementOffsetY = e.offsetY;\n\n    // Initialize the bounds.\n    containerBounds = container.getBoundingClientRect();\n    containerOffset = getOffset(container);\n    containerTop = containerOffset.top;\n    containerBottom = containerTop + containerBounds.height;\n    containerLeft = containerOffset.left;\n    containerRight = containerLeft + containerBounds.width;\n    elementBounds = element.getBoundingClientRect();\n    borderWidth = window.getComputedStyle(element).borderWidth || \"0\";\n    borderFix = Number.parseInt(borderWidth) * 2;\n\n    // Listen to the mouse movement.\n    document.addEventListener(\"mousemove\", handleMove);\n    // Listen to the moment when the mouse click is not pressed anymore.\n    document.addEventListener(\"mouseup\", handleEnd);\n    // Limit the mouse selection of the body.\n    document.body.style.userSelect = \"none\";\n  };\n\n  // Event to listen the init of the movement.\n  element.addEventListener(\"mousedown\", handleStart);\n\n  // Returns a function to clean the event listeners.\n  return () => {\n    element.removeEventListener(\"mousedown\", handleStart);\n    handleEnd();\n  };\n}\n\n/**\n * Add the grab & resize functionality to a certain element.\n *\n * @param element Element to move.\n * @param onResized Function to execute when the element is resized.\n *\n * @return A function which will clean the event handlers when executed.\n */\nexport function addResizementListener(\n  element: HTMLElement,\n  onResized: (x: Position[\"x\"], y: Position[\"y\"]) => void\n): Function {\n  const minWidth = 15;\n  const minHeight = 15;\n\n  const resizeDraggable = document.createElement(\"div\");\n  resizeDraggable.className = \"resize-draggable\";\n  element.appendChild(resizeDraggable);\n\n  // Container of the resizable element.\n  const container = element.parentElement as HTMLElement;\n  // Store the initial draggable state.\n  const isDraggable = element.draggable;\n  // Init the coordinates.\n  let lastWidth: Size[\"width\"] = 0;\n  let lastHeight: Size[\"height\"] = 0;\n  let lastMouseX: Position[\"x\"] = 0;\n  let lastMouseY: Position[\"y\"] = 0;\n  let mouseElementOffsetX: Position[\"x\"] = 0;\n  let mouseElementOffsetY: Position[\"y\"] = 0;\n  // Init the bounds.\n  let containerBounds = container.getBoundingClientRect();\n  let containerOffset = getOffset(container);\n  let containerTop = containerOffset.top;\n  let containerBottom = containerTop + containerBounds.height;\n  let containerLeft = containerOffset.left;\n  let containerRight = containerLeft + containerBounds.width;\n  let elementOffset = getOffset(element);\n  let elementTop = elementOffset.top;\n  let elementLeft = elementOffset.left;\n  let borderWidth = window.getComputedStyle(element).borderWidth || \"0\";\n  let borderFix = Number.parseInt(borderWidth);\n\n  // Will run onResized 32ms after its last execution.\n  const debouncedResizement = debounce(\n    32,\n    (width: Size[\"width\"], height: Size[\"height\"]) => onResized(width, height)\n  );\n  // Will run onResized one time max every 16ms.\n  const throttledResizement = throttle(\n    16,\n    (width: Size[\"width\"], height: Size[\"height\"]) => onResized(width, height)\n  );\n\n  const handleResize = (e: MouseEvent) => {\n    // Calculate the new element coordinates.\n    let width = lastWidth + (e.pageX - lastMouseX);\n    let height = lastHeight + (e.pageY - lastMouseY);\n\n    if (width === lastWidth && height === lastHeight) return;\n\n    if (\n      width < lastWidth &&\n      e.pageX > elementLeft + (lastWidth - mouseElementOffsetX)\n    )\n      return;\n\n    if (width < minWidth) {\n      // Minimum value.\n      width = minWidth;\n    } else if (width + elementLeft - borderFix / 2 >= containerRight) {\n      // Limit the size to the container.\n      width = containerRight - elementLeft;\n    }\n    if (height < minHeight) {\n      // Minimum value.\n      height = minHeight;\n    } else if (height + elementTop - borderFix / 2 >= containerBottom) {\n      // Limit the size to the container.\n      height = containerBottom - elementTop;\n    }\n\n    // Run the movement events.\n    throttledResizement(width, height);\n    debouncedResizement(width, height);\n\n    // Store the coordinates of the element.\n    lastWidth = width;\n    lastHeight = height;\n    // Store the last mouse coordinates.\n    lastMouseX = e.pageX;\n    lastMouseY = e.pageY;\n  };\n  const handleEnd = () => {\n    // Reset the positions.\n    lastWidth = 0;\n    lastHeight = 0;\n    lastMouseX = 0;\n    lastMouseY = 0;\n    mouseElementOffsetX = 0;\n    mouseElementOffsetY = 0;\n    // Remove the move event.\n    document.removeEventListener(\"mousemove\", handleResize);\n    // Clean itself.\n    document.removeEventListener(\"mouseup\", handleEnd);\n    // Reset the draggable property to its initial state.\n    element.draggable = isDraggable;\n    // Reset the body selection property to a default state.\n    document.body.style.userSelect = \"auto\";\n  };\n  const handleStart = (e: MouseEvent) => {\n    e.stopPropagation();\n\n    // Disable the drag temporarily.\n    element.draggable = false;\n\n    // Store the difference between the cursor and\n    // the initial coordinates of the element.\n    const { width, height } = element.getBoundingClientRect();\n    lastWidth = width;\n    lastHeight = height;\n    // Store the mouse position.\n    lastMouseX = e.pageX;\n    lastMouseY = e.pageY;\n    // Store the relative position between the mouse and the element.\n    mouseElementOffsetX = e.offsetX;\n    mouseElementOffsetY = e.offsetY;\n\n    // Initialize the bounds.\n    containerBounds = container.getBoundingClientRect();\n    containerOffset = getOffset(container);\n    containerTop = containerOffset.top;\n    containerBottom = containerTop + containerBounds.height;\n    containerLeft = containerOffset.left;\n    containerRight = containerLeft + containerBounds.width;\n    elementOffset = getOffset(element);\n    elementTop = elementOffset.top;\n    elementLeft = elementOffset.left;\n\n    // Listen to the mouse movement.\n    document.addEventListener(\"mousemove\", handleResize);\n    // Listen to the moment when the mouse click is not pressed anymore.\n    document.addEventListener(\"mouseup\", handleEnd);\n    // Limit the mouse selection of the body.\n    document.body.style.userSelect = \"none\";\n  };\n\n  // Event to listen the init of the movement.\n  resizeDraggable.addEventListener(\"mousedown\", handleStart);\n\n  // Returns a function to clean the event listeners.\n  return () => {\n    resizeDraggable.remove();\n    handleEnd();\n  };\n}\n\nexport function t(text: string): string {\n  return text;\n}\n","import {\n  Position,\n  Size,\n  AnyObject,\n  WithModuleProps,\n  ItemMeta\n} from \"./lib/types\";\nimport {\n  sizePropsDecoder,\n  positionPropsDecoder,\n  parseIntOr,\n  parseBoolean,\n  notEmptyStringOr,\n  replaceMacros,\n  humanDate,\n  humanTime,\n  addMovementListener,\n  debounce,\n  addResizementListener,\n  t\n} from \"./lib\";\nimport TypedEvent, { Listener, Disposable } from \"./lib/TypedEvent\";\nimport { FormContainer, InputGroup } from \"./Form\";\n\n// Enum: https://www.typescriptlang.org/docs/handbook/enums.html.\nexport const enum ItemType {\n  STATIC_GRAPH = 0,\n  MODULE_GRAPH = 1,\n  SIMPLE_VALUE = 2,\n  PERCENTILE_BAR = 3,\n  LABEL = 4,\n  ICON = 5,\n  SIMPLE_VALUE_MAX = 6,\n  SIMPLE_VALUE_MIN = 7,\n  SIMPLE_VALUE_AVG = 8,\n  PERCENTILE_BUBBLE = 9,\n  SERVICE = 10,\n  GROUP_ITEM = 11,\n  BOX_ITEM = 12,\n  LINE_ITEM = 13,\n  AUTO_SLA_GRAPH = 14,\n  CIRCULAR_PROGRESS_BAR = 15,\n  CIRCULAR_INTERIOR_PROGRESS_BAR = 16,\n  DONUT_GRAPH = 17,\n  BARS_GRAPH = 18,\n  CLOCK = 19,\n  COLOR_CLOUD = 20\n}\n\n// Base item properties. This interface should be extended by the item implementations.\nexport interface ItemProps extends Position, Size {\n  readonly id: number;\n  readonly type: ItemType;\n  label: string | null;\n  labelPosition: \"up\" | \"right\" | \"down\" | \"left\";\n  isLinkEnabled: boolean;\n  link: string | null;\n  isOnTop: boolean;\n  parentId: number | null;\n  aclGroupId: number | null;\n}\n\nexport interface ItemClickEvent {\n  item: VisualConsoleItem<ItemProps>;\n  nativeEvent: Event;\n}\n\n// FIXME: Fix type compatibility.\nexport interface ItemRemoveEvent<Props extends ItemProps> {\n  // data: Props;\n  data: AnyObject;\n}\n\nexport interface ItemMovedEvent {\n  item: VisualConsoleItem<ItemProps>;\n  prevPosition: Position;\n  newPosition: Position;\n}\n\nexport interface ItemResizedEvent {\n  item: VisualConsoleItem<ItemProps>;\n  prevSize: Size;\n  newSize: Size;\n}\n\n// TODO: Document\nclass PositionInputGroup extends InputGroup<ItemProps> {\n  protected createContent(): HTMLElement | HTMLElement[] {\n    const positionLabel = document.createElement(\"label\");\n    positionLabel.textContent = t(\"Position\");\n\n    const positionInputX = document.createElement(\"input\");\n    positionInputX.type = \"number\";\n    positionInputX.min = \"0\";\n    positionInputX.required = true;\n    positionInputX.value = `${this.currentData.x || this.initialData.x || 0}`;\n    positionInputX.addEventListener(\"change\", e =>\n      this.updateData({\n        x: parseIntOr((e.target as HTMLInputElement).value, 0)\n      })\n    );\n\n    const positionInputY = document.createElement(\"input\");\n    positionInputY.type = \"number\";\n    positionInputY.min = \"0\";\n    positionInputY.required = true;\n    positionInputY.value = `${this.currentData.y || this.initialData.y || 0}`;\n    positionInputY.addEventListener(\"change\", e =>\n      this.updateData({\n        y: parseIntOr((e.target as HTMLInputElement).value, 0)\n      })\n    );\n\n    positionLabel.appendChild(positionInputX);\n    positionLabel.appendChild(positionInputY);\n\n    return positionLabel;\n  }\n}\n\n/**\n * Extract a valid enum value from a raw label positi9on value.\n * @param labelPosition Raw value.\n */\nconst parseLabelPosition = (\n  labelPosition: unknown\n): ItemProps[\"labelPosition\"] => {\n  switch (labelPosition) {\n    case \"up\":\n    case \"right\":\n    case \"down\":\n    case \"left\":\n      return labelPosition;\n    default:\n      return \"down\";\n  }\n};\n\n/**\n * Build a valid typed object from a raw object.\n * This will allow us to ensure the type safety.\n *\n * @param data Raw object.\n * @return An object representing the item props.\n * @throws Will throw a TypeError if some property\n * is missing from the raw object or have an invalid type.\n */\nexport function itemBasePropsDecoder(data: AnyObject): ItemProps | never {\n  if (data.id == null || isNaN(parseInt(data.id))) {\n    throw new TypeError(\"invalid id.\");\n  }\n  if (data.type == null || isNaN(parseInt(data.type))) {\n    throw new TypeError(\"invalid type.\");\n  }\n\n  return {\n    id: parseInt(data.id),\n    type: parseInt(data.type),\n    label: notEmptyStringOr(data.label, null),\n    labelPosition: parseLabelPosition(data.labelPosition),\n    isLinkEnabled: parseBoolean(data.isLinkEnabled),\n    link: notEmptyStringOr(data.link, null),\n    isOnTop: parseBoolean(data.isOnTop),\n    parentId: parseIntOr(data.parentId, null),\n    aclGroupId: parseIntOr(data.aclGroupId, null),\n    ...sizePropsDecoder(data), // Object spread. It will merge the properties of the two objects.\n    ...positionPropsDecoder(data) // Object spread. It will merge the properties of the two objects.\n  };\n}\n\n/**\n * Base class of the visual console items. Should be extended to use its capabilities.\n */\nabstract class VisualConsoleItem<Props extends ItemProps> {\n  // Properties of the item.\n  private itemProps: Props;\n  // Metadata of the item.\n  private _metadata: ItemMeta;\n  // Reference to the DOM element which will contain the item.\n  public elementRef: HTMLElement = document.createElement(\"div\");\n  public labelElementRef: HTMLElement = document.createElement(\"div\");\n  // Reference to the DOM element which will contain the view of the item which extends this class.\n  protected childElementRef: HTMLElement = document.createElement(\"div\");\n  // Event manager for click events.\n  private readonly clickEventManager = new TypedEvent<ItemClickEvent>();\n  // Event manager for double click events.\n  private readonly dblClickEventManager = new TypedEvent<ItemClickEvent>();\n  // Event manager for moved events.\n  private readonly movedEventManager = new TypedEvent<ItemMovedEvent>();\n  // Event manager for resized events.\n  private readonly resizedEventManager = new TypedEvent<ItemResizedEvent>();\n  // Event manager for remove events.\n  private readonly removeEventManager = new TypedEvent<\n    ItemRemoveEvent<Props>\n  >();\n  // List of references to clean the event listeners.\n  private readonly disposables: Disposable[] = [];\n\n  // This function will only run the 2nd arg function after the time\n  // of the first arg have passed after its last execution.\n  private debouncedMovementSave = debounce(\n    500, // ms.\n    (x: Position[\"x\"], y: Position[\"y\"]) => {\n      // Update the metadata information.\n      // Don't use the .meta property cause we don't need DOM updates.\n      this._metadata.isBeingMoved = false;\n\n      const prevPosition = {\n        x: this.props.x,\n        y: this.props.y\n      };\n      const newPosition = {\n        x: x,\n        y: y\n      };\n\n      if (!this.positionChanged(prevPosition, newPosition)) return;\n\n      // Save the new position to the props.\n      this.move(x, y);\n      // Emit the movement event.\n      this.movedEventManager.emit({\n        item: this,\n        prevPosition: prevPosition,\n        newPosition: newPosition\n      });\n    }\n  );\n  // This property will store the function\n  // to clean the movement listener.\n  private removeMovement: Function | null = null;\n\n  /**\n   * Start the movement funtionality.\n   * @param element Element to move inside its container.\n   */\n  private initMovementListener(element: HTMLElement): void {\n    this.removeMovement = addMovementListener(\n      element,\n      (x: Position[\"x\"], y: Position[\"y\"]) => {\n        // Update the metadata information.\n        // Don't use the .meta property cause we don't need DOM updates.\n        this._metadata.isBeingMoved = true;\n        // Move the DOM element.\n        this.moveElement(x, y);\n        // Run the save function.\n        this.debouncedMovementSave(x, y);\n      }\n    );\n  }\n  /**\n   * Stop the movement fun\n   */\n  private stopMovementListener(): void {\n    if (this.removeMovement) {\n      this.removeMovement();\n      this.removeMovement = null;\n    }\n  }\n\n  // This function will only run the 2nd arg function after the time\n  // of the first arg have passed after its last execution.\n  private debouncedResizementSave = debounce(\n    500, // ms.\n    (width: Size[\"width\"], height: Size[\"height\"]) => {\n      // Update the metadata information.\n      // Don't use the .meta property cause we don't need DOM updates.\n      this._metadata.isBeingResized = false;\n\n      const prevSize = {\n        width: this.props.width,\n        height: this.props.height\n      };\n      const newSize = {\n        width: width,\n        height: height\n      };\n\n      if (!this.sizeChanged(prevSize, newSize)) return;\n\n      // Save the new position to the props.\n      this.resize(width, height);\n      // Emit the resizement event.\n      this.resizedEventManager.emit({\n        item: this,\n        prevSize: prevSize,\n        newSize: newSize\n      });\n    }\n  );\n  // This property will store the function\n  // to clean the resizement listener.\n  private removeResizement: Function | null = null;\n\n  /**\n   * Start the resizement funtionality.\n   * @param element Element to move inside its container.\n   */\n  protected initResizementListener(element: HTMLElement): void {\n    this.removeResizement = addResizementListener(\n      element,\n      (width: Size[\"width\"], height: Size[\"height\"]) => {\n        // Update the metadata information.\n        // Don't use the .meta property cause we don't need DOM updates.\n        this._metadata.isBeingResized = true;\n\n        // The label it's outside the item's size, so we need\n        // to get rid of its size to get the real size of the\n        // item's content.\n        if (this.props.label && this.props.label.length > 0) {\n          const {\n            width: labelWidth,\n            height: labelHeight\n          } = this.labelElementRef.getBoundingClientRect();\n\n          switch (this.props.labelPosition) {\n            case \"up\":\n            case \"down\":\n              height -= labelHeight;\n              break;\n            case \"left\":\n            case \"right\":\n              width -= labelWidth;\n              break;\n          }\n        }\n\n        // Move the DOM element.\n        this.resizeElement(width, height);\n        // Run the save function.\n        this.debouncedResizementSave(width, height);\n      }\n    );\n  }\n  /**\n   * Stop the resizement functionality.\n   */\n  private stopResizementListener(): void {\n    if (this.removeResizement) {\n      this.removeResizement();\n      this.removeResizement = null;\n    }\n  }\n\n  /**\n   * To create a new element which will be inside the item box.\n   * @return Item.\n   */\n  protected abstract createDomElement(): HTMLElement;\n\n  public constructor(\n    props: Props,\n    metadata: ItemMeta,\n    deferInit: boolean = false\n  ) {\n    this.itemProps = props;\n    this._metadata = metadata;\n\n    if (!deferInit) this.init();\n  }\n\n  /**\n   * To create and append the DOM elements.\n   */\n  protected init(): void {\n    /*\n     * Get a HTMLElement which represents the container box\n     * of the Visual Console item. This element will manage\n     * all the common things like click events, show a border\n     * when hovered, etc.\n     */\n    this.elementRef = this.createContainerDomElement();\n    this.labelElementRef = this.createLabelDomElement();\n\n    /*\n     * Get a HTMLElement which represents the custom view\n     * of the Visual Console item. This element will be\n     * different depending on the item implementation.\n     */\n    this.childElementRef = this.createDomElement();\n\n    // Insert the elements into the container.\n    this.elementRef.append(this.childElementRef, this.labelElementRef);\n\n    // Resize element.\n    this.resizeElement(this.itemProps.width, this.itemProps.height);\n    // Set label position.\n    this.changeLabelPosition(this.itemProps.labelPosition);\n  }\n\n  /**\n   * To create a new box for the visual console item.\n   * @return Item box.\n   */\n  private createContainerDomElement(): HTMLElement {\n    let box;\n    if (this.props.isLinkEnabled) {\n      box = document.createElement(\"a\") as HTMLAnchorElement;\n      if (this.props.link) box.href = this.props.link;\n    } else {\n      box = document.createElement(\"div\") as HTMLDivElement;\n    }\n\n    box.className = \"visual-console-item\";\n    box.style.zIndex = this.props.isOnTop ? \"2\" : \"1\";\n    box.style.left = `${this.props.x}px`;\n    box.style.top = `${this.props.y}px`;\n\n    // Init the click listeners.\n    box.addEventListener(\"dblclick\", e => {\n      if (!this.meta.isBeingMoved && !this.meta.isBeingResized) {\n        this.dblClickEventManager.emit({\n          item: this,\n          nativeEvent: e\n        });\n      }\n    });\n    box.addEventListener(\"click\", e => {\n      if (this.meta.editMode) {\n        e.preventDefault();\n        e.stopPropagation();\n      }\n\n      if (!this.meta.isBeingMoved && !this.meta.isBeingResized) {\n        this.clickEventManager.emit({\n          item: this,\n          nativeEvent: e\n        });\n      }\n    });\n\n    // Metadata state.\n    if (this.meta.editMode) {\n      box.classList.add(\"is-editing\");\n      // Init the movement listener.\n      this.initMovementListener(box);\n      // Init the resizement listener.\n      this.initResizementListener(box);\n    }\n    if (this.meta.isFetching) {\n      box.classList.add(\"is-fetching\");\n    }\n    if (this.meta.isUpdating) {\n      box.classList.add(\"is-updating\");\n    }\n    if (this.meta.isSelected) {\n      box.classList.add(\"is-selected\");\n    }\n\n    return box;\n  }\n\n  /**\n   * To create a new label for the visual console item.\n   * @return Item label.\n   */\n  protected createLabelDomElement(): HTMLElement {\n    const element = document.createElement(\"div\");\n    element.className = \"visual-console-item-label\";\n    // Add the label if it exists.\n    const label = this.getLabelWithMacrosReplaced();\n    if (label.length > 0) {\n      // Ugly table we need to use to replicate the legacy style.\n      const table = document.createElement(\"table\");\n      const row = document.createElement(\"tr\");\n      const emptyRow1 = document.createElement(\"tr\");\n      const emptyRow2 = document.createElement(\"tr\");\n      const cell = document.createElement(\"td\");\n\n      cell.innerHTML = label;\n      row.append(cell);\n      table.append(emptyRow1, row, emptyRow2);\n      table.style.textAlign = \"center\";\n\n      // Change the table size depending on its position.\n      switch (this.props.labelPosition) {\n        case \"up\":\n        case \"down\":\n          if (this.props.width > 0) {\n            table.style.width = `${this.props.width}px`;\n            table.style.height = null;\n          }\n          break;\n        case \"left\":\n        case \"right\":\n          if (this.props.height > 0) {\n            table.style.width = null;\n            table.style.height = `${this.props.height}px`;\n          }\n          break;\n      }\n\n      // element.innerHTML = this.props.label;\n      element.append(table);\n    }\n\n    return element;\n  }\n\n  /**\n   * Return the label stored into the props with some macros replaced.\n   */\n  protected getLabelWithMacrosReplaced(): string {\n    // We assert that the props may have some needed properties.\n    const props = this.props as Partial<WithModuleProps>;\n\n    return replaceMacros(\n      [\n        {\n          macro: \"_date_\",\n          value: humanDate(new Date())\n        },\n        {\n          macro: \"_time_\",\n          value: humanTime(new Date())\n        },\n        {\n          macro: \"_agent_\",\n          value: props.agentAlias != null ? props.agentAlias : \"\"\n        },\n        {\n          macro: \"_agentdescription_\",\n          value: props.agentDescription != null ? props.agentDescription : \"\"\n        },\n        {\n          macro: \"_address_\",\n          value: props.agentAddress != null ? props.agentAddress : \"\"\n        },\n        {\n          macro: \"_module_\",\n          value: props.moduleName != null ? props.moduleName : \"\"\n        },\n        {\n          macro: \"_moduledescription_\",\n          value: props.moduleDescription != null ? props.moduleDescription : \"\"\n        }\n      ],\n      this.props.label || \"\"\n    );\n  }\n\n  /**\n   * To update the content element.\n   * @return Item.\n   */\n  protected updateDomElement(element: HTMLElement): void {\n    element.innerHTML = this.createDomElement().innerHTML;\n  }\n\n  /**\n   * Public accessor of the `props` property.\n   * @return Properties.\n   */\n  public get props(): Props {\n    return { ...this.itemProps }; // Return a copy.\n  }\n\n  /**\n   * Public setter of the `props` property.\n   * If the new props are different enough than the\n   * stored props, a render would be fired.\n   * @param newProps\n   */\n  public set props(newProps: Props) {\n    this.setProps(newProps);\n  }\n\n  /**\n   * Clasic and protected version of the setter of the `props` property.\n   * Useful to override it from children classes.\n   * @param newProps\n   */\n  protected setProps(newProps: Props) {\n    const prevProps = this.props;\n    // Update the internal props.\n    this.itemProps = newProps;\n\n    // From this point, things which rely on this.props can access to the changes.\n\n    // Check if we should re-render.\n    if (this.shouldBeUpdated(prevProps, newProps))\n      this.render(prevProps, this._metadata);\n  }\n\n  /**\n   * Public accessor of the `meta` property.\n   * @return Properties.\n   */\n  public get meta(): ItemMeta {\n    return { ...this._metadata }; // Return a copy.\n  }\n\n  /**\n   * Public setter of the `meta` property.\n   * If the new meta are different enough than the\n   * stored meta, a render would be fired.\n   * @param newProps\n   */\n  public set meta(newMetadata: ItemMeta) {\n    this.setMeta(newMetadata);\n  }\n\n  /**\n   * Classic version of the setter of the `meta` property.\n   * Useful to override it from children classes.\n   * @param newProps\n   */\n  public setMeta(newMetadata: Partial<ItemMeta>): void {\n    const prevMetadata = this._metadata;\n    // Update the internal meta.\n    this._metadata = {\n      ...prevMetadata,\n      ...newMetadata\n    };\n\n    // From this point, things which rely on this.props can access to the changes.\n\n    // Check if we should re-render.\n    // if (this.shouldBeUpdated(prevMetadata, newMetadata))\n    this.render(this.itemProps, prevMetadata);\n  }\n\n  /**\n   * To compare the previous and the new props and returns a boolean value\n   * in case the difference is meaningfull enough to perform DOM changes.\n   *\n   * Here, the only comparision is done by reference.\n   *\n   * Override this function to perform a different comparision depending on the item needs.\n   *\n   * @param prevProps\n   * @param newProps\n   * @return Whether the difference is meaningful enough to perform DOM changes or not.\n   */\n  protected shouldBeUpdated(prevProps: Props, newProps: Props): boolean {\n    return prevProps !== newProps;\n  }\n\n  /**\n   * To recreate or update the HTMLElement which represents the item into the DOM.\n   * @param prevProps If exists it will be used to only perform DOM updates instead of a full replace.\n   */\n  public render(\n    prevProps: Props | null = null,\n    prevMeta: ItemMeta | null = null\n  ): void {\n    this.updateDomElement(this.childElementRef);\n\n    // Move box.\n    if (!prevProps || this.positionChanged(prevProps, this.props)) {\n      this.moveElement(this.props.x, this.props.y);\n    }\n    // Resize box.\n    if (!prevProps || this.sizeChanged(prevProps, this.props)) {\n      this.resizeElement(this.props.width, this.props.height);\n    }\n    // Change label.\n    const oldLabelHtml = this.labelElementRef.innerHTML;\n    const newLabelHtml = this.createLabelDomElement().innerHTML;\n    if (oldLabelHtml !== newLabelHtml) {\n      this.labelElementRef.innerHTML = newLabelHtml;\n    }\n    // Change label position.\n    if (!prevProps || prevProps.labelPosition !== this.props.labelPosition) {\n      this.changeLabelPosition(this.props.labelPosition);\n    }\n    // Change link.\n    if (\n      prevProps &&\n      (prevProps.isLinkEnabled !== this.props.isLinkEnabled ||\n        (this.props.isLinkEnabled && prevProps.link !== this.props.link))\n    ) {\n      const container = this.createContainerDomElement();\n      // Add the children of the old element.\n      container.innerHTML = this.elementRef.innerHTML;\n      // Copy the attributes.\n      const attrs = this.elementRef.attributes;\n      for (let i = 0; i < attrs.length; i++) {\n        if (attrs[i].nodeName !== \"id\") {\n          container.setAttributeNode(attrs[i]);\n        }\n      }\n      // Replace the reference.\n      if (this.elementRef.parentNode !== null) {\n        this.elementRef.parentNode.replaceChild(container, this.elementRef);\n      }\n\n      // Changed the reference to the main element. It's ugly, but needed.\n      this.elementRef = container;\n    }\n\n    // Change metadata related things.\n    if (!prevMeta || prevMeta.editMode !== this.meta.editMode) {\n      if (this.meta.editMode) {\n        this.elementRef.classList.add(\"is-editing\");\n        this.initMovementListener(this.elementRef);\n        this.initResizementListener(this.elementRef);\n      } else {\n        this.elementRef.classList.remove(\"is-editing\");\n        this.stopMovementListener();\n        this.stopResizementListener();\n      }\n    }\n    if (!prevMeta || prevMeta.isFetching !== this.meta.isFetching) {\n      if (this.meta.isFetching) {\n        this.elementRef.classList.add(\"is-fetching\");\n      } else {\n        this.elementRef.classList.remove(\"is-fetching\");\n      }\n    }\n    if (!prevMeta || prevMeta.isUpdating !== this.meta.isUpdating) {\n      if (this.meta.isUpdating) {\n        this.elementRef.classList.add(\"is-updating\");\n\n        const divParent = document.createElement(\"div\");\n        divParent.className = \"div-visual-console-spinner\";\n        const divSpinner = document.createElement(\"div\");\n        divSpinner.className = \"visual-console-spinner\";\n        divParent.appendChild(divSpinner);\n        this.elementRef.appendChild(divParent);\n      } else {\n        this.elementRef.classList.remove(\"is-updating\");\n\n        const div = this.elementRef.querySelector(\n          \".div-visual-console-spinner\"\n        );\n        if (div !== null) {\n          const parent = div.parentElement;\n          if (parent !== null) {\n            parent.removeChild(div);\n          }\n        }\n      }\n    }\n    if (!prevMeta || prevMeta.isSelected !== this.meta.isSelected) {\n      if (this.meta.isSelected) {\n        this.elementRef.classList.add(\"is-selected\");\n      } else {\n        this.elementRef.classList.remove(\"is-selected\");\n      }\n    }\n  }\n\n  /**\n   * To remove the event listeners and the elements from the DOM.\n   */\n  public remove(): void {\n    // Call the remove event.\n    this.removeEventManager.emit({ data: this.props });\n    // Event listeners.\n    this.disposables.forEach(disposable => {\n      try {\n        disposable.dispose();\n      } catch (ignored) {} // eslint-disable-line no-empty\n    });\n    // VisualConsoleItem DOM element.\n    this.elementRef.remove();\n  }\n\n  /**\n   * Compare the previous and the new position and return\n   * a boolean value in case the position changed.\n   * @param prevPosition\n   * @param newPosition\n   * @return Whether the position changed or not.\n   */\n  protected positionChanged(\n    prevPosition: Position,\n    newPosition: Position\n  ): boolean {\n    return prevPosition.x !== newPosition.x || prevPosition.y !== newPosition.y;\n  }\n\n  /**\n   * Move the label around the item content.\n   * @param position Label position.\n   */\n  protected changeLabelPosition(position: Props[\"labelPosition\"]): void {\n    switch (position) {\n      case \"up\":\n        this.elementRef.style.flexDirection = \"column-reverse\";\n        break;\n      case \"left\":\n        this.elementRef.style.flexDirection = \"row-reverse\";\n        break;\n      case \"right\":\n        this.elementRef.style.flexDirection = \"row\";\n        break;\n      case \"down\":\n      default:\n        this.elementRef.style.flexDirection = \"column\";\n        break;\n    }\n\n    // Ugly table to show the label as its legacy counterpart.\n    const tables = this.labelElementRef.getElementsByTagName(\"table\");\n    const table = tables.length > 0 ? tables.item(0) : null;\n    // Change the table size depending on its position.\n    if (table) {\n      switch (this.props.labelPosition) {\n        case \"up\":\n        case \"down\":\n          if (this.props.width > 0) {\n            table.style.width = `${this.props.width}px`;\n            table.style.height = null;\n          }\n          break;\n        case \"left\":\n        case \"right\":\n          if (this.props.height > 0) {\n            table.style.width = null;\n            table.style.height = `${this.props.height}px`;\n          }\n          break;\n      }\n    }\n  }\n\n  /**\n   * Move the DOM container.\n   * @param x Horizontal axis position.\n   * @param y Vertical axis position.\n   */\n  protected moveElement(x: number, y: number): void {\n    this.elementRef.style.left = `${x}px`;\n    this.elementRef.style.top = `${y}px`;\n  }\n\n  /**\n   * Update the position into the properties and move the DOM container.\n   * @param x Horizontal axis position.\n   * @param y Vertical axis position.\n   */\n  public move(x: number, y: number): void {\n    this.moveElement(x, y);\n    this.itemProps = {\n      ...this.props, // Object spread: http://es6-features.org/#SpreadOperator\n      x,\n      y\n    };\n  }\n\n  /**\n   * Compare the previous and the new size and return\n   * a boolean value in case the size changed.\n   * @param prevSize\n   * @param newSize\n   * @return Whether the size changed or not.\n   */\n  protected sizeChanged(prevSize: Size, newSize: Size): boolean {\n    return (\n      prevSize.width !== newSize.width || prevSize.height !== newSize.height\n    );\n  }\n\n  /**\n   * Resize the DOM content container.\n   * @param width\n   * @param height\n   */\n  protected resizeElement(width: number, height: number): void {\n    // The most valuable size is the content size.\n    this.childElementRef.style.width = width > 0 ? `${width}px` : null;\n    this.childElementRef.style.height = height > 0 ? `${height}px` : null;\n\n    if (this.props.label && this.props.label.length > 0) {\n      // Ugly table to show the label as its legacy counterpart.\n      const tables = this.labelElementRef.getElementsByTagName(\"table\");\n      const table = tables.length > 0 ? tables.item(0) : null;\n\n      if (table) {\n        switch (this.props.labelPosition) {\n          case \"up\":\n          case \"down\":\n            table.style.width = width > 0 ? `${width}px` : null;\n            break;\n          case \"left\":\n          case \"right\":\n            table.style.height = height > 0 ? `${height}px` : null;\n            break;\n        }\n      }\n    }\n  }\n\n  /**\n   * Update the size into the properties and resize the DOM container.\n   * @param width\n   * @param height\n   */\n  public resize(width: number, height: number): void {\n    this.resizeElement(width, height);\n    this.itemProps = {\n      ...this.props, // Object spread: http://es6-features.org/#SpreadOperator\n      width,\n      height\n    };\n  }\n\n  // TODO: Document\n  public getFormContainer(): FormContainer {\n    return new FormContainer(\n      t(\"Item\"),\n      [new PositionInputGroup(\"position\", this.props)],\n      [\"position\"]\n    );\n  }\n\n  /**\n   * To add an event handler to the click of the linked visual console elements.\n   * @param listener Function which is going to be executed when a linked console is clicked.\n   */\n  public onClick(listener: Listener<ItemClickEvent>): Disposable {\n    /*\n     * The '.on' function returns a function which will clean the event\n     * listener when executed. We store all the 'dispose' functions to\n     * call them when the item should be cleared.\n     */\n    const disposable = this.clickEventManager.on(listener);\n    this.disposables.push(disposable);\n\n    return disposable;\n  }\n\n  /**\n   * To add an event handler to the double click of the linked visual console elements.\n   * @param listener Function which is going to be executed when a linked console is double clicked.\n   */\n  public onDblClick(listener: Listener<ItemClickEvent>): Disposable {\n    /*\n     * The '.on' function returns a function which will clean the event\n     * listener when executed. We store all the 'dispose' functions to\n     * call them when the item should be cleared.\n     */\n    const disposable = this.dblClickEventManager.on(listener);\n    this.disposables.push(disposable);\n\n    return disposable;\n  }\n\n  /**\n   * To add an event handler to the movement of visual console elements.\n   * @param listener Function which is going to be executed when a linked console is moved.\n   */\n  public onMoved(listener: Listener<ItemMovedEvent>): Disposable {\n    /*\n     * The '.on' function returns a function which will clean the event\n     * listener when executed. We store all the 'dispose' functions to\n     * call them when the item should be cleared.\n     */\n    const disposable = this.movedEventManager.on(listener);\n    this.disposables.push(disposable);\n\n    return disposable;\n  }\n\n  /**\n   * To add an event handler to the resizement of visual console elements.\n   * @param listener Function which is going to be executed when a linked console is moved.\n   */\n  public onResized(listener: Listener<ItemResizedEvent>): Disposable {\n    /*\n     * The '.on' function returns a function which will clean the event\n     * listener when executed. We store all the 'dispose' functions to\n     * call them when the item should be cleared.\n     */\n    const disposable = this.resizedEventManager.on(listener);\n    this.disposables.push(disposable);\n\n    return disposable;\n  }\n\n  /**\n   * To add an event handler to the removal of the item.\n   * @param listener Function which is going to be executed when a item is removed.\n   */\n  public onRemove(listener: Listener<ItemRemoveEvent<Props>>): Disposable {\n    /*\n     * The '.on' function returns a function which will clean the event\n     * listener when executed. We store all the 'dispose' functions to\n     * call them when the item should be cleared.\n     */\n    const disposable = this.removeEventManager.on(listener);\n    this.disposables.push(disposable);\n\n    return disposable;\n  }\n}\n\nexport default VisualConsoleItem;\n","export interface Listener<T> {\n  (event: T): void;\n}\n\nexport interface Disposable {\n  dispose: () => void;\n}\n\n/** passes through events as they happen. You will not get events from before you start listening */\nexport default class TypedEvent<T> {\n  private listeners: Listener<T>[] = [];\n  private listenersOncer: Listener<T>[] = [];\n\n  public on = (listener: Listener<T>): Disposable => {\n    this.listeners.push(listener);\n    return {\n      dispose: () => this.off(listener)\n    };\n  };\n\n  public once = (listener: Listener<T>): void => {\n    this.listenersOncer.push(listener);\n  };\n\n  public off = (listener: Listener<T>): void => {\n    const callbackIndex = this.listeners.indexOf(listener);\n    if (callbackIndex > -1) this.listeners.splice(callbackIndex, 1);\n  };\n\n  public emit = (event: T): void => {\n    /** Update any general listeners */\n    this.listeners.forEach(listener => listener(event));\n\n    /** Clear the `once` queue */\n    this.listenersOncer.forEach(listener => listener(event));\n    this.listenersOncer = [];\n  };\n\n  public pipe = (te: TypedEvent<T>): Disposable => this.on(e => te.emit(e));\n}\n","import TypedEvent, { Listener, Disposable } from \"./lib/TypedEvent\";\nimport { AnyObject } from \"./lib/types\";\nimport { t } from \"./lib\";\n\n// TODO: Document\nexport abstract class InputGroup<Data extends {} = {}> {\n  private _name: string = \"\";\n  private _element?: HTMLElement;\n  public initialData: Data;\n  protected currentData: Partial<Data> = {};\n\n  public constructor(name: string, initialData: Data) {\n    this.name = name;\n    this.initialData = initialData;\n  }\n\n  public set name(name: string) {\n    if (name.length === 0) throw new RangeError(\"empty name\");\n    this._name = name;\n  }\n\n  public get name(): string {\n    return this._name;\n  }\n\n  public get data(): Partial<Data> {\n    return { ...this.currentData };\n  }\n\n  public get element(): HTMLElement {\n    if (this._element == null) {\n      const element = document.createElement(\"div\");\n      element.className = `input-group input-group-${this.name}`;\n\n      const content = this.createContent();\n\n      if (content instanceof Array) {\n        content.forEach(element.appendChild);\n      } else {\n        element.appendChild(content);\n      }\n\n      this._element = element;\n    }\n\n    return this._element;\n  }\n\n  public reset(): void {\n    this.currentData = {};\n  }\n\n  protected updateData(data: Partial<Data>): void {\n    this.currentData = {\n      ...this.currentData,\n      ...data\n    };\n    // TODO: Update item.\n  }\n\n  protected abstract createContent(): HTMLElement | HTMLElement[];\n\n  // public abstract get isValid(): boolean;\n}\n\nexport interface SubmitFormEvent {\n  nativeEvent: Event;\n  data: AnyObject;\n}\n\n// TODO: Document\nexport class FormContainer {\n  public readonly title: string;\n  private inputGroupsByName: { [name: string]: InputGroup } = {};\n  private enabledInputGroupNames: string[] = [];\n  // Event manager for submit events.\n  private readonly submitEventManager = new TypedEvent<SubmitFormEvent>();\n\n  public constructor(\n    title: string,\n    inputGroups: InputGroup[] = [],\n    enabledInputGroups: string[] = []\n  ) {\n    this.title = title;\n\n    if (inputGroups.length > 0) {\n      this.inputGroupsByName = inputGroups.reduce((prevVal, inputGroup) => {\n        prevVal[inputGroup.name] = inputGroup;\n        return prevVal;\n      }, this.inputGroupsByName);\n    }\n\n    if (enabledInputGroups.length > 0) {\n      this.enabledInputGroupNames = [\n        ...this.enabledInputGroupNames,\n        ...enabledInputGroups.filter(\n          name => this.inputGroupsByName[name] != null\n        )\n      ];\n    }\n  }\n\n  public getInputGroup(inputGroupName: string): InputGroup | null {\n    return this.inputGroupsByName[inputGroupName] || null;\n  }\n\n  public addInputGroup(\n    inputGroup: InputGroup,\n    index: number | null = null\n  ): FormContainer {\n    this.inputGroupsByName[inputGroup.name] = inputGroup;\n\n    // Remove the current stored name if exist.\n    this.enabledInputGroupNames = this.enabledInputGroupNames.filter(\n      name => name === inputGroup.name\n    );\n\n    if (index !== null) {\n      if (index <= 0) {\n        this.enabledInputGroupNames = [\n          inputGroup.name,\n          ...this.enabledInputGroupNames\n        ];\n      } else if (index >= this.enabledInputGroupNames.length) {\n        this.enabledInputGroupNames = [\n          ...this.enabledInputGroupNames,\n          inputGroup.name\n        ];\n      } else {\n        this.enabledInputGroupNames = [\n          // part of the array before the specified index\n          ...this.enabledInputGroupNames.slice(0, index),\n          // inserted item\n          inputGroup.name,\n          // part of the array after the specified index\n          ...this.enabledInputGroupNames.slice(index)\n        ];\n      }\n    } else {\n      this.enabledInputGroupNames = [\n        ...this.enabledInputGroupNames,\n        inputGroup.name\n      ];\n    }\n\n    return this;\n  }\n\n  public removeInputGroup(inputGroupName: string): FormContainer {\n    // delete this.inputGroupsByName[inputGroupName];\n    // Remove the current stored name.\n    this.enabledInputGroupNames = this.enabledInputGroupNames.filter(\n      name => name === inputGroupName\n    );\n\n    return this;\n  }\n\n  public getFormElement(\n    type: \"creation\" | \"update\" = \"update\"\n  ): HTMLFormElement {\n    const form = document.createElement(\"form\");\n    form.className = \"visual-console-item-edition\";\n    form.addEventListener(\"submit\", e => {\n      e.preventDefault();\n      this.submitEventManager.emit({\n        nativeEvent: e,\n        data: this.enabledInputGroupNames.reduce((data, name) => {\n          if (this.inputGroupsByName[name]) {\n            data = {\n              ...data,\n              ...this.inputGroupsByName[name].data\n            };\n          }\n          return data;\n        }, {})\n      });\n    });\n\n    const formContent = document.createElement(\"div\");\n    formContent.className = \"input-groups\";\n\n    this.enabledInputGroupNames.forEach(name => {\n      if (this.inputGroupsByName[name]) {\n        formContent.appendChild(this.inputGroupsByName[name].element);\n      }\n    });\n\n    // Add buttons.\n    const submitBtn = document.createElement(\"input\");\n    submitBtn.className = \"sub upd\";\n    submitBtn.type = \"submit\";\n    submitBtn.value = type === \"creation\" ? t(\"Create\") : t(\"Update\");\n\n    form.appendChild(formContent);\n    form.appendChild(submitBtn);\n\n    return form;\n  }\n\n  public reset(): void {\n    this.enabledInputGroupNames.forEach(name => {\n      if (this.inputGroupsByName[name]) {\n        this.inputGroupsByName[name].reset();\n      }\n    });\n  }\n\n  // public get isValid(): boolean {\n  //   for (let i = 0; i < this.enabledInputGroupNames.length; i++) {\n  //     const inputGroup = this.inputGroupsByName[this.enabledInputGroupNames[i]];\n  //     if (inputGroup && !inputGroup.isValid) return false;\n  //   }\n\n  //   return true;\n  // }\n\n  public onSubmit(listener: Listener<SubmitFormEvent>): Disposable {\n    return this.submitEventManager.on(listener);\n  }\n}\n","import { AnyObject, WithModuleProps } from \"../lib/types\";\nimport {\n  modulePropsDecoder,\n  parseIntOr,\n  decodeBase64,\n  stringIsEmpty\n} from \"../lib\";\nimport Item, { ItemType, ItemProps, itemBasePropsDecoder } from \"../Item\";\n\nexport type EventsHistoryProps = {\n  type: ItemType.AUTO_SLA_GRAPH;\n  maxTime: number | null;\n  html: string;\n} & ItemProps &\n  WithModuleProps;\n\n/**\n * Build a valid typed object from a raw object.\n * This will allow us to ensure the type safety.\n *\n * @param data Raw object.\n * @return An object representing the events history props.\n * @throws Will throw a TypeError if some property\n * is missing from the raw object or have an invalid type.\n */\nexport function eventsHistoryPropsDecoder(\n  data: AnyObject\n): EventsHistoryProps | never {\n  if (stringIsEmpty(data.html) && stringIsEmpty(data.encodedHtml)) {\n    throw new TypeError(\"missing html content.\");\n  }\n\n  return {\n    ...itemBasePropsDecoder(data), // Object spread. It will merge the properties of the two objects.\n    type: ItemType.AUTO_SLA_GRAPH,\n    maxTime: parseIntOr(data.maxTime, null),\n    html: !stringIsEmpty(data.html)\n      ? data.html\n      : decodeBase64(data.encodedHtml),\n    ...modulePropsDecoder(data) // Object spread. It will merge the properties of the two objects.\n  };\n}\n\nexport default class EventsHistory extends Item<EventsHistoryProps> {\n  protected createDomElement(): HTMLElement {\n    const element = document.createElement(\"div\");\n    element.className = \"events-history\";\n    element.innerHTML = this.props.html;\n\n    // Hack to execute the JS after the HTML is added to the DOM.\n    const scripts = element.getElementsByTagName(\"script\");\n    for (let i = 0; i < scripts.length; i++) {\n      if (scripts[i].src.length === 0) {\n        setTimeout(() => {\n          try {\n            eval(scripts[i].innerHTML.trim());\n          } catch (ignored) {} // eslint-disable-line no-empty\n        }, 0);\n      }\n    }\n\n    return element;\n  }\n\n  protected updateDomElement(element: HTMLElement): void {\n    element.innerHTML = this.props.html;\n\n    // Hack to execute the JS after the HTML is added to the DOM.\n    const aux = document.createElement(\"div\");\n    aux.innerHTML = this.props.html;\n    const scripts = aux.getElementsByTagName(\"script\");\n    for (let i = 0; i < scripts.length; i++) {\n      if (scripts[i].src.length === 0) {\n        eval(scripts[i].innerHTML.trim());\n      }\n    }\n  }\n}\n","import {\n  LinkedVisualConsoleProps,\n  AnyObject,\n  WithModuleProps\n} from \"../lib/types\";\nimport {\n  linkedVCPropsDecoder,\n  modulePropsDecoder,\n  decodeBase64,\n  stringIsEmpty\n} from \"../lib\";\nimport Item, { ItemType, ItemProps, itemBasePropsDecoder } from \"../Item\";\n\nexport type DonutGraphProps = {\n  type: ItemType.DONUT_GRAPH;\n  html: string;\n} & ItemProps &\n  WithModuleProps &\n  LinkedVisualConsoleProps;\n\n/**\n * Build a valid typed object from a raw object.\n * This will allow us to ensure the type safety.\n *\n * @param data Raw object.\n * @return An object representing the donut graph props.\n * @throws Will throw a TypeError if some property\n * is missing from the raw object or have an invalid type.\n */\nexport function donutGraphPropsDecoder(\n  data: AnyObject\n): DonutGraphProps | never {\n  if (stringIsEmpty(data.html) && stringIsEmpty(data.encodedHtml)) {\n    throw new TypeError(\"missing html content.\");\n  }\n\n  return {\n    ...itemBasePropsDecoder(data), // Object spread. It will merge the properties of the two objects.\n    type: ItemType.DONUT_GRAPH,\n    html: !stringIsEmpty(data.html)\n      ? data.html\n      : decodeBase64(data.encodedHtml),\n    ...modulePropsDecoder(data), // Object spread. It will merge the properties of the two objects.\n    ...linkedVCPropsDecoder(data) // Object spread. It will merge the properties of the two objects.\n  };\n}\n\nexport default class DonutGraph extends Item<DonutGraphProps> {\n  protected createDomElement(): HTMLElement {\n    const element = document.createElement(\"div\");\n    element.className = \"donut-graph\";\n    element.innerHTML = this.props.html;\n\n    // Hack to execute the JS after the HTML is added to the DOM.\n    const scripts = element.getElementsByTagName(\"script\");\n    for (let i = 0; i < scripts.length; i++) {\n      setTimeout(() => {\n        if (scripts[i].src.length === 0) eval(scripts[i].innerHTML.trim());\n      }, 0);\n    }\n\n    return element;\n  }\n\n  protected updateDomElement(element: HTMLElement): void {\n    element.innerHTML = this.props.html;\n\n    // Hack to execute the JS after the HTML is added to the DOM.\n    const aux = document.createElement(\"div\");\n    aux.innerHTML = this.props.html;\n    const scripts = aux.getElementsByTagName(\"script\");\n    for (let i = 0; i < scripts.length; i++) {\n      if (scripts[i].src.length === 0) {\n        eval(scripts[i].innerHTML.trim());\n      }\n    }\n  }\n}\n","import { AnyObject, WithModuleProps } from \"../lib/types\";\nimport { modulePropsDecoder, decodeBase64, stringIsEmpty } from \"../lib\";\nimport Item, { ItemType, ItemProps, itemBasePropsDecoder } from \"../Item\";\n\nexport type BarsGraphProps = {\n  type: ItemType.BARS_GRAPH;\n  html: string;\n} & ItemProps &\n  WithModuleProps;\n\n/**\n * Build a valid typed object from a raw object.\n * This will allow us to ensure the type safety.\n *\n * @param data Raw object.\n * @return An object representing the bars graph props.\n * @throws Will throw a TypeError if some property\n * is missing from the raw object or have an invalid type.\n */\nexport function barsGraphPropsDecoder(data: AnyObject): BarsGraphProps | never {\n  if (stringIsEmpty(data.html) && stringIsEmpty(data.encodedHtml)) {\n    throw new TypeError(\"missing html content.\");\n  }\n\n  return {\n    ...itemBasePropsDecoder(data), // Object spread. It will merge the properties of the two objects.\n    type: ItemType.BARS_GRAPH,\n    html: !stringIsEmpty(data.html)\n      ? data.html\n      : decodeBase64(data.encodedHtml),\n    ...modulePropsDecoder(data) // Object spread. It will merge the properties of the two objects.\n  };\n}\n\nexport default class BarsGraph extends Item<BarsGraphProps> {\n  protected createDomElement(): HTMLElement {\n    const element = document.createElement(\"div\");\n    element.className = \"bars-graph\";\n    element.innerHTML = this.props.html;\n\n    // Hack to execute the JS after the HTML is added to the DOM.\n    const scripts = element.getElementsByTagName(\"script\");\n    for (let i = 0; i < scripts.length; i++) {\n      setTimeout(() => {\n        if (scripts[i].src.length === 0) eval(scripts[i].innerHTML.trim());\n      }, 0);\n    }\n\n    return element;\n  }\n\n  protected updateDomElement(element: HTMLElement): void {\n    element.innerHTML = this.props.html;\n\n    // Hack to execute the JS after the HTML is added to the DOM.\n    const aux = document.createElement(\"div\");\n    aux.innerHTML = this.props.html;\n    const scripts = aux.getElementsByTagName(\"script\");\n    for (let i = 0; i < scripts.length; i++) {\n      if (scripts[i].src.length === 0) {\n        eval(scripts[i].innerHTML.trim());\n      }\n    }\n  }\n}\n","import {\n  LinkedVisualConsoleProps,\n  AnyObject,\n  WithModuleProps\n} from \"../lib/types\";\nimport {\n  linkedVCPropsDecoder,\n  modulePropsDecoder,\n  decodeBase64,\n  stringIsEmpty\n} from \"../lib\";\nimport Item, { ItemType, ItemProps, itemBasePropsDecoder } from \"../Item\";\n\nexport type ModuleGraphProps = {\n  type: ItemType.MODULE_GRAPH;\n  html: string;\n} & ItemProps &\n  WithModuleProps &\n  LinkedVisualConsoleProps;\n\n/**\n * Build a valid typed object from a raw object.\n * This will allow us to ensure the type safety.\n *\n * @param data Raw object.\n * @return An object representing the module graph props.\n * @throws Will throw a TypeError if some property\n * is missing from the raw object or have an invalid type.\n */\nexport function moduleGraphPropsDecoder(\n  data: AnyObject\n): ModuleGraphProps | never {\n  if (stringIsEmpty(data.html) && stringIsEmpty(data.encodedHtml)) {\n    throw new TypeError(\"missing html content.\");\n  }\n\n  return {\n    ...itemBasePropsDecoder(data), // Object spread. It will merge the properties of the two objects.\n    type: ItemType.MODULE_GRAPH,\n    html: !stringIsEmpty(data.html)\n      ? data.html\n      : decodeBase64(data.encodedHtml),\n    ...modulePropsDecoder(data), // Object spread. It will merge the properties of the two objects.\n    ...linkedVCPropsDecoder(data) // Object spread. It will merge the properties of the two objects.\n  };\n}\n\nexport default class ModuleGraph extends Item<ModuleGraphProps> {\n  protected createDomElement(): HTMLElement {\n    const element = document.createElement(\"div\");\n    element.className = \"module-graph\";\n    element.innerHTML = this.props.html;\n\n    // Remove the overview graph.\n    const legendP = element.getElementsByTagName(\"p\");\n    for (let i = 0; i < legendP.length; i++) {\n      legendP[i].style.margin = \"0px\";\n    }\n\n    // Remove the overview graph.\n    const overviewGraphs = element.getElementsByClassName(\"overview_graph\");\n    for (let i = 0; i < overviewGraphs.length; i++) {\n      overviewGraphs[i].remove();\n    }\n\n    // Hack to execute the JS after the HTML is added to the DOM.\n    const scripts = element.getElementsByTagName(\"script\");\n    for (let i = 0; i < scripts.length; i++) {\n      if (scripts[i].src.length === 0) {\n        setTimeout(() => {\n          try {\n            eval(scripts[i].innerHTML.trim());\n          } catch (ignored) {} // eslint-disable-line no-empty\n        }, 0);\n      }\n    }\n\n    return element;\n  }\n\n  protected updateDomElement(element: HTMLElement): void {\n    element.innerHTML = this.props.html;\n\n    // Remove the overview graph.\n    const legendP = element.getElementsByTagName(\"p\");\n    for (let i = 0; i < legendP.length; i++) {\n      legendP[i].style.margin = \"0px\";\n    }\n\n    // Remove the overview graph.\n    const overviewGraphs = element.getElementsByClassName(\"overview_graph\");\n    for (let i = 0; i < overviewGraphs.length; i++) {\n      overviewGraphs[i].remove();\n    }\n\n    // Hack to execute the JS after the HTML is added to the DOM.\n    const scripts = element.getElementsByTagName(\"script\");\n    for (let i = 0; i < scripts.length; i++) {\n      if (scripts[i].src.length === 0) {\n        eval(scripts[i].innerHTML.trim());\n      }\n    }\n  }\n}\n","import {\n  WithModuleProps,\n  LinkedVisualConsoleProps,\n  AnyObject\n} from \"../lib/types\";\n\nimport {\n  modulePropsDecoder,\n  linkedVCPropsDecoder,\n  notEmptyStringOr\n} from \"../lib\";\nimport Item, { ItemType, ItemProps, itemBasePropsDecoder } from \"../Item\";\n\nexport type StaticGraphProps = {\n  type: ItemType.STATIC_GRAPH;\n  imageSrc: string; // URL?\n  showLastValueTooltip: \"default\" | \"enabled\" | \"disabled\";\n  statusImageSrc: string | null; // URL?\n  lastValue: string | null;\n} & ItemProps &\n  (WithModuleProps | LinkedVisualConsoleProps);\n\n/**\n * Extract a valid enum value from a raw unknown value.\n * @param showLastValueTooltip Raw value.\n */\nconst parseShowLastValueTooltip = (\n  showLastValueTooltip: unknown\n): StaticGraphProps[\"showLastValueTooltip\"] => {\n  switch (showLastValueTooltip) {\n    case \"default\":\n    case \"enabled\":\n    case \"disabled\":\n      return showLastValueTooltip;\n    default:\n      return \"default\";\n  }\n};\n\n/**\n * Build a valid typed object from a raw object.\n * This will allow us to ensure the type safety.\n *\n * @param data Raw object.\n * @return An object representing the static graph props.\n * @throws Will throw a TypeError if some property\n * is missing from the raw object or have an invalid type.\n */\nexport function staticGraphPropsDecoder(\n  data: AnyObject\n): StaticGraphProps | never {\n  if (typeof data.imageSrc !== \"string\" || data.imageSrc.length === 0) {\n    throw new TypeError(\"invalid image src.\");\n  }\n\n  return {\n    ...itemBasePropsDecoder(data), // Object spread. It will merge the properties of the two objects.\n    type: ItemType.STATIC_GRAPH,\n    imageSrc: data.imageSrc,\n    showLastValueTooltip: parseShowLastValueTooltip(data.showLastValueTooltip),\n    statusImageSrc: notEmptyStringOr(data.statusImageSrc, null),\n    lastValue: notEmptyStringOr(data.lastValue, null),\n    ...modulePropsDecoder(data), // Object spread. It will merge the properties of the two objects.\n    ...linkedVCPropsDecoder(data) // Object spread. It will merge the properties of the two objects.\n  };\n}\n\nexport default class StaticGraph extends Item<StaticGraphProps> {\n  protected createDomElement(): HTMLElement {\n    const imgSrc = this.props.statusImageSrc || this.props.imageSrc;\n    const element = document.createElement(\"div\");\n    element.className = \"static-graph\";\n    element.style.background = `url(${imgSrc}) no-repeat`;\n    element.style.backgroundSize = \"contain\";\n    element.style.backgroundPosition = \"center\";\n\n    // Show last value in a tooltip.\n    if (\n      this.props.lastValue !== null &&\n      this.props.showLastValueTooltip !== \"disabled\"\n    ) {\n      element.className = \"static-graph image forced_title\";\n      element.setAttribute(\"data-use_title_for_force_title\", \"1\");\n      element.setAttribute(\"data-title\", this.props.lastValue);\n    }\n\n    return element;\n  }\n}\n","import { LinkedVisualConsoleProps, AnyObject } from \"../lib/types\";\nimport { linkedVCPropsDecoder } from \"../lib\";\nimport Item, { ItemType, ItemProps, itemBasePropsDecoder } from \"../Item\";\n\nexport type IconProps = {\n  type: ItemType.ICON;\n  imageSrc: string; // URL?\n} & ItemProps &\n  LinkedVisualConsoleProps;\n\n/**\n * Build a valid typed object from a raw object.\n * This will allow us to ensure the type safety.\n *\n * @param data Raw object.\n * @return An object representing the icon props.\n * @throws Will throw a TypeError if some property\n * is missing from the raw object or have an invalid type.\n */\nexport function iconPropsDecoder(data: AnyObject): IconProps | never {\n  if (typeof data.imageSrc !== \"string\" || data.imageSrc.length === 0) {\n    throw new TypeError(\"invalid image src.\");\n  }\n\n  return {\n    ...itemBasePropsDecoder(data), // Object spread. It will merge the properties of the two objects.\n    type: ItemType.ICON,\n    imageSrc: data.imageSrc,\n    ...linkedVCPropsDecoder(data) // Object spread. It will merge the properties of the two objects.\n  };\n}\n\nexport default class Icon extends Item<IconProps> {\n  protected createDomElement(): HTMLElement {\n    const element = document.createElement(\"div\");\n    element.className = \"icon\";\n    element.style.background = `url(${this.props.imageSrc}) no-repeat`;\n    element.style.backgroundSize = \"contain\";\n    element.style.backgroundPosition = \"center\";\n\n    return element;\n  }\n}\n","import {\n  WithModuleProps,\n  LinkedVisualConsoleProps,\n  AnyObject\n} from \"../lib/types\";\nimport { modulePropsDecoder, linkedVCPropsDecoder } from \"../lib\";\nimport Item, { itemBasePropsDecoder, ItemType, ItemProps } from \"../Item\";\n\nexport type ColorCloudProps = {\n  type: ItemType.COLOR_CLOUD;\n  color: string;\n  // TODO: Add the rest of the color cloud values?\n} & ItemProps &\n  WithModuleProps &\n  LinkedVisualConsoleProps;\n\n/**\n * Build a valid typed object from a raw object.\n * This will allow us to ensure the type safety.\n *\n * @param data Raw object.\n * @return An object representing the static graph props.\n * @throws Will throw a TypeError if some property\n * is missing from the raw object or have an invalid type.\n */\nexport function colorCloudPropsDecoder(\n  data: AnyObject\n): ColorCloudProps | never {\n  // TODO: Validate the color.\n  if (typeof data.color !== \"string\" || data.color.length === 0) {\n    throw new TypeError(\"invalid color.\");\n  }\n\n  return {\n    ...itemBasePropsDecoder(data), // Object spread. It will merge the properties of the two objects.\n    type: ItemType.COLOR_CLOUD,\n    color: data.color,\n    ...modulePropsDecoder(data), // Object spread. It will merge the properties of the two objects.\n    ...linkedVCPropsDecoder(data) // Object spread. It will merge the properties of the two objects.\n  };\n}\n\nconst svgNS = \"http://www.w3.org/2000/svg\";\n\nexport default class ColorCloud extends Item<ColorCloudProps> {\n  protected createDomElement(): HTMLElement {\n    const container: HTMLDivElement = document.createElement(\"div\");\n    container.className = \"color-cloud\";\n\n    // Add the SVG.\n    container.append(this.createSvgElement());\n\n    return container;\n  }\n\n  protected resizeElement(width: number): void {\n    super.resizeElement(width, width);\n  }\n\n  public createSvgElement(): SVGSVGElement {\n    const gradientId = `grad_${this.props.id}`;\n    // SVG container.\n    const svg = document.createElementNS(svgNS, \"svg\");\n    // Auto resize SVG using the view box magic: https://css-tricks.com/scale-svg/\n    svg.setAttribute(\"viewBox\", \"0 0 100 100\");\n\n    // Defs.\n    const defs = document.createElementNS(svgNS, \"defs\");\n    // Radial gradient.\n    const radialGradient = document.createElementNS(svgNS, \"radialGradient\");\n    radialGradient.setAttribute(\"id\", gradientId);\n    radialGradient.setAttribute(\"cx\", \"50%\");\n    radialGradient.setAttribute(\"cy\", \"50%\");\n    radialGradient.setAttribute(\"r\", \"50%\");\n    radialGradient.setAttribute(\"fx\", \"50%\");\n    radialGradient.setAttribute(\"fy\", \"50%\");\n    // Stops.\n    const stop0 = document.createElementNS(svgNS, \"stop\");\n    stop0.setAttribute(\"offset\", \"0%\");\n    stop0.setAttribute(\n      \"style\",\n      `stop-color:${this.props.color};stop-opacity:0.9`\n    );\n    const stop100 = document.createElementNS(svgNS, \"stop\");\n    stop100.setAttribute(\"offset\", \"100%\");\n    stop100.setAttribute(\n      \"style\",\n      `stop-color:${this.props.color};stop-opacity:0`\n    );\n    // Circle.\n    const circle = document.createElementNS(svgNS, \"circle\");\n    circle.setAttribute(\"fill\", `url(#${gradientId})`);\n    circle.setAttribute(\"cx\", \"50%\");\n    circle.setAttribute(\"cy\", \"50%\");\n    circle.setAttribute(\"r\", \"50%\");\n\n    // Append elements.\n    radialGradient.append(stop0, stop100);\n    defs.append(radialGradient);\n    svg.append(defs, circle);\n\n    return svg;\n  }\n}\n","import { LinkedVisualConsoleProps, AnyObject } from \"../lib/types\";\nimport {\n  linkedVCPropsDecoder,\n  parseIntOr,\n  notEmptyStringOr,\n  stringIsEmpty,\n  decodeBase64,\n  parseBoolean\n} from \"../lib\";\nimport Item, { ItemProps, itemBasePropsDecoder, ItemType } from \"../Item\";\n\nexport type GroupProps = {\n  type: ItemType.GROUP_ITEM;\n  groupId: number;\n  imageSrc: string | null; // URL?\n  statusImageSrc: string | null;\n  showStatistics: boolean;\n  html?: string | null;\n} & ItemProps &\n  LinkedVisualConsoleProps;\n\nfunction extractHtml(data: AnyObject): string | null {\n  if (!stringIsEmpty(data.html)) return data.html;\n  if (!stringIsEmpty(data.encodedHtml)) return decodeBase64(data.encodedHtml);\n  return null;\n}\n\n/**\n * Build a valid typed object from a raw object.\n * This will allow us to ensure the type safety.\n *\n * @param data Raw object.\n * @return An object representing the group props.\n * @throws Will throw a TypeError if some property\n * is missing from the raw object or have an invalid type.\n */\nexport function groupPropsDecoder(data: AnyObject): GroupProps | never {\n  if (\n    (typeof data.imageSrc !== \"string\" || data.imageSrc.length === 0) &&\n    data.encodedHtml === null\n  ) {\n    throw new TypeError(\"invalid image src.\");\n  }\n  if (parseIntOr(data.groupId, null) === null) {\n    throw new TypeError(\"invalid group Id.\");\n  }\n\n  const showStatistics = parseBoolean(data.showStatistics);\n  const html = showStatistics ? extractHtml(data) : null;\n\n  return {\n    ...itemBasePropsDecoder(data), // Object spread. It will merge the properties of the two objects.\n    type: ItemType.GROUP_ITEM,\n    groupId: parseInt(data.groupId),\n    imageSrc: notEmptyStringOr(data.imageSrc, null),\n    statusImageSrc: notEmptyStringOr(data.statusImageSrc, null),\n    showStatistics,\n    html,\n    ...linkedVCPropsDecoder(data) // Object spread. It will merge the properties of the two objects.\n  };\n}\n\nexport default class Group extends Item<GroupProps> {\n  protected createDomElement(): HTMLElement {\n    const element = document.createElement(\"div\");\n    element.className = \"group\";\n\n    if (!this.props.showStatistics && this.props.statusImageSrc !== null) {\n      // Icon with status.\n      element.style.background = `url(${this.props.statusImageSrc}) no-repeat`;\n      element.style.backgroundSize = \"contain\";\n      element.style.backgroundPosition = \"center\";\n    } else if (this.props.showStatistics && this.props.html != null) {\n      // Stats table.\n      element.innerHTML = this.props.html;\n    }\n\n    return element;\n  }\n}\n","import \"./styles.css\";\n\nimport {\n  LinkedVisualConsoleProps,\n  AnyObject,\n  Size,\n  ItemMeta\n} from \"../../lib/types\";\nimport {\n  linkedVCPropsDecoder,\n  parseIntOr,\n  parseBoolean,\n  prefixedCssRules,\n  notEmptyStringOr,\n  humanDate,\n  humanTime\n} from \"../../lib\";\nimport Item, { ItemProps, itemBasePropsDecoder, ItemType } from \"../../Item\";\n\nexport type ClockProps = {\n  type: ItemType.CLOCK;\n  clockType: \"analogic\" | \"digital\";\n  clockFormat: \"datetime\" | \"time\";\n  clockTimezone: string;\n  clockTimezoneOffset: number; // Offset of the timezone to UTC in seconds.\n  showClockTimezone: boolean;\n  color?: string | null;\n} & ItemProps &\n  LinkedVisualConsoleProps;\n\n/**\n * Extract a valid enum value from a raw unknown value.\n * @param clockType Raw value.\n */\nconst parseClockType = (clockType: unknown): ClockProps[\"clockType\"] => {\n  switch (clockType) {\n    case \"analogic\":\n    case \"digital\":\n      return clockType;\n    default:\n      return \"analogic\";\n  }\n};\n\n/**\n * Extract a valid enum value from a raw unknown value.\n * @param clockFormat Raw value.\n */\nconst parseClockFormat = (clockFormat: unknown): ClockProps[\"clockFormat\"] => {\n  switch (clockFormat) {\n    case \"datetime\":\n    case \"time\":\n      return clockFormat;\n    default:\n      return \"datetime\";\n  }\n};\n\n/**\n * Build a valid typed object from a raw object.\n * This will allow us to ensure the type safety.\n *\n * @param data Raw object.\n * @return An object representing the clock props.\n * @throws Will throw a TypeError if some property\n * is missing from the raw object or have an invalid type.\n */\nexport function clockPropsDecoder(data: AnyObject): ClockProps | never {\n  if (\n    typeof data.clockTimezone !== \"string\" ||\n    data.clockTimezone.length === 0\n  ) {\n    throw new TypeError(\"invalid timezone.\");\n  }\n\n  return {\n    ...itemBasePropsDecoder(data), // Object spread. It will merge the properties of the two objects.\n    type: ItemType.CLOCK,\n    clockType: parseClockType(data.clockType),\n    clockFormat: parseClockFormat(data.clockFormat),\n    clockTimezone: data.clockTimezone,\n    clockTimezoneOffset: parseIntOr(data.clockTimezoneOffset, 0),\n    showClockTimezone: parseBoolean(data.showClockTimezone),\n    color: notEmptyStringOr(data.color, null),\n    ...linkedVCPropsDecoder(data) // Object spread. It will merge the properties of the two objects.\n  };\n}\n\nexport default class Clock extends Item<ClockProps> {\n  public static readonly TICK_INTERVAL = 1000; // In ms.\n  private intervalRef: number | null = null;\n\n  public constructor(props: ClockProps, meta: ItemMeta) {\n    // Call the superclass constructor.\n    super(props, meta);\n\n    /* The item is already loaded and inserted into the DOM.\n     * The class properties are now initialized.\n     * Now you can modify the item, add event handlers, timers, etc.\n     */\n\n    /* The use of the arrow function is important here. startTick will\n     * use the function passed as an argument to call the global setInterval\n     * function. The interval, timeout or event functions, among other, are\n     * called into another execution loop and using a different context.\n     * The arrow functions, unlike the classic functions, doesn't create\n     * their own context (this), so their context at execution time will be\n     * use the current context at the declaration time.\n     * http://es6-features.org/#Lexicalthis\n     */\n    this.startTick(\n      () => {\n        // Replace the old element with the updated date.\n        this.childElementRef.innerHTML = this.createClock().innerHTML;\n      },\n      /* The analogic clock doesn't need to tick,\n       * but it will be refreshed every 20 seconds\n       * to avoid a desync caused by page freezes.\n       */\n      this.props.clockType === \"analogic\" ? 20000 : Clock.TICK_INTERVAL\n    );\n  }\n\n  /**\n   * Wrap a window.clearInterval call.\n   */\n  private stopTick(): void {\n    if (this.intervalRef !== null) {\n      window.clearInterval(this.intervalRef);\n      this.intervalRef = null;\n    }\n  }\n\n  /**\n   * Wrap a window.setInterval call.\n   * @param handler Function to be called every time the interval\n   * timer is reached.\n   * @param interval Number in milliseconds for the interval timer.\n   */\n  private startTick(\n    handler: TimerHandler,\n    interval: number = Clock.TICK_INTERVAL\n  ): void {\n    this.stopTick();\n    this.intervalRef = window.setInterval(handler, interval);\n  }\n\n  /**\n   * Create a element which contains the DOM representation of the item.\n   * @return DOM Element.\n   * @override\n   */\n  protected createDomElement(): HTMLElement | never {\n    return this.createClock();\n  }\n\n  /**\n   * To remove the event listeners and the elements from the DOM.\n   * @override\n   */\n  public remove(): void {\n    // Clear the interval.\n    this.stopTick();\n    // Call to the parent clean function.\n    super.remove();\n  }\n\n  /**\n   * @override Item.resizeElement\n   * Resize the DOM content container.\n   * @param width\n   * @param height\n   */\n  protected resizeElement(width: number, height: number): void {\n    const { width: newWidth, height: newHeight } = this.getElementSize(\n      width,\n      height\n    ); // Destructuring assigment: http://es6-features.org/#ObjectMatchingShorthandNotation\n    super.resizeElement(newWidth, newHeight);\n    // Re-render the item to force it calculate a new font size.\n    if (this.props.clockType === \"digital\") {\n      // Replace the old element with the updated date.\n      this.childElementRef.innerHTML = this.createClock().innerHTML;\n    }\n  }\n\n  /**\n   * Create a element which contains a representation of a clock.\n   * It choose between the clock types.\n   * @return DOM Element.\n   * @throws Error.\n   */\n  private createClock(): HTMLElement | never {\n    switch (this.props.clockType) {\n      case \"analogic\":\n        return this.createAnalogicClock();\n      case \"digital\":\n        return this.createDigitalClock();\n      default:\n        throw new Error(\"invalid clock type.\");\n    }\n  }\n\n  /**\n   * Create a element which contains a representation of an analogic clock.\n   * @return DOM Element.\n   */\n  private createAnalogicClock(): HTMLElement {\n    const svgNS = \"http://www.w3.org/2000/svg\";\n    const colors = {\n      watchFace: \"#FFFFF0\",\n      watchFaceBorder: \"#242124\",\n      mark: \"#242124\",\n      handDark: \"#242124\",\n      handLight: \"#525252\",\n      secondHand: \"#DC143C\"\n    };\n\n    const { width, height } = this.getElementSize(); // Destructuring assigment: http://es6-features.org/#ObjectMatchingShorthandNotation\n\n    // Calculate font size to adapt the font to the item size.\n    const baseTimeFontSize = 20; // Per 100px of width.\n    const dateFontSizeMultiplier = 0.5;\n    const dateFontSize =\n      (baseTimeFontSize * dateFontSizeMultiplier * width) / 100;\n\n    const div = document.createElement(\"div\");\n    div.className = \"analogic-clock\";\n    div.style.width = `${width}px`;\n    div.style.height = `${height}px`;\n\n    // SVG container.\n    const svg = document.createElementNS(svgNS, \"svg\");\n    // Auto resize SVG using the view box magic: https://css-tricks.com/scale-svg/\n    svg.setAttribute(\"viewBox\", \"0 0 100 100\");\n\n    // Clock face.\n    const clockFace = document.createElementNS(svgNS, \"g\");\n    clockFace.setAttribute(\"class\", \"clockface\");\n    const clockFaceBackground = document.createElementNS(svgNS, \"circle\");\n    clockFaceBackground.setAttribute(\"cx\", \"50\");\n    clockFaceBackground.setAttribute(\"cy\", \"50\");\n    clockFaceBackground.setAttribute(\"r\", \"48\");\n    clockFaceBackground.setAttribute(\"fill\", colors.watchFace);\n    clockFaceBackground.setAttribute(\"stroke\", colors.watchFaceBorder);\n    clockFaceBackground.setAttribute(\"stroke-width\", \"2\");\n    clockFaceBackground.setAttribute(\"stroke-linecap\", \"round\");\n    // Insert the clockface background into the clockface group.\n    clockFace.append(clockFaceBackground);\n\n    // Timezone complication.\n    const city = this.getHumanTimezone();\n    if (city.length > 0) {\n      const timezoneComplication = document.createElementNS(svgNS, \"text\");\n      timezoneComplication.setAttribute(\"text-anchor\", \"middle\");\n      timezoneComplication.setAttribute(\"font-size\", \"8\");\n      timezoneComplication.setAttribute(\n        \"transform\",\n        \"translate(30 50) rotate(90)\" // Rotate to counter the clock rotation.\n      );\n      timezoneComplication.setAttribute(\"fill\", colors.mark);\n      timezoneComplication.textContent = city;\n      clockFace.append(timezoneComplication);\n    }\n\n    // Marks group.\n    const marksGroup = document.createElementNS(svgNS, \"g\");\n    marksGroup.setAttribute(\"class\", \"marks\");\n    // Build the 12 hours mark.\n    const mainMarkGroup = document.createElementNS(svgNS, \"g\");\n    mainMarkGroup.setAttribute(\"class\", \"mark\");\n    mainMarkGroup.setAttribute(\"transform\", \"translate(50 50)\");\n    const mark1a = document.createElementNS(svgNS, \"line\");\n    mark1a.setAttribute(\"x1\", \"36\");\n    mark1a.setAttribute(\"y1\", \"0\");\n    mark1a.setAttribute(\"x2\", \"46\");\n    mark1a.setAttribute(\"y2\", \"0\");\n    mark1a.setAttribute(\"stroke\", colors.mark);\n    mark1a.setAttribute(\"stroke-width\", \"5\");\n    const mark1b = document.createElementNS(svgNS, \"line\");\n    mark1b.setAttribute(\"x1\", \"36\");\n    mark1b.setAttribute(\"y1\", \"0\");\n    mark1b.setAttribute(\"x2\", \"46\");\n    mark1b.setAttribute(\"y2\", \"0\");\n    mark1b.setAttribute(\"stroke\", colors.watchFace);\n    mark1b.setAttribute(\"stroke-width\", \"1\");\n    // Insert the 12 mark lines into their group.\n    mainMarkGroup.append(mark1a, mark1b);\n    // Insert the main mark into the marks group.\n    marksGroup.append(mainMarkGroup);\n    // Build the rest of the marks.\n    for (let i = 1; i < 60; i++) {\n      const mark = document.createElementNS(svgNS, \"line\");\n      mark.setAttribute(\"y1\", \"0\");\n      mark.setAttribute(\"y2\", \"0\");\n      mark.setAttribute(\"stroke\", colors.mark);\n      mark.setAttribute(\"transform\", `translate(50 50) rotate(${i * 6})`);\n\n      if (i % 5 === 0) {\n        mark.setAttribute(\"x1\", \"38\");\n        mark.setAttribute(\"x2\", \"46\");\n        mark.setAttribute(\"stroke-width\", i % 15 === 0 ? \"2\" : \"1\");\n      } else {\n        mark.setAttribute(\"x1\", \"42\");\n        mark.setAttribute(\"x2\", \"46\");\n        mark.setAttribute(\"stroke-width\", \"0.5\");\n      }\n\n      // Insert the mark into the marks group.\n      marksGroup.append(mark);\n    }\n\n    /* Clock hands */\n\n    // Hour hand.\n    const hourHand = document.createElementNS(svgNS, \"g\");\n    hourHand.setAttribute(\"class\", \"hour-hand\");\n    hourHand.setAttribute(\"transform\", \"translate(50 50)\");\n    // This will go back and will act like a border.\n    const hourHandA = document.createElementNS(svgNS, \"line\");\n    hourHandA.setAttribute(\"class\", \"hour-hand-a\");\n    hourHandA.setAttribute(\"x1\", \"0\");\n    hourHandA.setAttribute(\"y1\", \"0\");\n    hourHandA.setAttribute(\"x2\", \"30\");\n    hourHandA.setAttribute(\"y2\", \"0\");\n    hourHandA.setAttribute(\"stroke\", colors.handLight);\n    hourHandA.setAttribute(\"stroke-width\", \"4\");\n    hourHandA.setAttribute(\"stroke-linecap\", \"round\");\n    // This will go in front of the previous line.\n    const hourHandB = document.createElementNS(svgNS, \"line\");\n    hourHandB.setAttribute(\"class\", \"hour-hand-b\");\n    hourHandB.setAttribute(\"x1\", \"0\");\n    hourHandB.setAttribute(\"y1\", \"0\");\n    hourHandB.setAttribute(\"x2\", \"29.9\");\n    hourHandB.setAttribute(\"y2\", \"0\");\n    hourHandB.setAttribute(\"stroke\", colors.handDark);\n    hourHandB.setAttribute(\"stroke-width\", \"3.1\");\n    hourHandB.setAttribute(\"stroke-linecap\", \"round\");\n    // Append the elements to finish the hour hand.\n    hourHand.append(hourHandA, hourHandB);\n\n    // Minute hand.\n    const minuteHand = document.createElementNS(svgNS, \"g\");\n    minuteHand.setAttribute(\"class\", \"minute-hand\");\n    minuteHand.setAttribute(\"transform\", \"translate(50 50)\");\n    // This will go back and will act like a border.\n    const minuteHandA = document.createElementNS(svgNS, \"line\");\n    minuteHandA.setAttribute(\"class\", \"minute-hand-a\");\n    minuteHandA.setAttribute(\"x1\", \"0\");\n    minuteHandA.setAttribute(\"y1\", \"0\");\n    minuteHandA.setAttribute(\"x2\", \"40\");\n    minuteHandA.setAttribute(\"y2\", \"0\");\n    minuteHandA.setAttribute(\"stroke\", colors.handLight);\n    minuteHandA.setAttribute(\"stroke-width\", \"2\");\n    minuteHandA.setAttribute(\"stroke-linecap\", \"round\");\n    // This will go in front of the previous line.\n    const minuteHandB = document.createElementNS(svgNS, \"line\");\n    minuteHandB.setAttribute(\"class\", \"minute-hand-b\");\n    minuteHandB.setAttribute(\"x1\", \"0\");\n    minuteHandB.setAttribute(\"y1\", \"0\");\n    minuteHandB.setAttribute(\"x2\", \"39.9\");\n    minuteHandB.setAttribute(\"y2\", \"0\");\n    minuteHandB.setAttribute(\"stroke\", colors.handDark);\n    minuteHandB.setAttribute(\"stroke-width\", \"1.5\");\n    minuteHandB.setAttribute(\"stroke-linecap\", \"round\");\n    const minuteHandPin = document.createElementNS(svgNS, \"circle\");\n    minuteHandPin.setAttribute(\"r\", \"3\");\n    minuteHandPin.setAttribute(\"fill\", colors.handDark);\n    // Append the elements to finish the minute hand.\n    minuteHand.append(minuteHandA, minuteHandB, minuteHandPin);\n\n    // Second hand.\n    const secondHand = document.createElementNS(svgNS, \"g\");\n    secondHand.setAttribute(\"class\", \"second-hand\");\n    secondHand.setAttribute(\"transform\", \"translate(50 50)\");\n    const secondHandBar = document.createElementNS(svgNS, \"line\");\n    secondHandBar.setAttribute(\"x1\", \"0\");\n    secondHandBar.setAttribute(\"y1\", \"0\");\n    secondHandBar.setAttribute(\"x2\", \"46\");\n    secondHandBar.setAttribute(\"y2\", \"0\");\n    secondHandBar.setAttribute(\"stroke\", colors.secondHand);\n    secondHandBar.setAttribute(\"stroke-width\", \"1\");\n    secondHandBar.setAttribute(\"stroke-linecap\", \"round\");\n    const secondHandPin = document.createElementNS(svgNS, \"circle\");\n    secondHandPin.setAttribute(\"r\", \"2\");\n    secondHandPin.setAttribute(\"fill\", colors.secondHand);\n    // Append the elements to finish the second hand.\n    secondHand.append(secondHandBar, secondHandPin);\n\n    // Pin.\n    const pin = document.createElementNS(svgNS, \"circle\");\n    pin.setAttribute(\"cx\", \"50\");\n    pin.setAttribute(\"cy\", \"50\");\n    pin.setAttribute(\"r\", \"0.3\");\n    pin.setAttribute(\"fill\", colors.handDark);\n\n    // Get the hand angles.\n    const date = this.getOriginDate();\n    const seconds = date.getSeconds();\n    const minutes = date.getMinutes();\n    const hours = date.getHours();\n    const secAngle = (360 / 60) * seconds;\n    const minuteAngle = (360 / 60) * minutes + (360 / 60) * (seconds / 60);\n    const hourAngle = (360 / 12) * hours + (360 / 12) * (minutes / 60);\n    // Set the clock time by moving the hands.\n    hourHand.setAttribute(\"transform\", `translate(50 50) rotate(${hourAngle})`);\n    minuteHand.setAttribute(\n      \"transform\",\n      `translate(50 50) rotate(${minuteAngle})`\n    );\n    secondHand.setAttribute(\n      \"transform\",\n      `translate(50 50) rotate(${secAngle})`\n    );\n\n    // Build the clock\n    svg.append(clockFace, marksGroup, hourHand, minuteHand, secondHand, pin);\n    // Rotate the clock to its normal position.\n    svg.setAttribute(\"transform\", \"rotate(-90)\");\n\n    /* Add the animation declaration to the container.\n     * Since the animation keyframes need to know the\n     * start angle, this angle is dynamic (current time),\n     * and we can't edit keyframes through javascript\n     * safely and with backwards compatibility, we need\n     * to inject it.\n     */\n    div.innerHTML = `\n      <style>\n        @keyframes rotate-hour {\n          from {\n            ${prefixedCssRules(\n              \"transform\",\n              `translate(50px, 50px) rotate(${hourAngle}deg)`\n            ).join(\"\\n\")}\n          }\n          to {\n            ${prefixedCssRules(\n              \"transform\",\n              `translate(50px, 50px) rotate(${hourAngle + 360}deg)`\n            ).join(\"\\n\")}\n          }\n        }\n        @keyframes rotate-minute {\n          from {\n            ${prefixedCssRules(\n              \"transform\",\n              `translate(50px, 50px) rotate(${minuteAngle}deg)`\n            ).join(\"\\n\")}\n          }\n          to {\n            ${prefixedCssRules(\n              \"transform\",\n              `translate(50px, 50px) rotate(${minuteAngle + 360}deg)`\n            ).join(\"\\n\")}\n          }\n        }\n        @keyframes rotate-second {\n          from {\n            ${prefixedCssRules(\n              \"transform\",\n              `translate(50px, 50px) rotate(${secAngle}deg)`\n            ).join(\"\\n\")}\n          }\n          to {\n            ${prefixedCssRules(\n              \"transform\",\n              `translate(50px, 50px) rotate(${secAngle + 360}deg)`\n            ).join(\"\\n\")}\n          }\n        }\n      </style>\n    `;\n    // Add the clock to the container\n    div.append(svg);\n\n    // Date.\n    if (this.props.clockFormat === \"datetime\") {\n      const dateElem: HTMLSpanElement = document.createElement(\"span\");\n      dateElem.className = \"date\";\n      dateElem.textContent = humanDate(date, \"default\");\n      dateElem.style.fontSize = `${dateFontSize}px`;\n      if (this.props.color) dateElem.style.color = this.props.color;\n      div.append(dateElem);\n    }\n\n    return div;\n  }\n\n  /**\n   * Create a element which contains a representation of a digital clock.\n   * @return DOM Element.\n   */\n  private createDigitalClock(): HTMLElement {\n    const element: HTMLDivElement = document.createElement(\"div\");\n    element.className = \"digital-clock\";\n\n    const { width } = this.getElementSize(); // Destructuring assigment: http://es6-features.org/#ObjectMatchingShorthandNotation\n\n    // Calculate font size to adapt the font to the item size.\n    const baseTimeFontSize = 20; // Per 100px of width.\n    const dateFontSizeMultiplier = 0.5;\n    const tzFontSizeMultiplier = 6 / this.props.clockTimezone.length;\n    const timeFontSize = (baseTimeFontSize * width) / 100;\n    const dateFontSize =\n      (baseTimeFontSize * dateFontSizeMultiplier * width) / 100;\n    const tzFontSize = Math.min(\n      (baseTimeFontSize * tzFontSizeMultiplier * width) / 100,\n      (width / 100) * 10\n    );\n\n    // Date calculated using the original timezone.\n    const date = this.getOriginDate();\n\n    // Date.\n    if (this.props.clockFormat === \"datetime\") {\n      const dateElem: HTMLSpanElement = document.createElement(\"span\");\n      dateElem.className = \"date\";\n      dateElem.textContent = humanDate(date, \"default\");\n      dateElem.style.fontSize = `${dateFontSize}px`;\n      if (this.props.color) dateElem.style.color = this.props.color;\n      element.append(dateElem);\n    }\n\n    // Time.\n    const timeElem: HTMLSpanElement = document.createElement(\"span\");\n    timeElem.className = \"time\";\n    timeElem.textContent = humanTime(date);\n    timeElem.style.fontSize = `${timeFontSize}px`;\n    if (this.props.color) timeElem.style.color = this.props.color;\n    element.append(timeElem);\n\n    // City name.\n    const city = this.getHumanTimezone();\n    if (city.length > 0) {\n      const tzElem: HTMLSpanElement = document.createElement(\"span\");\n      tzElem.className = \"timezone\";\n      tzElem.textContent = city;\n      tzElem.style.fontSize = `${tzFontSize}px`;\n      if (this.props.color) tzElem.style.color = this.props.color;\n      element.append(tzElem);\n    }\n\n    return element;\n  }\n\n  /**\n   * Generate the current date using the timezone offset stored into the properties.\n   * @return The current date.\n   */\n  private getOriginDate(initialDate: Date | null = null): Date {\n    const d = initialDate ? initialDate : new Date();\n    const targetTZOffset = this.props.clockTimezoneOffset * 1000; // In ms.\n    const localTZOffset = d.getTimezoneOffset() * 60 * 1000; // In ms.\n    const utimestamp = d.getTime() + targetTZOffset + localTZOffset;\n\n    return new Date(utimestamp);\n  }\n\n  /**\n   * Extract a human readable city name from the timezone text.\n   * @param timezone Timezone text.\n   */\n  public getHumanTimezone(timezone: string = this.props.clockTimezone): string {\n    const [, city = \"\"] = timezone.split(\"/\");\n    return city.replace(\"_\", \" \");\n  }\n\n  /**\n   * Generate a element size using the current size and the default values.\n   * @return The size.\n   */\n  private getElementSize(\n    width: number = this.props.width,\n    height: number = this.props.height\n  ): Size {\n    switch (this.props.clockType) {\n      case \"analogic\": {\n        let diameter = 100; // Default value.\n\n        if (width > 0 && height > 0) {\n          diameter = Math.min(width, height);\n        } else if (width > 0) {\n          diameter = width;\n        } else if (height > 0) {\n          diameter = height;\n        }\n\n        return {\n          width: diameter,\n          height: diameter\n        };\n      }\n      case \"digital\": {\n        if (width > 0 && height > 0) {\n          // The proportion of the clock should be (width = height / 2) aproximately.\n          height = width / 2 < height ? width / 2 : height;\n        } else if (width > 0) {\n          height = width / 2;\n        } else if (height > 0) {\n          // The proportion of the clock should be (height * 2 = width) aproximately.\n          width = height * 2;\n        } else {\n          width = 100; // Default value.\n          height = 50; // Default value.\n        }\n\n        return {\n          width,\n          height\n        };\n      }\n      default:\n        throw new Error(\"invalid clock type.\");\n    }\n  }\n}\n","import { AnyObject } from \"../lib/types\";\nimport { parseIntOr, notEmptyStringOr } from \"../lib\";\nimport Item, { ItemType, ItemProps, itemBasePropsDecoder } from \"../Item\";\n\ninterface BoxProps extends ItemProps {\n  // Overrided properties.\n  readonly type: ItemType.BOX_ITEM;\n  label: null;\n  isLinkEnabled: false;\n  parentId: null;\n  aclGroupId: null;\n  // Custom properties.\n  borderWidth: number;\n  borderColor: string | null;\n  fillColor: string | null;\n}\n\n/**\n * Build a valid typed object from a raw object.\n * This will allow us to ensure the type safety.\n *\n * @param data Raw object.\n * @return An object representing the item props.\n * @throws Will throw a TypeError if some property\n * is missing from the raw object or have an invalid type.\n */\nexport function boxPropsDecoder(data: AnyObject): BoxProps | never {\n  return {\n    ...itemBasePropsDecoder(data), // Object spread. It will merge the properties of the two objects.\n    type: ItemType.BOX_ITEM,\n    label: null,\n    isLinkEnabled: false,\n    parentId: null,\n    aclGroupId: null,\n    // Custom properties.\n    borderWidth: parseIntOr(data.borderWidth, 0),\n    borderColor: notEmptyStringOr(data.borderColor, null),\n    fillColor: notEmptyStringOr(data.fillColor, null)\n  };\n}\n\nexport default class Box extends Item<BoxProps> {\n  protected createDomElement(): HTMLElement {\n    const box: HTMLDivElement = document.createElement(\"div\");\n    box.className = \"box\";\n    // To prevent this item to expand beyond its parent.\n    box.style.boxSizing = \"border-box\";\n\n    if (this.props.fillColor) {\n      box.style.backgroundColor = this.props.fillColor;\n    }\n\n    // Border.\n    if (this.props.borderWidth > 0) {\n      box.style.borderStyle = \"solid\";\n      // Control the max width to prevent this item to expand beyond its parent.\n      const maxBorderWidth = Math.min(this.props.width, this.props.height) / 2;\n      const borderWidth = Math.min(this.props.borderWidth, maxBorderWidth);\n      box.style.borderWidth = `${borderWidth}px`;\n\n      if (this.props.borderColor) {\n        box.style.borderColor = this.props.borderColor;\n      }\n    }\n\n    return box;\n  }\n}\n","import { AnyObject, Position, Size, ItemMeta } from \"../lib/types\";\nimport {\n  parseIntOr,\n  notEmptyStringOr,\n  debounce,\n  addMovementListener\n} from \"../lib\";\nimport Item, { ItemType, ItemProps, itemBasePropsDecoder } from \"../Item\";\n\ninterface LineProps extends ItemProps {\n  // Overrided properties.\n  readonly type: ItemType.LINE_ITEM;\n  label: null;\n  isLinkEnabled: false;\n  parentId: null;\n  aclGroupId: null;\n  // Custom properties.\n  startPosition: Position;\n  endPosition: Position;\n  lineWidth: number;\n  color: string | null;\n}\n\n/**\n * Build a valid typed object from a raw object.\n * This will allow us to ensure the type safety.\n *\n * @param data Raw object.\n * @return An object representing the item props.\n * @throws Will throw a TypeError if some property\n * is missing from the raw object or have an invalid type.\n */\nexport function linePropsDecoder(data: AnyObject): LineProps | never {\n  const props: LineProps = {\n    ...itemBasePropsDecoder({ ...data, width: 1, height: 1 }), // Object spread. It will merge the properties of the two objects.\n    type: ItemType.LINE_ITEM,\n    label: null,\n    isLinkEnabled: false,\n    parentId: null,\n    aclGroupId: null,\n    // Initialize Position & Size.\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0,\n    // Custom properties.\n    startPosition: {\n      x: parseIntOr(data.startX, 0),\n      y: parseIntOr(data.startY, 0)\n    },\n    endPosition: {\n      x: parseIntOr(data.endX, 0),\n      y: parseIntOr(data.endY, 0)\n    },\n    lineWidth: parseIntOr(data.lineWidth || data.borderWidth, 1),\n    color: notEmptyStringOr(data.borderColor || data.color, null)\n  };\n\n  /*\n   * We need to enhance the props with the extracted size and position\n   * of the box cause there are missing at the props update. A better\n   * solution would be overriding the props setter to do it there, but\n   * the language doesn't allow it while targetting ES5.\n   * TODO: We need to figure out a more consistent solution.\n   */\n\n  return {\n    ...props,\n    // Enhance the props extracting the box size and position.\n    // eslint-disable-next-line @typescript-eslint/no-use-before-define\n    ...Line.extractBoxSizeAndPosition(props)\n  };\n}\n\nexport default class Line extends Item<LineProps> {\n  // To control if the line movement is enabled.\n  private moveMode: boolean = false;\n\n  // This function will only run the 2nd arg function after the time\n  // of the first arg have passed after its last execution.\n  private debouncedStartPositionMovementSave = debounce(\n    500, // ms.\n    (x: Position[\"x\"], y: Position[\"y\"]) => {\n      const prevPosition = {\n        x: this.props.x,\n        y: this.props.y\n      };\n      const newPosition = {\n        x: x,\n        y: y\n      };\n\n      // if (!this.positionChanged(prevPosition, newPosition)) return;\n\n      // Save the new position to the props.\n      // this.move(x, y);\n      // Emit the movement event.\n      // this.movedEventManager.emit({\n      //   item: this,\n      //   prevPosition: prevPosition,\n      //   newPosition: newPosition\n      // });\n    }\n  );\n  // This property will store the function\n  // to clean the movement listener.\n  private removeStartPositionMovement: Function | null = null;\n\n  /**\n   * Start the movement funtionality.\n   * @param element Element to move inside its container.\n   */\n  private initStartPositionMovementListener(\n    element: HTMLElement,\n    container: HTMLElement\n  ): void {\n    this.removeStartPositionMovement = addMovementListener(\n      element,\n      (x: Position[\"x\"], y: Position[\"y\"]) => {\n        console.log(x, y);\n        // Move the DOM element.\n        // this.moveElement(x, y);\n        // Run the save function.\n        this.debouncedStartPositionMovementSave(x, y);\n      },\n      container\n    );\n  }\n  /**\n   * Stop the movement fun\n   */\n  private stopStartPositionMovementListener(): void {\n    if (this.removeStartPositionMovement) {\n      this.removeStartPositionMovement();\n      this.removeStartPositionMovement = null;\n    }\n  }\n\n  /**\n   * @override\n   */\n  public constructor(props: LineProps, meta: ItemMeta) {\n    /*\n     * We need to override the constructor cause we need to obtain the\n     * box size and position from the start and finish points of the line.\n     */\n    super(\n      {\n        ...props,\n        ...Line.extractBoxSizeAndPosition(props)\n      },\n      {\n        ...meta,\n        editMode: false\n      },\n      true\n    );\n\n    this.moveMode = meta.editMode;\n    this.init();\n  }\n\n  /**\n   * Classic and protected version of the setter of the `props` property.\n   * Useful to override it from children classes.\n   * @param newProps\n   * @override Item.setProps\n   */\n  public setProps(newProps: LineProps) {\n    super.setProps({\n      ...newProps,\n      ...Line.extractBoxSizeAndPosition(newProps)\n    });\n  }\n\n  /**\n   * Classic and protected version of the setter of the `meta` property.\n   * Useful to override it from children classes.\n   * @param newMetadata\n   * @override Item.setMeta\n   */\n  public setMeta(newMetadata: ItemMeta) {\n    this.moveMode = newMetadata.editMode;\n    super.setMeta({\n      ...newMetadata,\n      editMode: false\n    });\n  }\n\n  /**\n   * @override\n   * To create the item's DOM representation.\n   * @return Item.\n   */\n  protected createDomElement(): HTMLElement {\n    const element: HTMLDivElement = document.createElement(\"div\");\n    element.className = \"line\";\n\n    const {\n      x, // Box x\n      y, // Box y\n      width, // Box width\n      height, // Box height\n      lineWidth, // Line thickness\n      startPosition, // Line start position\n      endPosition, // Line end position\n      color // Line color\n    } = this.props;\n\n    const startIsLeft = startPosition.x - endPosition.x <= 0;\n    const startIsTop = startPosition.y - endPosition.y <= 0;\n\n    const x1 = startPosition.x - x + lineWidth / 2;\n    const y1 = startPosition.y - y + lineWidth / 2;\n    const x2 = endPosition.x - x + lineWidth / 2;\n    const y2 = endPosition.y - y + lineWidth / 2;\n\n    const svgNS = \"http://www.w3.org/2000/svg\";\n    // SVG container.\n    const svg = document.createElementNS(svgNS, \"svg\");\n    // Set SVG size.\n    svg.setAttribute(\"width\", `${width + lineWidth}`);\n    svg.setAttribute(\"height\", `${height + lineWidth}`);\n    const line = document.createElementNS(svgNS, \"line\");\n    line.setAttribute(\"x1\", `${x1}`);\n    line.setAttribute(\"y1\", `${y1}`);\n    line.setAttribute(\"x2\", `${x2}`);\n    line.setAttribute(\"y2\", `${y2}`);\n    line.setAttribute(\"stroke\", color || \"black\");\n    line.setAttribute(\"stroke-width\", `${lineWidth}`);\n\n    svg.append(line);\n    element.append(svg);\n\n    if (this.moveMode) {\n      this.startCircle = document.createElement(\"div\");\n      this.startCircle.style.width = \"16px\";\n      this.startCircle.style.height = \"16px\";\n      this.startCircle.style.borderRadius = \"50%\";\n      this.startCircle.style.backgroundColor = \"white\";\n      this.startCircle.style.position = \"absolute\";\n      this.startCircle.style.left = startIsLeft\n        ? \"-8px\"\n        : `${width + lineWidth - 8}px`;\n      this.startCircle.style.top = startIsTop\n        ? \"-8px\"\n        : `${height + lineWidth - 8}px`;\n\n      const endCircle = document.createElement(\"div\");\n      endCircle.style.width = \"16px\";\n      endCircle.style.height = \"16px\";\n      endCircle.style.borderRadius = \"50%\";\n      endCircle.style.backgroundColor = \"black\";\n      endCircle.style.position = \"absolute\";\n      endCircle.style.left = startIsLeft\n        ? `${width + lineWidth - 8}px`\n        : \"-8px\";\n      endCircle.style.top = startIsTop ? `${height + lineWidth - 8}px` : \"-8px\";\n\n      // Init the movement listener.\n      // this.initStartPositionMovementListener(this.startCircle, this.elementRef);\n\n      element.append(this.startCircle);\n      element.append(endCircle);\n\n      setTimeout(() => {\n        this.initStartPositionMovementListener(\n          this.startCircle as HTMLElement,\n          this.elementRef\n        );\n        console.log(this.startCircle);\n      }, 100);\n    }\n\n    return element;\n  }\n\n  private startCircle: HTMLElement | null = null;\n\n  /**\n   * Extract the size and position of the box from\n   * the start and the finish of the line.\n   * @param props Item properties.\n   */\n  public static extractBoxSizeAndPosition(props: LineProps): Size & Position {\n    return {\n      width: Math.abs(props.startPosition.x - props.endPosition.x),\n      height: Math.abs(props.startPosition.y - props.endPosition.y),\n      x: Math.min(props.startPosition.x, props.endPosition.x),\n      y: Math.min(props.startPosition.y, props.endPosition.y)\n    };\n  }\n\n  /**\n   * To remove the event listeners and the elements from the DOM.\n   * @override Item.remove\n   */\n  public remove(): void {\n    // Clear the item's event listeners.\n    this.stopStartPositionMovementListener();\n    // Call the parent's .remove()\n    super.remove();\n  }\n}\n","import { LinkedVisualConsoleProps, AnyObject } from \"../lib/types\";\nimport { linkedVCPropsDecoder } from \"../lib\";\nimport Item, { ItemType, ItemProps, itemBasePropsDecoder } from \"../Item\";\n\nexport type LabelProps = {\n  type: ItemType.LABEL;\n} & ItemProps &\n  LinkedVisualConsoleProps;\n\n/**\n * Build a valid typed object from a raw object.\n * This will allow us to ensure the type safety.\n *\n * @param data Raw object.\n * @return An object representing the label props.\n * @throws Will throw a TypeError if some property\n * is missing from the raw object or have an invalid type.\n */\nexport function labelPropsDecoder(data: AnyObject): LabelProps | never {\n  return {\n    ...itemBasePropsDecoder(data), // Object spread. It will merge the properties of the two objects.\n    type: ItemType.LABEL,\n    ...linkedVCPropsDecoder(data) // Object spread. It will merge the properties of the two objects.\n  };\n}\n\nexport default class Label extends Item<LabelProps> {\n  protected createDomElement(): HTMLElement {\n    const element = document.createElement(\"div\");\n    element.className = \"label\";\n    element.innerHTML = this.getLabelWithMacrosReplaced();\n\n    return element;\n  }\n\n  /**\n   * @override Item.createLabelDomElement\n   * Create a new label for the visual console item.\n   * @return Item label.\n   */\n  public createLabelDomElement(): HTMLElement {\n    const element = document.createElement(\"div\");\n    element.className = \"visual-console-item-label\";\n    // Always return an empty label.\n    return element;\n  }\n}\n","import {\n  LinkedVisualConsoleProps,\n  AnyObject,\n  WithModuleProps\n} from \"../lib/types\";\nimport {\n  linkedVCPropsDecoder,\n  parseIntOr,\n  modulePropsDecoder,\n  replaceMacros\n} from \"../lib\";\nimport Item, { ItemType, ItemProps, itemBasePropsDecoder } from \"../Item\";\n\nexport type SimpleValueProps = {\n  type: ItemType.SIMPLE_VALUE;\n  valueType: \"string\" | \"image\";\n  value: string;\n} & (\n  | {\n      processValue: \"none\";\n    }\n  | {\n      processValue: \"avg\" | \"max\" | \"min\";\n      period: number;\n    }) &\n  ItemProps &\n  WithModuleProps &\n  LinkedVisualConsoleProps;\n\n/**\n * Extract a valid enum value from a raw value type.\n * @param valueType Raw value.\n */\nconst parseValueType = (valueType: unknown): SimpleValueProps[\"valueType\"] => {\n  switch (valueType) {\n    case \"string\":\n    case \"image\":\n      return valueType;\n    default:\n      return \"string\";\n  }\n};\n\n/**\n * Extract a valid enum value from a raw process value.\n * @param processValue Raw value.\n */\nconst parseProcessValue = (\n  processValue: unknown\n): SimpleValueProps[\"processValue\"] => {\n  switch (processValue) {\n    case \"none\":\n    case \"avg\":\n    case \"max\":\n    case \"min\":\n      return processValue;\n    default:\n      return \"none\";\n  }\n};\n\n/**\n * Build a valid typed object from a raw object.\n * This will allow us to ensure the type safety.\n *\n * @param data Raw object.\n * @return An object representing the simple value props.\n * @throws Will throw a TypeError if some property\n * is missing from the raw object or have an invalid type.\n */\nexport function simpleValuePropsDecoder(\n  data: AnyObject\n): SimpleValueProps | never {\n  if (typeof data.value !== \"string\" || data.value.length === 0) {\n    throw new TypeError(\"invalid value\");\n  }\n\n  const processValue = parseProcessValue(data.processValue);\n\n  return {\n    ...itemBasePropsDecoder(data), // Object spread. It will merge the properties of the two objects.\n    type: ItemType.SIMPLE_VALUE,\n    valueType: parseValueType(data.valueType),\n    value: data.value,\n    ...(processValue === \"none\"\n      ? { processValue }\n      : { processValue, period: parseIntOr(data.period, 0) }), // Object spread. It will merge the properties of the two objects.\n    ...modulePropsDecoder(data), // Object spread. It will merge the properties of the two objects.\n    ...linkedVCPropsDecoder(data) // Object spread. It will merge the properties of the two objects.\n  };\n}\n\nexport default class SimpleValue extends Item<SimpleValueProps> {\n  protected createDomElement(): HTMLElement {\n    const element = document.createElement(\"div\");\n    element.className = \"simple-value\";\n\n    if (this.props.valueType === \"image\") {\n      const img = document.createElement(\"img\");\n      img.src = this.props.value;\n      element.append(img);\n    } else {\n      // Add the value to the label and show it.\n      let text = this.props.value;\n      let label = this.getLabelWithMacrosReplaced();\n      if (label.length > 0) {\n        text = replaceMacros([{ macro: /\\(?_VALUE_\\)?/i, value: text }], label);\n      }\n\n      element.innerHTML = text;\n    }\n\n    return element;\n  }\n\n  /**\n   * @override Item.createLabelDomElement\n   * Create a new label for the visual console item.\n   * @return Item label.\n   */\n  protected createLabelDomElement(): HTMLElement {\n    const element = document.createElement(\"div\");\n    element.className = \"visual-console-item-label\";\n    // Always return an empty label.\n    return element;\n  }\n}\n","var pi = Math.PI,\n    tau = 2 * pi,\n    epsilon = 1e-6,\n    tauEpsilon = tau - epsilon;\n\nfunction Path() {\n  this._x0 = this._y0 = // start of current subpath\n  this._x1 = this._y1 = null; // end of current subpath\n  this._ = \"\";\n}\n\nfunction path() {\n  return new Path;\n}\n\nPath.prototype = path.prototype = {\n  constructor: Path,\n  moveTo: function(x, y) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y);\n  },\n  closePath: function() {\n    if (this._x1 !== null) {\n      this._x1 = this._x0, this._y1 = this._y0;\n      this._ += \"Z\";\n    }\n  },\n  lineTo: function(x, y) {\n    this._ += \"L\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  quadraticCurveTo: function(x1, y1, x, y) {\n    this._ += \"Q\" + (+x1) + \",\" + (+y1) + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  bezierCurveTo: function(x1, y1, x2, y2, x, y) {\n    this._ += \"C\" + (+x1) + \",\" + (+y1) + \",\" + (+x2) + \",\" + (+y2) + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  arcTo: function(x1, y1, x2, y2, r) {\n    x1 = +x1, y1 = +y1, x2 = +x2, y2 = +y2, r = +r;\n    var x0 = this._x1,\n        y0 = this._y1,\n        x21 = x2 - x1,\n        y21 = y2 - y1,\n        x01 = x0 - x1,\n        y01 = y0 - y1,\n        l01_2 = x01 * x01 + y01 * y01;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(\"negative radius: \" + r);\n\n    // Is this path empty? Move to (x1,y1).\n    if (this._x1 === null) {\n      this._ += \"M\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n    }\n\n    // Or, is (x1,y1) coincident with (x0,y0)? Do nothing.\n    else if (!(l01_2 > epsilon));\n\n    // Or, are (x0,y0), (x1,y1) and (x2,y2) collinear?\n    // Equivalently, is (x1,y1) coincident with (x2,y2)?\n    // Or, is the radius zero? Line to (x1,y1).\n    else if (!(Math.abs(y01 * x21 - y21 * x01) > epsilon) || !r) {\n      this._ += \"L\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n    }\n\n    // Otherwise, draw an arc!\n    else {\n      var x20 = x2 - x0,\n          y20 = y2 - y0,\n          l21_2 = x21 * x21 + y21 * y21,\n          l20_2 = x20 * x20 + y20 * y20,\n          l21 = Math.sqrt(l21_2),\n          l01 = Math.sqrt(l01_2),\n          l = r * Math.tan((pi - Math.acos((l21_2 + l01_2 - l20_2) / (2 * l21 * l01))) / 2),\n          t01 = l / l01,\n          t21 = l / l21;\n\n      // If the start tangent is not coincident with (x0,y0), line to.\n      if (Math.abs(t01 - 1) > epsilon) {\n        this._ += \"L\" + (x1 + t01 * x01) + \",\" + (y1 + t01 * y01);\n      }\n\n      this._ += \"A\" + r + \",\" + r + \",0,0,\" + (+(y01 * x20 > x01 * y20)) + \",\" + (this._x1 = x1 + t21 * x21) + \",\" + (this._y1 = y1 + t21 * y21);\n    }\n  },\n  arc: function(x, y, r, a0, a1, ccw) {\n    x = +x, y = +y, r = +r;\n    var dx = r * Math.cos(a0),\n        dy = r * Math.sin(a0),\n        x0 = x + dx,\n        y0 = y + dy,\n        cw = 1 ^ ccw,\n        da = ccw ? a0 - a1 : a1 - a0;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(\"negative radius: \" + r);\n\n    // Is this path empty? Move to (x0,y0).\n    if (this._x1 === null) {\n      this._ += \"M\" + x0 + \",\" + y0;\n    }\n\n    // Or, is (x0,y0) not coincident with the previous point? Line to (x0,y0).\n    else if (Math.abs(this._x1 - x0) > epsilon || Math.abs(this._y1 - y0) > epsilon) {\n      this._ += \"L\" + x0 + \",\" + y0;\n    }\n\n    // Is this arc empty? Were done.\n    if (!r) return;\n\n    // Does the angle go the wrong way? Flip the direction.\n    if (da < 0) da = da % tau + tau;\n\n    // Is this a complete circle? Draw two arcs to complete the circle.\n    if (da > tauEpsilon) {\n      this._ += \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (x - dx) + \",\" + (y - dy) + \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (this._x1 = x0) + \",\" + (this._y1 = y0);\n    }\n\n    // Is this arc non-empty? Draw an arc!\n    else if (da > epsilon) {\n      this._ += \"A\" + r + \",\" + r + \",0,\" + (+(da >= pi)) + \",\" + cw + \",\" + (this._x1 = x + r * Math.cos(a1)) + \",\" + (this._y1 = y + r * Math.sin(a1));\n    }\n  },\n  rect: function(x, y, w, h) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y) + \"h\" + (+w) + \"v\" + (+h) + \"h\" + (-w) + \"Z\";\n  },\n  toString: function() {\n    return this._;\n  }\n};\n\nexport default path;\n","export default function(x) {\n  return function constant() {\n    return x;\n  };\n}\n","export var abs = Math.abs;\nexport var atan2 = Math.atan2;\nexport var cos = Math.cos;\nexport var max = Math.max;\nexport var min = Math.min;\nexport var sin = Math.sin;\nexport var sqrt = Math.sqrt;\n\nexport var epsilon = 1e-12;\nexport var pi = Math.PI;\nexport var halfPi = pi / 2;\nexport var tau = 2 * pi;\n\nexport function acos(x) {\n  return x > 1 ? 0 : x < -1 ? pi : Math.acos(x);\n}\n\nexport function asin(x) {\n  return x >= 1 ? halfPi : x <= -1 ? -halfPi : Math.asin(x);\n}\n","import {path} from \"d3-path\";\nimport constant from \"./constant\";\nimport {abs, acos, asin, atan2, cos, epsilon, halfPi, max, min, pi, sin, sqrt, tau} from \"./math\";\n\nfunction arcInnerRadius(d) {\n  return d.innerRadius;\n}\n\nfunction arcOuterRadius(d) {\n  return d.outerRadius;\n}\n\nfunction arcStartAngle(d) {\n  return d.startAngle;\n}\n\nfunction arcEndAngle(d) {\n  return d.endAngle;\n}\n\nfunction arcPadAngle(d) {\n  return d && d.padAngle; // Note: optional!\n}\n\nfunction intersect(x0, y0, x1, y1, x2, y2, x3, y3) {\n  var x10 = x1 - x0, y10 = y1 - y0,\n      x32 = x3 - x2, y32 = y3 - y2,\n      t = y32 * x10 - x32 * y10;\n  if (t * t < epsilon) return;\n  t = (x32 * (y0 - y2) - y32 * (x0 - x2)) / t;\n  return [x0 + t * x10, y0 + t * y10];\n}\n\n// Compute perpendicular offset line of length rc.\n// http://mathworld.wolfram.com/Circle-LineIntersection.html\nfunction cornerTangents(x0, y0, x1, y1, r1, rc, cw) {\n  var x01 = x0 - x1,\n      y01 = y0 - y1,\n      lo = (cw ? rc : -rc) / sqrt(x01 * x01 + y01 * y01),\n      ox = lo * y01,\n      oy = -lo * x01,\n      x11 = x0 + ox,\n      y11 = y0 + oy,\n      x10 = x1 + ox,\n      y10 = y1 + oy,\n      x00 = (x11 + x10) / 2,\n      y00 = (y11 + y10) / 2,\n      dx = x10 - x11,\n      dy = y10 - y11,\n      d2 = dx * dx + dy * dy,\n      r = r1 - rc,\n      D = x11 * y10 - x10 * y11,\n      d = (dy < 0 ? -1 : 1) * sqrt(max(0, r * r * d2 - D * D)),\n      cx0 = (D * dy - dx * d) / d2,\n      cy0 = (-D * dx - dy * d) / d2,\n      cx1 = (D * dy + dx * d) / d2,\n      cy1 = (-D * dx + dy * d) / d2,\n      dx0 = cx0 - x00,\n      dy0 = cy0 - y00,\n      dx1 = cx1 - x00,\n      dy1 = cy1 - y00;\n\n  // Pick the closer of the two intersection points.\n  // TODO Is there a faster way to determine which intersection to use?\n  if (dx0 * dx0 + dy0 * dy0 > dx1 * dx1 + dy1 * dy1) cx0 = cx1, cy0 = cy1;\n\n  return {\n    cx: cx0,\n    cy: cy0,\n    x01: -ox,\n    y01: -oy,\n    x11: cx0 * (r1 / r - 1),\n    y11: cy0 * (r1 / r - 1)\n  };\n}\n\nexport default function() {\n  var innerRadius = arcInnerRadius,\n      outerRadius = arcOuterRadius,\n      cornerRadius = constant(0),\n      padRadius = null,\n      startAngle = arcStartAngle,\n      endAngle = arcEndAngle,\n      padAngle = arcPadAngle,\n      context = null;\n\n  function arc() {\n    var buffer,\n        r,\n        r0 = +innerRadius.apply(this, arguments),\n        r1 = +outerRadius.apply(this, arguments),\n        a0 = startAngle.apply(this, arguments) - halfPi,\n        a1 = endAngle.apply(this, arguments) - halfPi,\n        da = abs(a1 - a0),\n        cw = a1 > a0;\n\n    if (!context) context = buffer = path();\n\n    // Ensure that the outer radius is always larger than the inner radius.\n    if (r1 < r0) r = r1, r1 = r0, r0 = r;\n\n    // Is it a point?\n    if (!(r1 > epsilon)) context.moveTo(0, 0);\n\n    // Or is it a circle or annulus?\n    else if (da > tau - epsilon) {\n      context.moveTo(r1 * cos(a0), r1 * sin(a0));\n      context.arc(0, 0, r1, a0, a1, !cw);\n      if (r0 > epsilon) {\n        context.moveTo(r0 * cos(a1), r0 * sin(a1));\n        context.arc(0, 0, r0, a1, a0, cw);\n      }\n    }\n\n    // Or is it a circular or annular sector?\n    else {\n      var a01 = a0,\n          a11 = a1,\n          a00 = a0,\n          a10 = a1,\n          da0 = da,\n          da1 = da,\n          ap = padAngle.apply(this, arguments) / 2,\n          rp = (ap > epsilon) && (padRadius ? +padRadius.apply(this, arguments) : sqrt(r0 * r0 + r1 * r1)),\n          rc = min(abs(r1 - r0) / 2, +cornerRadius.apply(this, arguments)),\n          rc0 = rc,\n          rc1 = rc,\n          t0,\n          t1;\n\n      // Apply padding? Note that since r1  r0, da1  da0.\n      if (rp > epsilon) {\n        var p0 = asin(rp / r0 * sin(ap)),\n            p1 = asin(rp / r1 * sin(ap));\n        if ((da0 -= p0 * 2) > epsilon) p0 *= (cw ? 1 : -1), a00 += p0, a10 -= p0;\n        else da0 = 0, a00 = a10 = (a0 + a1) / 2;\n        if ((da1 -= p1 * 2) > epsilon) p1 *= (cw ? 1 : -1), a01 += p1, a11 -= p1;\n        else da1 = 0, a01 = a11 = (a0 + a1) / 2;\n      }\n\n      var x01 = r1 * cos(a01),\n          y01 = r1 * sin(a01),\n          x10 = r0 * cos(a10),\n          y10 = r0 * sin(a10);\n\n      // Apply rounded corners?\n      if (rc > epsilon) {\n        var x11 = r1 * cos(a11),\n            y11 = r1 * sin(a11),\n            x00 = r0 * cos(a00),\n            y00 = r0 * sin(a00),\n            oc;\n\n        // Restrict the corner radius according to the sector angle.\n        if (da < pi && (oc = intersect(x01, y01, x00, y00, x11, y11, x10, y10))) {\n          var ax = x01 - oc[0],\n              ay = y01 - oc[1],\n              bx = x11 - oc[0],\n              by = y11 - oc[1],\n              kc = 1 / sin(acos((ax * bx + ay * by) / (sqrt(ax * ax + ay * ay) * sqrt(bx * bx + by * by))) / 2),\n              lc = sqrt(oc[0] * oc[0] + oc[1] * oc[1]);\n          rc0 = min(rc, (r0 - lc) / (kc - 1));\n          rc1 = min(rc, (r1 - lc) / (kc + 1));\n        }\n      }\n\n      // Is the sector collapsed to a line?\n      if (!(da1 > epsilon)) context.moveTo(x01, y01);\n\n      // Does the sectors outer ring have rounded corners?\n      else if (rc1 > epsilon) {\n        t0 = cornerTangents(x00, y00, x01, y01, r1, rc1, cw);\n        t1 = cornerTangents(x11, y11, x10, y10, r1, rc1, cw);\n\n        context.moveTo(t0.cx + t0.x01, t0.cy + t0.y01);\n\n        // Have the corners merged?\n        if (rc1 < rc) context.arc(t0.cx, t0.cy, rc1, atan2(t0.y01, t0.x01), atan2(t1.y01, t1.x01), !cw);\n\n        // Otherwise, draw the two corners and the ring.\n        else {\n          context.arc(t0.cx, t0.cy, rc1, atan2(t0.y01, t0.x01), atan2(t0.y11, t0.x11), !cw);\n          context.arc(0, 0, r1, atan2(t0.cy + t0.y11, t0.cx + t0.x11), atan2(t1.cy + t1.y11, t1.cx + t1.x11), !cw);\n          context.arc(t1.cx, t1.cy, rc1, atan2(t1.y11, t1.x11), atan2(t1.y01, t1.x01), !cw);\n        }\n      }\n\n      // Or is the outer ring just a circular arc?\n      else context.moveTo(x01, y01), context.arc(0, 0, r1, a01, a11, !cw);\n\n      // Is there no inner ring, and its a circular sector?\n      // Or perhaps its an annular sector collapsed due to padding?\n      if (!(r0 > epsilon) || !(da0 > epsilon)) context.lineTo(x10, y10);\n\n      // Does the sectors inner ring (or point) have rounded corners?\n      else if (rc0 > epsilon) {\n        t0 = cornerTangents(x10, y10, x11, y11, r0, -rc0, cw);\n        t1 = cornerTangents(x01, y01, x00, y00, r0, -rc0, cw);\n\n        context.lineTo(t0.cx + t0.x01, t0.cy + t0.y01);\n\n        // Have the corners merged?\n        if (rc0 < rc) context.arc(t0.cx, t0.cy, rc0, atan2(t0.y01, t0.x01), atan2(t1.y01, t1.x01), !cw);\n\n        // Otherwise, draw the two corners and the ring.\n        else {\n          context.arc(t0.cx, t0.cy, rc0, atan2(t0.y01, t0.x01), atan2(t0.y11, t0.x11), !cw);\n          context.arc(0, 0, r0, atan2(t0.cy + t0.y11, t0.cx + t0.x11), atan2(t1.cy + t1.y11, t1.cx + t1.x11), cw);\n          context.arc(t1.cx, t1.cy, rc0, atan2(t1.y11, t1.x11), atan2(t1.y01, t1.x01), !cw);\n        }\n      }\n\n      // Or is the inner ring just a circular arc?\n      else context.arc(0, 0, r0, a10, a00, cw);\n    }\n\n    context.closePath();\n\n    if (buffer) return context = null, buffer + \"\" || null;\n  }\n\n  arc.centroid = function() {\n    var r = (+innerRadius.apply(this, arguments) + +outerRadius.apply(this, arguments)) / 2,\n        a = (+startAngle.apply(this, arguments) + +endAngle.apply(this, arguments)) / 2 - pi / 2;\n    return [cos(a) * r, sin(a) * r];\n  };\n\n  arc.innerRadius = function(_) {\n    return arguments.length ? (innerRadius = typeof _ === \"function\" ? _ : constant(+_), arc) : innerRadius;\n  };\n\n  arc.outerRadius = function(_) {\n    return arguments.length ? (outerRadius = typeof _ === \"function\" ? _ : constant(+_), arc) : outerRadius;\n  };\n\n  arc.cornerRadius = function(_) {\n    return arguments.length ? (cornerRadius = typeof _ === \"function\" ? _ : constant(+_), arc) : cornerRadius;\n  };\n\n  arc.padRadius = function(_) {\n    return arguments.length ? (padRadius = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), arc) : padRadius;\n  };\n\n  arc.startAngle = function(_) {\n    return arguments.length ? (startAngle = typeof _ === \"function\" ? _ : constant(+_), arc) : startAngle;\n  };\n\n  arc.endAngle = function(_) {\n    return arguments.length ? (endAngle = typeof _ === \"function\" ? _ : constant(+_), arc) : endAngle;\n  };\n\n  arc.padAngle = function(_) {\n    return arguments.length ? (padAngle = typeof _ === \"function\" ? _ : constant(+_), arc) : padAngle;\n  };\n\n  arc.context = function(_) {\n    return arguments.length ? ((context = _ == null ? null : _), arc) : context;\n  };\n\n  return arc;\n}\n","function Linear(context) {\n  this._context = context;\n}\n\nLinear.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; // proceed\n      default: this._context.lineTo(x, y); break;\n    }\n  }\n};\n\nexport default function(context) {\n  return new Linear(context);\n}\n","import curveLinear from \"./linear\";\n\nexport var curveRadialLinear = curveRadial(curveLinear);\n\nfunction Radial(curve) {\n  this._curve = curve;\n}\n\nRadial.prototype = {\n  areaStart: function() {\n    this._curve.areaStart();\n  },\n  areaEnd: function() {\n    this._curve.areaEnd();\n  },\n  lineStart: function() {\n    this._curve.lineStart();\n  },\n  lineEnd: function() {\n    this._curve.lineEnd();\n  },\n  point: function(a, r) {\n    this._curve.point(r * Math.sin(a), r * -Math.cos(a));\n  }\n};\n\nexport default function curveRadial(curve) {\n\n  function radial(context) {\n    return new Radial(curve(context));\n  }\n\n  radial._curve = curve;\n\n  return radial;\n}\n","export var slice = Array.prototype.slice;\n","var tan30 = Math.sqrt(1 / 3),\n    tan30_2 = tan30 * 2;\n\nexport default {\n  draw: function(context, size) {\n    var y = Math.sqrt(size / tan30_2),\n        x = y * tan30;\n    context.moveTo(0, -y);\n    context.lineTo(x, 0);\n    context.lineTo(0, y);\n    context.lineTo(-x, 0);\n    context.closePath();\n  }\n};\n","import {pi, tau} from \"../math\";\n\nexport default {\n  draw: function(context, size) {\n    var r = Math.sqrt(size / pi);\n    context.moveTo(r, 0);\n    context.arc(0, 0, r, 0, tau);\n  }\n};\n","import {pi, tau} from \"../math\";\n\nvar ka = 0.89081309152928522810,\n    kr = Math.sin(pi / 10) / Math.sin(7 * pi / 10),\n    kx = Math.sin(tau / 10) * kr,\n    ky = -Math.cos(tau / 10) * kr;\n\nexport default {\n  draw: function(context, size) {\n    var r = Math.sqrt(size * ka),\n        x = kx * r,\n        y = ky * r;\n    context.moveTo(0, -r);\n    context.lineTo(x, y);\n    for (var i = 1; i < 5; ++i) {\n      var a = tau * i / 5,\n          c = Math.cos(a),\n          s = Math.sin(a);\n      context.lineTo(s * r, -c * r);\n      context.lineTo(c * x - s * y, s * x + c * y);\n    }\n    context.closePath();\n  }\n};\n","export default function() {}\n","var sqrt3 = Math.sqrt(3);\n\nexport default {\n  draw: function(context, size) {\n    var y = -Math.sqrt(size / (sqrt3 * 3));\n    context.moveTo(0, y * 2);\n    context.lineTo(-sqrt3 * y, -y);\n    context.lineTo(sqrt3 * y, -y);\n    context.closePath();\n  }\n};\n","var c = -0.5,\n    s = Math.sqrt(3) / 2,\n    k = 1 / Math.sqrt(12),\n    a = (k / 2 + 1) * 3;\n\nexport default {\n  draw: function(context, size) {\n    var r = Math.sqrt(size / a),\n        x0 = r / 2,\n        y0 = r * k,\n        x1 = x0,\n        y1 = r * k + r,\n        x2 = -x1,\n        y2 = y1;\n    context.moveTo(x0, y0);\n    context.lineTo(x1, y1);\n    context.lineTo(x2, y2);\n    context.lineTo(c * x0 - s * y0, s * x0 + c * y0);\n    context.lineTo(c * x1 - s * y1, s * x1 + c * y1);\n    context.lineTo(c * x2 - s * y2, s * x2 + c * y2);\n    context.lineTo(c * x0 + s * y0, c * y0 - s * x0);\n    context.lineTo(c * x1 + s * y1, c * y1 - s * x1);\n    context.lineTo(c * x2 + s * y2, c * y2 - s * x2);\n    context.closePath();\n  }\n};\n","export function point(that, x, y) {\n  that._context.bezierCurveTo(\n    (2 * that._x0 + that._x1) / 3,\n    (2 * that._y0 + that._y1) / 3,\n    (that._x0 + 2 * that._x1) / 3,\n    (that._y0 + 2 * that._y1) / 3,\n    (that._x0 + 4 * that._x1 + x) / 6,\n    (that._y0 + 4 * that._y1 + y) / 6\n  );\n}\n\nexport function Basis(context) {\n  this._context = context;\n}\n\nBasis.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 =\n    this._y0 = this._y1 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 3: point(this, this._x1, this._y1); // proceed\n      case 2: this._context.lineTo(this._x1, this._y1); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; this._context.lineTo((5 * this._x0 + this._x1) / 6, (5 * this._y0 + this._y1) / 6); // proceed\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n  }\n};\n\nexport default function(context) {\n  return new Basis(context);\n}\n","import noop from \"../noop\";\nimport {point} from \"./basis\";\n\nfunction BasisClosed(context) {\n  this._context = context;\n}\n\nBasisClosed.prototype = {\n  areaStart: noop,\n  areaEnd: noop,\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 = this._x3 = this._x4 =\n    this._y0 = this._y1 = this._y2 = this._y3 = this._y4 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 1: {\n        this._context.moveTo(this._x2, this._y2);\n        this._context.closePath();\n        break;\n      }\n      case 2: {\n        this._context.moveTo((this._x2 + 2 * this._x3) / 3, (this._y2 + 2 * this._y3) / 3);\n        this._context.lineTo((this._x3 + 2 * this._x2) / 3, (this._y3 + 2 * this._y2) / 3);\n        this._context.closePath();\n        break;\n      }\n      case 3: {\n        this.point(this._x2, this._y2);\n        this.point(this._x3, this._y3);\n        this.point(this._x4, this._y4);\n        break;\n      }\n    }\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._x2 = x, this._y2 = y; break;\n      case 1: this._point = 2; this._x3 = x, this._y3 = y; break;\n      case 2: this._point = 3; this._x4 = x, this._y4 = y; this._context.moveTo((this._x0 + 4 * this._x1 + x) / 6, (this._y0 + 4 * this._y1 + y) / 6); break;\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n  }\n};\n\nexport default function(context) {\n  return new BasisClosed(context);\n}\n","import {point} from \"./basis\";\n\nfunction BasisOpen(context) {\n  this._context = context;\n}\n\nBasisOpen.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 =\n    this._y0 = this._y1 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 3)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; var x0 = (this._x0 + 4 * this._x1 + x) / 6, y0 = (this._y0 + 4 * this._y1 + y) / 6; this._line ? this._context.lineTo(x0, y0) : this._context.moveTo(x0, y0); break;\n      case 3: this._point = 4; // proceed\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n  }\n};\n\nexport default function(context) {\n  return new BasisOpen(context);\n}\n","import {Basis} from \"./basis\";\n\nfunction Bundle(context, beta) {\n  this._basis = new Basis(context);\n  this._beta = beta;\n}\n\nBundle.prototype = {\n  lineStart: function() {\n    this._x = [];\n    this._y = [];\n    this._basis.lineStart();\n  },\n  lineEnd: function() {\n    var x = this._x,\n        y = this._y,\n        j = x.length - 1;\n\n    if (j > 0) {\n      var x0 = x[0],\n          y0 = y[0],\n          dx = x[j] - x0,\n          dy = y[j] - y0,\n          i = -1,\n          t;\n\n      while (++i <= j) {\n        t = i / j;\n        this._basis.point(\n          this._beta * x[i] + (1 - this._beta) * (x0 + t * dx),\n          this._beta * y[i] + (1 - this._beta) * (y0 + t * dy)\n        );\n      }\n    }\n\n    this._x = this._y = null;\n    this._basis.lineEnd();\n  },\n  point: function(x, y) {\n    this._x.push(+x);\n    this._y.push(+y);\n  }\n};\n\nexport default (function custom(beta) {\n\n  function bundle(context) {\n    return beta === 1 ? new Basis(context) : new Bundle(context, beta);\n  }\n\n  bundle.beta = function(beta) {\n    return custom(+beta);\n  };\n\n  return bundle;\n})(0.85);\n","export function point(that, x, y) {\n  that._context.bezierCurveTo(\n    that._x1 + that._k * (that._x2 - that._x0),\n    that._y1 + that._k * (that._y2 - that._y0),\n    that._x2 + that._k * (that._x1 - x),\n    that._y2 + that._k * (that._y1 - y),\n    that._x2,\n    that._y2\n  );\n}\n\nexport function Cardinal(context, tension) {\n  this._context = context;\n  this._k = (1 - tension) / 6;\n}\n\nCardinal.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 2: this._context.lineTo(this._x2, this._y2); break;\n      case 3: point(this, this._x1, this._y1); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; this._x1 = x, this._y1 = y; break;\n      case 2: this._point = 3; // proceed\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(tension) {\n\n  function cardinal(context) {\n    return new Cardinal(context, tension);\n  }\n\n  cardinal.tension = function(tension) {\n    return custom(+tension);\n  };\n\n  return cardinal;\n})(0);\n","import noop from \"../noop\";\nimport {point} from \"./cardinal\";\n\nexport function CardinalClosed(context, tension) {\n  this._context = context;\n  this._k = (1 - tension) / 6;\n}\n\nCardinalClosed.prototype = {\n  areaStart: noop,\n  areaEnd: noop,\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 = this._x3 = this._x4 = this._x5 =\n    this._y0 = this._y1 = this._y2 = this._y3 = this._y4 = this._y5 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 1: {\n        this._context.moveTo(this._x3, this._y3);\n        this._context.closePath();\n        break;\n      }\n      case 2: {\n        this._context.lineTo(this._x3, this._y3);\n        this._context.closePath();\n        break;\n      }\n      case 3: {\n        this.point(this._x3, this._y3);\n        this.point(this._x4, this._y4);\n        this.point(this._x5, this._y5);\n        break;\n      }\n    }\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._x3 = x, this._y3 = y; break;\n      case 1: this._point = 2; this._context.moveTo(this._x4 = x, this._y4 = y); break;\n      case 2: this._point = 3; this._x5 = x, this._y5 = y; break;\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(tension) {\n\n  function cardinal(context) {\n    return new CardinalClosed(context, tension);\n  }\n\n  cardinal.tension = function(tension) {\n    return custom(+tension);\n  };\n\n  return cardinal;\n})(0);\n","import {point} from \"./cardinal\";\n\nexport function CardinalOpen(context, tension) {\n  this._context = context;\n  this._k = (1 - tension) / 6;\n}\n\nCardinalOpen.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 3)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; this._line ? this._context.lineTo(this._x2, this._y2) : this._context.moveTo(this._x2, this._y2); break;\n      case 3: this._point = 4; // proceed\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(tension) {\n\n  function cardinal(context) {\n    return new CardinalOpen(context, tension);\n  }\n\n  cardinal.tension = function(tension) {\n    return custom(+tension);\n  };\n\n  return cardinal;\n})(0);\n","import {epsilon} from \"../math\";\nimport {Cardinal} from \"./cardinal\";\n\nexport function point(that, x, y) {\n  var x1 = that._x1,\n      y1 = that._y1,\n      x2 = that._x2,\n      y2 = that._y2;\n\n  if (that._l01_a > epsilon) {\n    var a = 2 * that._l01_2a + 3 * that._l01_a * that._l12_a + that._l12_2a,\n        n = 3 * that._l01_a * (that._l01_a + that._l12_a);\n    x1 = (x1 * a - that._x0 * that._l12_2a + that._x2 * that._l01_2a) / n;\n    y1 = (y1 * a - that._y0 * that._l12_2a + that._y2 * that._l01_2a) / n;\n  }\n\n  if (that._l23_a > epsilon) {\n    var b = 2 * that._l23_2a + 3 * that._l23_a * that._l12_a + that._l12_2a,\n        m = 3 * that._l23_a * (that._l23_a + that._l12_a);\n    x2 = (x2 * b + that._x1 * that._l23_2a - x * that._l12_2a) / m;\n    y2 = (y2 * b + that._y1 * that._l23_2a - y * that._l12_2a) / m;\n  }\n\n  that._context.bezierCurveTo(x1, y1, x2, y2, that._x2, that._y2);\n}\n\nfunction CatmullRom(context, alpha) {\n  this._context = context;\n  this._alpha = alpha;\n}\n\nCatmullRom.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._l01_a = this._l12_a = this._l23_a =\n    this._l01_2a = this._l12_2a = this._l23_2a =\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 2: this._context.lineTo(this._x2, this._y2); break;\n      case 3: this.point(this._x2, this._y2); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n\n    if (this._point) {\n      var x23 = this._x2 - x,\n          y23 = this._y2 - y;\n      this._l23_a = Math.sqrt(this._l23_2a = Math.pow(x23 * x23 + y23 * y23, this._alpha));\n    }\n\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; // proceed\n      default: point(this, x, y); break;\n    }\n\n    this._l01_a = this._l12_a, this._l12_a = this._l23_a;\n    this._l01_2a = this._l12_2a, this._l12_2a = this._l23_2a;\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(alpha) {\n\n  function catmullRom(context) {\n    return alpha ? new CatmullRom(context, alpha) : new Cardinal(context, 0);\n  }\n\n  catmullRom.alpha = function(alpha) {\n    return custom(+alpha);\n  };\n\n  return catmullRom;\n})(0.5);\n","import {CardinalClosed} from \"./cardinalClosed\";\nimport noop from \"../noop\";\nimport {point} from \"./catmullRom\";\n\nfunction CatmullRomClosed(context, alpha) {\n  this._context = context;\n  this._alpha = alpha;\n}\n\nCatmullRomClosed.prototype = {\n  areaStart: noop,\n  areaEnd: noop,\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 = this._x3 = this._x4 = this._x5 =\n    this._y0 = this._y1 = this._y2 = this._y3 = this._y4 = this._y5 = NaN;\n    this._l01_a = this._l12_a = this._l23_a =\n    this._l01_2a = this._l12_2a = this._l23_2a =\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 1: {\n        this._context.moveTo(this._x3, this._y3);\n        this._context.closePath();\n        break;\n      }\n      case 2: {\n        this._context.lineTo(this._x3, this._y3);\n        this._context.closePath();\n        break;\n      }\n      case 3: {\n        this.point(this._x3, this._y3);\n        this.point(this._x4, this._y4);\n        this.point(this._x5, this._y5);\n        break;\n      }\n    }\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n\n    if (this._point) {\n      var x23 = this._x2 - x,\n          y23 = this._y2 - y;\n      this._l23_a = Math.sqrt(this._l23_2a = Math.pow(x23 * x23 + y23 * y23, this._alpha));\n    }\n\n    switch (this._point) {\n      case 0: this._point = 1; this._x3 = x, this._y3 = y; break;\n      case 1: this._point = 2; this._context.moveTo(this._x4 = x, this._y4 = y); break;\n      case 2: this._point = 3; this._x5 = x, this._y5 = y; break;\n      default: point(this, x, y); break;\n    }\n\n    this._l01_a = this._l12_a, this._l12_a = this._l23_a;\n    this._l01_2a = this._l12_2a, this._l12_2a = this._l23_2a;\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(alpha) {\n\n  function catmullRom(context) {\n    return alpha ? new CatmullRomClosed(context, alpha) : new CardinalClosed(context, 0);\n  }\n\n  catmullRom.alpha = function(alpha) {\n    return custom(+alpha);\n  };\n\n  return catmullRom;\n})(0.5);\n","import {CardinalOpen} from \"./cardinalOpen\";\nimport {point} from \"./catmullRom\";\n\nfunction CatmullRomOpen(context, alpha) {\n  this._context = context;\n  this._alpha = alpha;\n}\n\nCatmullRomOpen.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._l01_a = this._l12_a = this._l23_a =\n    this._l01_2a = this._l12_2a = this._l23_2a =\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 3)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n\n    if (this._point) {\n      var x23 = this._x2 - x,\n          y23 = this._y2 - y;\n      this._l23_a = Math.sqrt(this._l23_2a = Math.pow(x23 * x23 + y23 * y23, this._alpha));\n    }\n\n    switch (this._point) {\n      case 0: this._point = 1; break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; this._line ? this._context.lineTo(this._x2, this._y2) : this._context.moveTo(this._x2, this._y2); break;\n      case 3: this._point = 4; // proceed\n      default: point(this, x, y); break;\n    }\n\n    this._l01_a = this._l12_a, this._l12_a = this._l23_a;\n    this._l01_2a = this._l12_2a, this._l12_2a = this._l23_2a;\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(alpha) {\n\n  function catmullRom(context) {\n    return alpha ? new CatmullRomOpen(context, alpha) : new CardinalOpen(context, 0);\n  }\n\n  catmullRom.alpha = function(alpha) {\n    return custom(+alpha);\n  };\n\n  return catmullRom;\n})(0.5);\n","import noop from \"../noop\";\n\nfunction LinearClosed(context) {\n  this._context = context;\n}\n\nLinearClosed.prototype = {\n  areaStart: noop,\n  areaEnd: noop,\n  lineStart: function() {\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._point) this._context.closePath();\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    if (this._point) this._context.lineTo(x, y);\n    else this._point = 1, this._context.moveTo(x, y);\n  }\n};\n\nexport default function(context) {\n  return new LinearClosed(context);\n}\n","function sign(x) {\n  return x < 0 ? -1 : 1;\n}\n\n// Calculate the slopes of the tangents (Hermite-type interpolation) based on\n// the following paper: Steffen, M. 1990. A Simple Method for Monotonic\n// Interpolation in One Dimension. Astronomy and Astrophysics, Vol. 239, NO.\n// NOV(II), P. 443, 1990.\nfunction slope3(that, x2, y2) {\n  var h0 = that._x1 - that._x0,\n      h1 = x2 - that._x1,\n      s0 = (that._y1 - that._y0) / (h0 || h1 < 0 && -0),\n      s1 = (y2 - that._y1) / (h1 || h0 < 0 && -0),\n      p = (s0 * h1 + s1 * h0) / (h0 + h1);\n  return (sign(s0) + sign(s1)) * Math.min(Math.abs(s0), Math.abs(s1), 0.5 * Math.abs(p)) || 0;\n}\n\n// Calculate a one-sided slope.\nfunction slope2(that, t) {\n  var h = that._x1 - that._x0;\n  return h ? (3 * (that._y1 - that._y0) / h - t) / 2 : t;\n}\n\n// According to https://en.wikipedia.org/wiki/Cubic_Hermite_spline#Representations\n// \"you can express cubic Hermite interpolation in terms of cubic Bzier curves\n// with respect to the four values p0, p0 + m0 / 3, p1 - m1 / 3, p1\".\nfunction point(that, t0, t1) {\n  var x0 = that._x0,\n      y0 = that._y0,\n      x1 = that._x1,\n      y1 = that._y1,\n      dx = (x1 - x0) / 3;\n  that._context.bezierCurveTo(x0 + dx, y0 + dx * t0, x1 - dx, y1 - dx * t1, x1, y1);\n}\n\nfunction MonotoneX(context) {\n  this._context = context;\n}\n\nMonotoneX.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 =\n    this._y0 = this._y1 =\n    this._t0 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 2: this._context.lineTo(this._x1, this._y1); break;\n      case 3: point(this, this._t0, slope2(this, this._t0)); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    var t1 = NaN;\n\n    x = +x, y = +y;\n    if (x === this._x1 && y === this._y1) return; // Ignore coincident points.\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; point(this, slope2(this, t1 = slope3(this, x, y)), t1); break;\n      default: point(this, this._t0, t1 = slope3(this, x, y)); break;\n    }\n\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n    this._t0 = t1;\n  }\n}\n\nfunction MonotoneY(context) {\n  this._context = new ReflectContext(context);\n}\n\n(MonotoneY.prototype = Object.create(MonotoneX.prototype)).point = function(x, y) {\n  MonotoneX.prototype.point.call(this, y, x);\n};\n\nfunction ReflectContext(context) {\n  this._context = context;\n}\n\nReflectContext.prototype = {\n  moveTo: function(x, y) { this._context.moveTo(y, x); },\n  closePath: function() { this._context.closePath(); },\n  lineTo: function(x, y) { this._context.lineTo(y, x); },\n  bezierCurveTo: function(x1, y1, x2, y2, x, y) { this._context.bezierCurveTo(y1, x1, y2, x2, y, x); }\n};\n\nexport function monotoneX(context) {\n  return new MonotoneX(context);\n}\n\nexport function monotoneY(context) {\n  return new MonotoneY(context);\n}\n","function Natural(context) {\n  this._context = context;\n}\n\nNatural.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x = [];\n    this._y = [];\n  },\n  lineEnd: function() {\n    var x = this._x,\n        y = this._y,\n        n = x.length;\n\n    if (n) {\n      this._line ? this._context.lineTo(x[0], y[0]) : this._context.moveTo(x[0], y[0]);\n      if (n === 2) {\n        this._context.lineTo(x[1], y[1]);\n      } else {\n        var px = controlPoints(x),\n            py = controlPoints(y);\n        for (var i0 = 0, i1 = 1; i1 < n; ++i0, ++i1) {\n          this._context.bezierCurveTo(px[0][i0], py[0][i0], px[1][i0], py[1][i0], x[i1], y[i1]);\n        }\n      }\n    }\n\n    if (this._line || (this._line !== 0 && n === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n    this._x = this._y = null;\n  },\n  point: function(x, y) {\n    this._x.push(+x);\n    this._y.push(+y);\n  }\n};\n\n// See https://www.particleincell.com/2012/bezier-splines/ for derivation.\nfunction controlPoints(x) {\n  var i,\n      n = x.length - 1,\n      m,\n      a = new Array(n),\n      b = new Array(n),\n      r = new Array(n);\n  a[0] = 0, b[0] = 2, r[0] = x[0] + 2 * x[1];\n  for (i = 1; i < n - 1; ++i) a[i] = 1, b[i] = 4, r[i] = 4 * x[i] + 2 * x[i + 1];\n  a[n - 1] = 2, b[n - 1] = 7, r[n - 1] = 8 * x[n - 1] + x[n];\n  for (i = 1; i < n; ++i) m = a[i] / b[i - 1], b[i] -= m, r[i] -= m * r[i - 1];\n  a[n - 1] = r[n - 1] / b[n - 1];\n  for (i = n - 2; i >= 0; --i) a[i] = (r[i] - a[i + 1]) / b[i];\n  b[n - 1] = (x[n] + a[n - 1]) / 2;\n  for (i = 0; i < n - 1; ++i) b[i] = 2 * x[i + 1] - a[i + 1];\n  return [a, b];\n}\n\nexport default function(context) {\n  return new Natural(context);\n}\n","function Step(context, t) {\n  this._context = context;\n  this._t = t;\n}\n\nStep.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x = this._y = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (0 < this._t && this._t < 1 && this._point === 2) this._context.lineTo(this._x, this._y);\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    if (this._line >= 0) this._t = 1 - this._t, this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; // proceed\n      default: {\n        if (this._t <= 0) {\n          this._context.lineTo(this._x, y);\n          this._context.lineTo(x, y);\n        } else {\n          var x1 = this._x * (1 - this._t) + x * this._t;\n          this._context.lineTo(x1, this._y);\n          this._context.lineTo(x1, y);\n        }\n        break;\n      }\n    }\n    this._x = x, this._y = y;\n  }\n};\n\nexport default function(context) {\n  return new Step(context, 0.5);\n}\n\nexport function stepBefore(context) {\n  return new Step(context, 0);\n}\n\nexport function stepAfter(context) {\n  return new Step(context, 1);\n}\n","import ascending from \"./ascending\";\n\nexport default function(series) {\n  return ascending(series).reverse();\n}\n","import { arc as arcFactory } from \"d3-shape\";\n\nimport {\n  LinkedVisualConsoleProps,\n  AnyObject,\n  WithModuleProps\n} from \"../lib/types\";\nimport {\n  linkedVCPropsDecoder,\n  modulePropsDecoder,\n  notEmptyStringOr,\n  parseIntOr,\n  parseFloatOr\n} from \"../lib\";\nimport Item, { ItemType, ItemProps, itemBasePropsDecoder } from \"../Item\";\n\nexport type PercentileProps = {\n  type: ItemType.PERCENTILE_BAR;\n  percentileType:\n    | \"progress-bar\"\n    | \"bubble\"\n    | \"circular-progress-bar\"\n    | \"circular-progress-bar-alt\";\n  valueType: \"percent\" | \"value\";\n  minValue: number | null;\n  maxValue: number | null;\n  color: string | null;\n  labelColor: string | null;\n  value: number | null;\n  unit: string | null;\n} & ItemProps &\n  WithModuleProps &\n  LinkedVisualConsoleProps;\n\n/**\n * Extract a valid enum value from a raw type value.\n * @param type Raw value.\n */\nfunction extractPercentileType(\n  type: unknown\n): PercentileProps[\"percentileType\"] {\n  switch (type) {\n    case \"progress-bar\":\n    case \"bubble\":\n    case \"circular-progress-bar\":\n    case \"circular-progress-bar-alt\":\n      return type;\n    default:\n    case ItemType.PERCENTILE_BAR:\n      return \"progress-bar\";\n    case ItemType.PERCENTILE_BUBBLE:\n      return \"bubble\";\n    case ItemType.CIRCULAR_PROGRESS_BAR:\n      return \"circular-progress-bar\";\n    case ItemType.CIRCULAR_INTERIOR_PROGRESS_BAR:\n      return \"circular-progress-bar-alt\";\n  }\n}\n\n/**\n * Extract a valid enum value from a raw value type value.\n * @param type Raw value.\n */\nfunction extractValueType(valueType: unknown): PercentileProps[\"valueType\"] {\n  switch (valueType) {\n    case \"percent\":\n    case \"value\":\n      return valueType;\n    default:\n      return \"percent\";\n  }\n}\n\n/**\n * Build a valid typed object from a raw object.\n * This will allow us to ensure the type safety.\n *\n * @param data Raw object.\n * @return An object representing the percentile props.\n * @throws Will throw a TypeError if some property\n * is missing from the raw object or have an invalid type.\n */\nexport function percentilePropsDecoder(\n  data: AnyObject\n): PercentileProps | never {\n  return {\n    ...itemBasePropsDecoder(data), // Object spread. It will merge the properties of the two objects.\n    type: ItemType.PERCENTILE_BAR,\n    percentileType: extractPercentileType(data.percentileType || data.type),\n    valueType: extractValueType(data.valueType),\n    minValue: parseIntOr(data.minValue, null),\n    maxValue: parseIntOr(data.maxValue, null),\n    color: notEmptyStringOr(data.color, null),\n    labelColor: notEmptyStringOr(data.labelColor, null),\n    value: parseFloatOr(data.value, null),\n    unit: notEmptyStringOr(data.unit, null),\n    ...modulePropsDecoder(data), // Object spread. It will merge the properties of the two objects.\n    ...linkedVCPropsDecoder(data) // Object spread. It will merge the properties of the two objects.\n  };\n}\n\nconst svgNS = \"http://www.w3.org/2000/svg\";\n\nexport default class Percentile extends Item<PercentileProps> {\n  protected createDomElement(): HTMLElement {\n    const colors = {\n      background: \"#000000\",\n      progress: this.props.color || \"#F0F0F0\",\n      text: this.props.labelColor || \"#444444\"\n    };\n    // Progress.\n    const progress = this.getProgress();\n    // Main element.\n    const element = document.createElement(\"div\");\n    // SVG container.\n    const svg = document.createElementNS(svgNS, \"svg\");\n\n    var formatValue;\n    if (this.props.value != null) {\n      if (Intl) {\n        formatValue = Intl.NumberFormat(\"en-EN\").format(this.props.value);\n      } else {\n        formatValue = this.props.value;\n      }\n    }\n\n    switch (this.props.percentileType) {\n      case \"progress-bar\":\n        {\n          const backgroundRect = document.createElementNS(svgNS, \"rect\");\n          backgroundRect.setAttribute(\"fill\", colors.background);\n          backgroundRect.setAttribute(\"fill-opacity\", \"0.5\");\n          backgroundRect.setAttribute(\"width\", \"100\");\n          backgroundRect.setAttribute(\"height\", \"20\");\n          backgroundRect.setAttribute(\"rx\", \"5\");\n          backgroundRect.setAttribute(\"ry\", \"5\");\n          const progressRect = document.createElementNS(svgNS, \"rect\");\n          progressRect.setAttribute(\"fill\", colors.progress);\n          progressRect.setAttribute(\"fill-opacity\", \"1\");\n          progressRect.setAttribute(\"width\", `${progress}`);\n          progressRect.setAttribute(\"height\", \"20\");\n          progressRect.setAttribute(\"rx\", \"5\");\n          progressRect.setAttribute(\"ry\", \"5\");\n          const text = document.createElementNS(svgNS, \"text\");\n          text.setAttribute(\"text-anchor\", \"middle\");\n          text.setAttribute(\"alignment-baseline\", \"middle\");\n          text.setAttribute(\"font-size\", \"12\");\n          text.setAttribute(\"font-family\", \"arial\");\n          text.setAttribute(\"font-weight\", \"bold\");\n          text.setAttribute(\"transform\", \"translate(50 11)\");\n          text.setAttribute(\"fill\", colors.text);\n\n          if (this.props.valueType === \"value\") {\n            text.style.fontSize = \"6pt\";\n\n            text.textContent = this.props.unit\n              ? `${formatValue} ${this.props.unit}`\n              : `${formatValue}`;\n          } else {\n            text.textContent = `${progress}%`;\n          }\n\n          // Auto resize SVG using the view box magic: https://css-tricks.com/scale-svg/\n          svg.setAttribute(\"viewBox\", \"0 0 100 20\");\n          svg.append(backgroundRect, progressRect, text);\n        }\n        break;\n      case \"bubble\":\n      case \"circular-progress-bar\":\n      case \"circular-progress-bar-alt\":\n        {\n          // Auto resize SVG using the view box magic: https://css-tricks.com/scale-svg/\n          svg.setAttribute(\"viewBox\", \"0 0 100 100\");\n\n          if (this.props.percentileType === \"bubble\") {\n            // Create and append the circles.\n            const backgroundCircle = document.createElementNS(svgNS, \"circle\");\n            backgroundCircle.setAttribute(\"transform\", \"translate(50 50)\");\n            backgroundCircle.setAttribute(\"fill\", colors.background);\n            backgroundCircle.setAttribute(\"fill-opacity\", \"0.5\");\n            backgroundCircle.setAttribute(\"r\", \"50\");\n            const progressCircle = document.createElementNS(svgNS, \"circle\");\n            progressCircle.setAttribute(\"transform\", \"translate(50 50)\");\n            progressCircle.setAttribute(\"fill\", colors.progress);\n            progressCircle.setAttribute(\"fill-opacity\", \"1\");\n            progressCircle.setAttribute(\"r\", `${progress / 2}`);\n\n            svg.append(backgroundCircle, progressCircle);\n          } else {\n            // Create and append the circles.\n            const arcProps = {\n              innerRadius:\n                this.props.percentileType === \"circular-progress-bar\" ? 30 : 0,\n              outerRadius: 50,\n              startAngle: 0,\n              endAngle: Math.PI * 2\n            };\n            const arc = arcFactory();\n\n            const backgroundCircle = document.createElementNS(svgNS, \"path\");\n            backgroundCircle.setAttribute(\"transform\", \"translate(50 50)\");\n            backgroundCircle.setAttribute(\"fill\", colors.background);\n            backgroundCircle.setAttribute(\"fill-opacity\", \"0.5\");\n            backgroundCircle.setAttribute(\"d\", `${arc(arcProps)}`);\n            const progressCircle = document.createElementNS(svgNS, \"path\");\n            progressCircle.setAttribute(\"transform\", \"translate(50 50)\");\n            progressCircle.setAttribute(\"fill\", colors.progress);\n            progressCircle.setAttribute(\"fill-opacity\", \"1\");\n            progressCircle.setAttribute(\n              \"d\",\n              `${arc({\n                ...arcProps,\n                endAngle: arcProps.endAngle * (progress / 100)\n              })}`\n            );\n\n            svg.append(backgroundCircle, progressCircle);\n          }\n\n          // Create and append the text.\n          const text = document.createElementNS(svgNS, \"text\");\n          text.setAttribute(\"text-anchor\", \"middle\");\n          text.setAttribute(\"alignment-baseline\", \"middle\");\n          text.setAttribute(\"font-size\", \"16\");\n          text.setAttribute(\"font-family\", \"arial\");\n          text.setAttribute(\"font-weight\", \"bold\");\n          text.setAttribute(\"fill\", colors.text);\n\n          if (this.props.valueType === \"value\" && this.props.value != null) {\n            // Show value and unit in 1 (no unit) or 2 lines.\n            if (this.props.unit && this.props.unit.length > 0) {\n              const value = document.createElementNS(svgNS, \"tspan\");\n              value.setAttribute(\"x\", \"0\");\n              value.setAttribute(\"dy\", \"1em\");\n              value.textContent = `${formatValue}`;\n              value.style.fontSize = \"8pt\";\n              const unit = document.createElementNS(svgNS, \"tspan\");\n              unit.setAttribute(\"x\", \"0\");\n              unit.setAttribute(\"dy\", \"1em\");\n              unit.textContent = `${this.props.unit}`;\n              unit.style.fontSize = \"8pt\";\n              text.append(value, unit);\n              text.setAttribute(\"transform\", \"translate(50 33)\");\n            } else {\n              text.textContent = `${formatValue}`;\n              text.style.fontSize = \"8pt\";\n              text.setAttribute(\"transform\", \"translate(50 50)\");\n            }\n          } else {\n            // Percentage.\n            text.textContent = `${progress}%`;\n            text.setAttribute(\"transform\", \"translate(50 50)\");\n          }\n\n          svg.append(text);\n        }\n        break;\n    }\n\n    element.append(svg);\n\n    return element;\n  }\n\n  private getProgress(): number {\n    const minValue = this.props.minValue || 0;\n    const maxValue = this.props.maxValue || 100;\n    const value = this.props.value == null ? 0 : this.props.value;\n\n    if (value <= minValue) return 0;\n    else if (value >= maxValue) return 100;\n    else return Math.trunc(((value - minValue) / (maxValue - minValue)) * 100);\n  }\n}\n","import { AnyObject } from \"../lib/types\";\nimport {\n  stringIsEmpty,\n  notEmptyStringOr,\n  decodeBase64,\n  parseIntOr\n} from \"../lib\";\nimport Item, { ItemType, ItemProps, itemBasePropsDecoder } from \"../Item\";\n\nexport type ServiceProps = {\n  type: ItemType.SERVICE;\n  serviceId: number;\n  imageSrc: string | null;\n  statusImageSrc: string | null;\n  encodedTitle: string | null;\n} & ItemProps;\n\n/**\n * Build a valid typed object from a raw object.\n * This will allow us to ensure the type safety.\n *\n * @param data Raw object.\n * @return An object representing the service props.\n * @throws Will throw a TypeError if some property\n * is missing from the raw object or have an invalid type.\n */\nexport function servicePropsDecoder(data: AnyObject): ServiceProps | never {\n  if (data.imageSrc !== null) {\n    if (\n      typeof data.statusImageSrc !== \"string\" ||\n      data.imageSrc.statusImageSrc === 0\n    ) {\n      throw new TypeError(\"invalid status image src.\");\n    }\n  } else {\n    if (stringIsEmpty(data.encodedTitle)) {\n      throw new TypeError(\"missing encode tittle content.\");\n    }\n  }\n\n  if (parseIntOr(data.serviceId, null) === null) {\n    throw new TypeError(\"invalid service id.\");\n  }\n\n  return {\n    ...itemBasePropsDecoder(data), // Object spread. It will merge the properties of the two objects.\n    type: ItemType.SERVICE,\n    serviceId: data.serviceId,\n    imageSrc: notEmptyStringOr(data.imageSrc, null),\n    statusImageSrc: notEmptyStringOr(data.statusImageSrc, null),\n    encodedTitle: notEmptyStringOr(data.encodedTitle, null)\n  };\n}\n\nexport default class Service extends Item<ServiceProps> {\n  public createDomElement(): HTMLElement {\n    const element = document.createElement(\"div\");\n    element.className = \"service\";\n\n    if (this.props.statusImageSrc !== null) {\n      element.style.background = `url(${this.props.statusImageSrc}) no-repeat`;\n      element.style.backgroundSize = \"contain\";\n      element.style.backgroundPosition = \"center\";\n    } else if (this.props.encodedTitle !== null) {\n      element.innerHTML = decodeBase64(this.props.encodedTitle);\n    }\n\n    return element;\n  }\n}\n","import { AnyObject, Size, Position } from \"./lib/types\";\nimport {\n  parseBoolean,\n  sizePropsDecoder,\n  parseIntOr,\n  notEmptyStringOr,\n  itemMetaDecoder\n} from \"./lib\";\nimport Item, {\n  ItemType,\n  ItemProps,\n  ItemClickEvent,\n  ItemRemoveEvent,\n  ItemMovedEvent,\n  ItemResizedEvent\n} from \"./Item\";\nimport StaticGraph, { staticGraphPropsDecoder } from \"./items/StaticGraph\";\nimport Icon, { iconPropsDecoder } from \"./items/Icon\";\nimport ColorCloud, { colorCloudPropsDecoder } from \"./items/ColorCloud\";\nimport Group, { groupPropsDecoder } from \"./items/Group\";\nimport Clock, { clockPropsDecoder } from \"./items/Clock\";\nimport Box, { boxPropsDecoder } from \"./items/Box\";\nimport Line, { linePropsDecoder } from \"./items/Line\";\nimport Label, { labelPropsDecoder } from \"./items/Label\";\nimport SimpleValue, { simpleValuePropsDecoder } from \"./items/SimpleValue\";\nimport EventsHistory, {\n  eventsHistoryPropsDecoder\n} from \"./items/EventsHistory\";\nimport Percentile, { percentilePropsDecoder } from \"./items/Percentile\";\nimport TypedEvent, { Disposable, Listener } from \"./lib/TypedEvent\";\nimport DonutGraph, { donutGraphPropsDecoder } from \"./items/DonutGraph\";\nimport BarsGraph, { barsGraphPropsDecoder } from \"./items/BarsGraph\";\nimport ModuleGraph, { moduleGraphPropsDecoder } from \"./items/ModuleGraph\";\nimport Service, { servicePropsDecoder } from \"./items/Service\";\n\n// TODO: Document.\n// eslint-disable-next-line @typescript-eslint/explicit-function-return-type\nfunction itemInstanceFrom(data: AnyObject) {\n  const type = parseIntOr(data.type, null);\n  if (type == null) throw new TypeError(\"missing item type.\");\n\n  const meta = itemMetaDecoder(data);\n\n  switch (type as ItemType) {\n    case ItemType.STATIC_GRAPH:\n      return new StaticGraph(staticGraphPropsDecoder(data), meta);\n    case ItemType.MODULE_GRAPH:\n      return new ModuleGraph(moduleGraphPropsDecoder(data), meta);\n    case ItemType.SIMPLE_VALUE:\n    case ItemType.SIMPLE_VALUE_MAX:\n    case ItemType.SIMPLE_VALUE_MIN:\n    case ItemType.SIMPLE_VALUE_AVG:\n      return new SimpleValue(simpleValuePropsDecoder(data), meta);\n    case ItemType.PERCENTILE_BAR:\n    case ItemType.PERCENTILE_BUBBLE:\n    case ItemType.CIRCULAR_PROGRESS_BAR:\n    case ItemType.CIRCULAR_INTERIOR_PROGRESS_BAR:\n      return new Percentile(percentilePropsDecoder(data), meta);\n    case ItemType.LABEL:\n      return new Label(labelPropsDecoder(data), meta);\n    case ItemType.ICON:\n      return new Icon(iconPropsDecoder(data), meta);\n    case ItemType.SERVICE:\n      return new Service(servicePropsDecoder(data), meta);\n    case ItemType.GROUP_ITEM:\n      return new Group(groupPropsDecoder(data), meta);\n    case ItemType.BOX_ITEM:\n      return new Box(boxPropsDecoder(data), meta);\n    case ItemType.LINE_ITEM:\n      return new Line(linePropsDecoder(data), meta);\n    case ItemType.AUTO_SLA_GRAPH:\n      return new EventsHistory(eventsHistoryPropsDecoder(data), meta);\n    case ItemType.DONUT_GRAPH:\n      return new DonutGraph(donutGraphPropsDecoder(data), meta);\n    case ItemType.BARS_GRAPH:\n      return new BarsGraph(barsGraphPropsDecoder(data), meta);\n    case ItemType.CLOCK:\n      return new Clock(clockPropsDecoder(data), meta);\n    case ItemType.COLOR_CLOUD:\n      return new ColorCloud(colorCloudPropsDecoder(data), meta);\n    default:\n      throw new TypeError(\"item not found\");\n  }\n}\n\n// TODO: Document.\n// eslint-disable-next-line @typescript-eslint/explicit-function-return-type\nfunction decodeProps(data: AnyObject) {\n  const type = parseIntOr(data.type, null);\n  if (type == null) throw new TypeError(\"missing item type.\");\n\n  switch (type as ItemType) {\n    case ItemType.STATIC_GRAPH:\n      return staticGraphPropsDecoder(data);\n    case ItemType.MODULE_GRAPH:\n      return moduleGraphPropsDecoder(data);\n    case ItemType.SIMPLE_VALUE:\n    case ItemType.SIMPLE_VALUE_MAX:\n    case ItemType.SIMPLE_VALUE_MIN:\n    case ItemType.SIMPLE_VALUE_AVG:\n      return simpleValuePropsDecoder(data);\n    case ItemType.PERCENTILE_BAR:\n    case ItemType.PERCENTILE_BUBBLE:\n    case ItemType.CIRCULAR_PROGRESS_BAR:\n    case ItemType.CIRCULAR_INTERIOR_PROGRESS_BAR:\n      return percentilePropsDecoder(data);\n    case ItemType.LABEL:\n      return labelPropsDecoder(data);\n    case ItemType.ICON:\n      return iconPropsDecoder(data);\n    case ItemType.SERVICE:\n      return servicePropsDecoder(data);\n    case ItemType.GROUP_ITEM:\n      return groupPropsDecoder(data);\n    case ItemType.BOX_ITEM:\n      return boxPropsDecoder(data);\n    case ItemType.LINE_ITEM:\n      return linePropsDecoder(data);\n    case ItemType.AUTO_SLA_GRAPH:\n      return eventsHistoryPropsDecoder(data);\n    case ItemType.DONUT_GRAPH:\n      return donutGraphPropsDecoder(data);\n    case ItemType.BARS_GRAPH:\n      return barsGraphPropsDecoder(data);\n    case ItemType.CLOCK:\n      return clockPropsDecoder(data);\n    case ItemType.COLOR_CLOUD:\n      return colorCloudPropsDecoder(data);\n    default:\n      throw new TypeError(\"decoder not found\");\n  }\n}\n\n// Base properties.\nexport interface VisualConsoleProps extends Size {\n  readonly id: number;\n  name: string;\n  groupId: number;\n  backgroundURL: string | null; // URL?\n  backgroundColor: string | null;\n  isFavorite: boolean;\n  relationLineWidth: number;\n}\n\n/**\n * Build a valid typed object from a raw object.\n * This will allow us to ensure the type safety.\n *\n * @param data Raw object.\n * @return An object representing the Visual Console props.\n * @throws Will throw a TypeError if some property\n * is missing from the raw object or have an invalid type.\n */\nexport function visualConsolePropsDecoder(\n  data: AnyObject\n): VisualConsoleProps | never {\n  // Object destructuring: http://es6-features.org/#ObjectMatchingShorthandNotation\n  const {\n    id,\n    name,\n    groupId,\n    backgroundURL,\n    backgroundColor,\n    isFavorite,\n    relationLineWidth\n  } = data;\n\n  if (id == null || isNaN(parseInt(id))) {\n    throw new TypeError(\"invalid Id.\");\n  }\n  if (typeof name !== \"string\" || name.length === 0) {\n    throw new TypeError(\"invalid name.\");\n  }\n  if (groupId == null || isNaN(parseInt(groupId))) {\n    throw new TypeError(\"invalid group Id.\");\n  }\n\n  return {\n    id: parseInt(id),\n    name,\n    groupId: parseInt(groupId),\n    backgroundURL: notEmptyStringOr(backgroundURL, null),\n    backgroundColor: notEmptyStringOr(backgroundColor, null),\n    isFavorite: parseBoolean(isFavorite),\n    relationLineWidth: parseIntOr(relationLineWidth, 0),\n    ...sizePropsDecoder(data)\n  };\n}\n\nexport default class VisualConsole {\n  // Reference to the DOM element which will contain the items.\n  private readonly containerRef: HTMLElement;\n  // Properties.\n  private _props: VisualConsoleProps;\n  // Visual Console Item instances by their Id.\n  private elementsById: {\n    [key: number]: Item<ItemProps>;\n  } = {};\n  // Visual Console Item Ids.\n  private elementIds: ItemProps[\"id\"][] = [];\n  // Dictionary which store the created lines.\n  private relations: {\n    [key: string]: Line;\n  } = {};\n  // Event manager for click events.\n  private readonly clickEventManager = new TypedEvent<ItemClickEvent>();\n  // Event manager for double click events.\n  private readonly dblClickEventManager = new TypedEvent<ItemClickEvent>();\n  // Event manager for move events.\n  private readonly movedEventManager = new TypedEvent<ItemMovedEvent>();\n  // Event manager for resize events.\n  private readonly resizedEventManager = new TypedEvent<ItemResizedEvent>();\n  // List of references to clean the event listeners.\n  private readonly disposables: Disposable[] = [];\n\n  /**\n   * React to a click on an element.\n   * @param e Event object.\n   */\n  private handleElementClick: (e: ItemClickEvent) => void = e => {\n    this.clickEventManager.emit(e);\n    // console.log(`Clicked element #${e.data.id}`, e);\n  };\n\n  /**\n   * React to a double click on an element.\n   * @param e Event object.\n   */\n  private handleElementDblClick: (e: ItemClickEvent) => void = e => {\n    this.dblClickEventManager.emit(e);\n    // console.log(`Double clicked element #${e.data.id}`, e);\n  };\n\n  /**\n   * React to a movement on an element.\n   * @param e Event object.\n   */\n  private handleElementMovement: (e: ItemMovedEvent) => void = e => {\n    // Move their relation lines.\n    const itemId = e.item.props.id;\n    const relations = this.getItemRelations(itemId);\n\n    relations.forEach(relation => {\n      if (relation.parentId === itemId) {\n        // Move the line start.\n        relation.line.props = {\n          ...relation.line.props,\n          startPosition: this.getVisualCenter(e.newPosition, e.item)\n        };\n      } else if (relation.childId === itemId) {\n        // Move the line end.\n        relation.line.props = {\n          ...relation.line.props,\n          endPosition: this.getVisualCenter(e.newPosition, e.item)\n        };\n      }\n    });\n\n    this.movedEventManager.emit(e);\n    // console.log(`Moved element #${e.item.props.id}`, e);\n  };\n\n  /**\n   * React to a resizement on an element.\n   * @param e Event object.\n   */\n  private handleElementResizement: (e: ItemResizedEvent) => void = e => {\n    this.resizedEventManager.emit(e);\n    // console.log(`Resized element #${e.item.props.id}`, e);\n  };\n\n  /**\n   * Clear some element references.\n   * @param e Event object.\n   */\n  private handleElementRemove: (e: ItemRemoveEvent<ItemProps>) => void = e => {\n    // Remove the element from the list and its relations.\n    this.elementIds = this.elementIds.filter(id => id !== e.data.id);\n    delete this.elementsById[e.data.id];\n    this.clearRelations(e.data.id);\n  };\n\n  // TODO: Document\n  private handleContainerClick: (e: MouseEvent) => void = () => {\n    this.unselectItems();\n  };\n\n  public constructor(\n    container: HTMLElement,\n    props: AnyObject,\n    items: AnyObject[]\n  ) {\n    this.containerRef = container;\n    this._props = visualConsolePropsDecoder(props);\n\n    // Force the first render.\n    this.render();\n\n    // Sort by isOnTop, id ASC\n    items = items.sort(function(a, b) {\n      if (\n        a.isOnTop == null ||\n        b.isOnTop == null ||\n        a.id == null ||\n        b.id == null\n      ) {\n        return 0;\n      }\n\n      if (a.isOnTop && !b.isOnTop) return 1;\n      else if (!a.isOnTop && b.isOnTop) return -1;\n      else if (a.id > b.id) return 1;\n      else return -1;\n    });\n\n    // Initialize the items.\n    items.forEach(item => {\n      try {\n        const itemInstance = itemInstanceFrom(item);\n        // Add the item to the list.\n        this.elementsById[itemInstance.props.id] = itemInstance;\n        this.elementIds.push(itemInstance.props.id);\n        // Item event handlers.\n        itemInstance.onClick(this.handleElementClick);\n        itemInstance.onDblClick(this.handleElementDblClick);\n        itemInstance.onMoved(this.handleElementMovement);\n        itemInstance.onResized(this.handleElementResizement);\n        itemInstance.onRemove(this.handleElementRemove);\n        // Add the item to the DOM.\n        this.containerRef.append(itemInstance.elementRef);\n      } catch (error) {\n        console.log(\"Error creating a new element:\", error.message);\n      }\n    });\n\n    // Create lines.\n    this.buildRelations();\n\n    this.containerRef.addEventListener(\"click\", this.handleContainerClick);\n  }\n\n  /**\n   * Public accessor of the `elements` property.\n   * @return Properties.\n   */\n  public get elements(): Item<ItemProps>[] {\n    // Ensure the type cause Typescript doesn't know the filter removes null items.\n    return this.elementIds\n      .map(id => this.elementsById[id])\n      .filter(_ => _ != null) as Item<ItemProps>[];\n  }\n\n  /**\n   * Public setter of the `elements` property.\n   * @param items.\n   */\n  public updateElements(items: AnyObject[]): void {\n    // Ensure the type cause Typescript doesn't know the filter removes null items.\n    const itemIds = items\n      .map(item => item.id || null)\n      .filter(id => id != null) as number[];\n    // Get the elements we should delete.\n    const deletedIds = this.elementIds.filter(id => itemIds.indexOf(id) < 0);\n    // Delete the elements.\n    deletedIds.forEach(id => {\n      if (this.elementsById[id] != null) {\n        this.elementsById[id].remove();\n        delete this.elementsById[id];\n      }\n    });\n    // Replace the element ids.\n    this.elementIds = itemIds;\n\n    // Initialize the items.\n    items.forEach(item => {\n      if (item.id) {\n        if (this.elementsById[item.id] == null) {\n          // New item.\n          try {\n            const itemInstance = itemInstanceFrom(item);\n            // Add the item to the list.\n            this.elementsById[itemInstance.props.id] = itemInstance;\n            // Item event handlers.\n            itemInstance.onClick(this.handleElementClick);\n            itemInstance.onRemove(this.handleElementRemove);\n            // Add the item to the DOM.\n            this.containerRef.append(itemInstance.elementRef);\n          } catch (error) {\n            console.log(\"Error creating a new element:\", error.message);\n          }\n        } else {\n          // Update item.\n          try {\n            this.elementsById[item.id].props = decodeProps(item);\n          } catch (error) {\n            console.log(\"Error updating an element:\", error.message);\n          }\n        }\n      }\n    });\n\n    // Re-build relations.\n    this.buildRelations();\n  }\n\n  /**\n   * Public setter of the `element` property.\n   * @param item.\n   */\n  public updateElement(item: AnyObject): void {\n    // Update item.\n    try {\n      this.elementsById[item.id].props = decodeProps(item);\n    } catch (error) {\n      console.log(\"Error updating element:\", error.message);\n    }\n\n    // Re-build relations.\n    this.buildRelations();\n  }\n\n  /**\n   * Public accessor of the `props` property.\n   * @return Properties.\n   */\n  public get props(): VisualConsoleProps {\n    return { ...this._props }; // Return a copy.\n  }\n\n  /**\n   * Public setter of the `props` property.\n   * If the new props are different enough than the\n   * stored props, a render would be fired.\n   * @param newProps\n   */\n  public set props(newProps: VisualConsoleProps) {\n    const prevProps = this.props;\n    // Update the internal props.\n    this._props = newProps;\n\n    // From this point, things which rely on this.props can access to the changes.\n\n    // Re-render.\n    this.render(prevProps);\n  }\n\n  /**\n   * Recreate or update the HTMLElement which represents the Visual Console into the DOM.\n   * @param prevProps If exists it will be used to only DOM updates instead of a full replace.\n   */\n  public render(prevProps: VisualConsoleProps | null = null): void {\n    if (prevProps) {\n      if (prevProps.backgroundURL !== this.props.backgroundURL) {\n        this.containerRef.style.backgroundImage =\n          this.props.backgroundURL !== null\n            ? `url(${this.props.backgroundURL})`\n            : null;\n      }\n      if (prevProps.backgroundColor !== this.props.backgroundColor) {\n        this.containerRef.style.backgroundColor = this.props.backgroundColor;\n      }\n      if (this.sizeChanged(prevProps, this.props)) {\n        this.resizeElement(this.props.width, this.props.height);\n      }\n    } else {\n      this.containerRef.style.backgroundImage =\n        this.props.backgroundURL !== null\n          ? `url(${this.props.backgroundURL})`\n          : null;\n\n      this.containerRef.style.backgroundColor = this.props.backgroundColor;\n      this.resizeElement(this.props.width, this.props.height);\n    }\n  }\n\n  /**\n   * Compare the previous and the new size and return\n   * a boolean value in case the size changed.\n   * @param prevSize\n   * @param newSize\n   * @return Whether the size changed or not.\n   */\n  public sizeChanged(prevSize: Size, newSize: Size): boolean {\n    return (\n      prevSize.width !== newSize.width || prevSize.height !== newSize.height\n    );\n  }\n\n  /**\n   * Resize the DOM container.\n   * @param width\n   * @param height\n   */\n  public resizeElement(width: number, height: number): void {\n    this.containerRef.style.width = `${width}px`;\n    this.containerRef.style.height = `${height}px`;\n  }\n\n  /**\n   * Update the size into the properties and resize the DOM container.\n   * @param width\n   * @param height\n   */\n  public resize(width: number, height: number): void {\n    this.props = {\n      ...this.props, // Object spread: http://es6-features.org/#SpreadOperator\n      width,\n      height\n    };\n  }\n\n  /**\n   * To remove the event listeners and the elements from the DOM.\n   */\n  public remove(): void {\n    this.disposables.forEach(d => d.dispose()); // Arrow function.\n    this.elements.forEach(e => e.remove()); // Arrow function.\n    this.elementsById = {};\n    this.elementIds = [];\n    // Clear relations.\n    this.clearRelations();\n    // Clean container.\n    this.containerRef.innerHTML = \"\";\n  }\n\n  /**\n   * Create line elements which connect the elements with their parents.\n   */\n  private buildRelations(): void {\n    // Clear relations.\n    this.clearRelations();\n    // Add relations.\n    this.elements.forEach(item => {\n      if (item.props.parentId !== null) {\n        const parent = this.elementsById[item.props.parentId];\n        const child = this.elementsById[item.props.id];\n        if (parent && child) this.addRelationLine(parent, child);\n      }\n    });\n  }\n\n  /**\n   * @param itemId Optional identifier of a parent or child item.\n   * Remove the line elements which connect the elements with their parents.\n   */\n  private clearRelations(itemId?: number): void {\n    if (itemId != null) {\n      for (let key in this.relations) {\n        const ids = key.split(\"|\");\n        const parentId = Number.parseInt(ids[0]);\n        const childId = Number.parseInt(ids[1]);\n\n        if (itemId === parentId || itemId === childId) {\n          this.relations[key].remove();\n          delete this.relations[key];\n        }\n      }\n    } else {\n      for (let key in this.relations) {\n        this.relations[key].remove();\n        delete this.relations[key];\n      }\n    }\n  }\n\n  /**\n   * Retrieve the line element which represent the relation between items.\n   * @param parentId Identifier of the parent item.\n   * @param childId Itentifier of the child item.\n   * @return The line element or nothing.\n   */\n  private getRelationLine(parentId: number, childId: number): Line | null {\n    const identifier = `${parentId}|${childId}`;\n    return this.relations[identifier] || null;\n  }\n\n  // TODO: Document.\n  private getItemRelations(\n    itemId: number\n  ): {\n    parentId: number;\n    childId: number;\n    line: Line;\n  }[] {\n    const itemRelations = [];\n\n    for (let key in this.relations) {\n      const ids = key.split(\"|\");\n      const parentId = Number.parseInt(ids[0]);\n      const childId = Number.parseInt(ids[1]);\n\n      if (itemId === parentId || itemId === childId) {\n        itemRelations.push({\n          parentId,\n          childId,\n          line: this.relations[key]\n        });\n      }\n    }\n\n    return itemRelations;\n  }\n\n  /**\n   * Retrieve the visual center of the item. It's ussually the center of the\n   * content, like the label doesn't exist.\n   * @param position Initial position.\n   * @param element Element we want to use.\n   */\n  private getVisualCenter(\n    position: Position,\n    element: Item<ItemProps>\n  ): Position {\n    let x = position.x + element.elementRef.clientWidth / 2;\n    let y = position.y + element.elementRef.clientHeight / 2;\n    if (\n      typeof element.props.label !== \"undefined\" ||\n      element.props.label !== \"\" ||\n      element.props.label !== null\n    ) {\n      switch (element.props.labelPosition) {\n        case \"up\":\n          y =\n            position.y +\n            (element.elementRef.clientHeight +\n              element.labelElementRef.clientHeight) /\n              2;\n          break;\n        case \"down\":\n          y =\n            position.y +\n            (element.elementRef.clientHeight -\n              element.labelElementRef.clientHeight) /\n              2;\n          break;\n        case \"right\":\n          x =\n            position.x +\n            (element.elementRef.clientWidth -\n              element.labelElementRef.clientWidth) /\n              2;\n          break;\n        case \"left\":\n          x =\n            position.x +\n            (element.elementRef.clientWidth +\n              element.labelElementRef.clientWidth) /\n              2;\n          break;\n      }\n    }\n    return { x, y };\n  }\n\n  /**\n   * Add a new line item to represent a relation between the items.\n   * @param parent Parent item.\n   * @param child Child item.\n   * @return Whether the line was added or not.\n   */\n  private addRelationLine(\n    parent: Item<ItemProps>,\n    child: Item<ItemProps>\n  ): Line {\n    const identifier = `${parent.props.id}|${child.props.id}`;\n    if (this.relations[identifier] != null) {\n      this.relations[identifier].remove();\n    }\n\n    // Get the items center.\n    const { x: startX, y: startY } = this.getVisualCenter(parent.props, parent);\n    const { x: endX, y: endY } = this.getVisualCenter(child.props, child);\n\n    const line = new Line(\n      linePropsDecoder({\n        id: 0,\n        type: ItemType.LINE_ITEM,\n        startX,\n        startY,\n        endX,\n        endY,\n        width: 0,\n        height: 0,\n        lineWidth: this.props.relationLineWidth,\n        color: \"#CCCCCC\"\n      }),\n      itemMetaDecoder({\n        receivedAt: new Date()\n      })\n    );\n    // Save a reference to the line item.\n    this.relations[identifier] = line;\n\n    // Add the line to the DOM.\n    line.elementRef.style.zIndex = \"0\";\n    this.containerRef.append(line.elementRef);\n\n    return line;\n  }\n\n  /**\n   * Add an event handler to the click of the linked visual console elements.\n   * @param listener Function which is going to be executed when a linked console is clicked.\n   */\n  public onItemClick(listener: Listener<ItemClickEvent>): Disposable {\n    /*\n     * The '.on' function returns a function which will clean the event\n     * listener when executed. We store all the 'dispose' functions to\n     * call them when the item should be cleared.\n     */\n    const disposable = this.clickEventManager.on(listener);\n    this.disposables.push(disposable);\n\n    return disposable;\n  }\n\n  /**\n   * Add an event handler to the double click of the linked visual console elements.\n   * @param listener Function which is going to be executed when a linked console is double clicked.\n   */\n  public onItemDblClick(listener: Listener<ItemClickEvent>): Disposable {\n    /*\n     * The '.on' function returns a function which will clean the event\n     * listener when executed. We store all the 'dispose' functions to\n     * call them when the item should be cleared.\n     */\n    const disposable = this.dblClickEventManager.on(listener);\n    this.disposables.push(disposable);\n\n    return disposable;\n  }\n\n  /**\n   * Add an event handler to the movement of the visual console elements.\n   * @param listener Function which is going to be executed when a linked console is moved.\n   */\n  public onItemMoved(listener: Listener<ItemMovedEvent>): Disposable {\n    /*\n     * The '.on' function returns a function which will clean the event\n     * listener when executed. We store all the 'dispose' functions to\n     * call them when the item should be cleared.\n     */\n    const disposable = this.movedEventManager.on(listener);\n    this.disposables.push(disposable);\n\n    return disposable;\n  }\n\n  /**\n   * Add an event handler to the resizement of the visual console elements.\n   * @param listener Function which is going to be executed when a linked console is moved.\n   */\n  public onItemResized(listener: Listener<ItemResizedEvent>): Disposable {\n    /*\n     * The '.on' function returns a function which will clean the event\n     * listener when executed. We store all the 'dispose' functions to\n     * call them when the item should be cleared.\n     */\n    const disposable = this.resizedEventManager.on(listener);\n    this.disposables.push(disposable);\n\n    return disposable;\n  }\n\n  /**\n   * Enable the edition mode.\n   */\n  public enableEditMode(): void {\n    this.elements.forEach(item => {\n      item.meta = { ...item.meta, editMode: true };\n    });\n    this.containerRef.classList.add(\"is-editing\");\n  }\n\n  /**\n   * Disable the edition mode.\n   */\n  public disableEditMode(): void {\n    this.elements.forEach(item => {\n      item.meta = { ...item.meta, editMode: false };\n    });\n    this.containerRef.classList.remove(\"is-editing\");\n  }\n\n  /**\n   * Select an item.\n   * @param itemId Item Id.\n   * @param unique To remove the selection of other items or not.\n   */\n  public selectItem(itemId: number, unique: boolean = false): void {\n    if (unique) {\n      this.elementIds.forEach(currentItemId => {\n        const meta = this.elementsById[currentItemId].meta;\n\n        if (currentItemId !== itemId && meta.isSelected) {\n          this.elementsById[currentItemId].meta = {\n            ...meta,\n            isSelected: false\n          };\n        } else if (currentItemId === itemId && !meta.isSelected) {\n          this.elementsById[currentItemId].meta = {\n            ...meta,\n            isSelected: true\n          };\n        }\n      });\n    } else if (this.elementsById[itemId]) {\n      this.elementsById[itemId].meta = {\n        ...this.elementsById[itemId].meta,\n        isSelected: true\n      };\n    }\n  }\n\n  /**\n   * Unselect an item.\n   * @param itemId Item Id.\n   */\n  public unselectItem(itemId: number): void {\n    if (this.elementsById[itemId]) {\n      const meta = this.elementsById[itemId].meta;\n\n      if (meta.isSelected) {\n        this.elementsById[itemId].meta = {\n          ...meta,\n          isSelected: false\n        };\n      }\n    }\n  }\n\n  /**\n   * Unselect all items.\n   */\n  public unselectItems(): void {\n    this.elementIds.forEach(itemId => {\n      if (this.elementsById[itemId]) {\n        const meta = this.elementsById[itemId].meta;\n\n        if (meta.isSelected) {\n          this.elementsById[itemId].meta = {\n            ...meta,\n            isSelected: false\n          };\n        }\n      }\n    });\n  }\n}\n","import TypedEvent, { Disposable, Listener } from \"./TypedEvent\";\n\ninterface Cancellable {\n  cancel(): void;\n}\n\ntype AsyncTaskStatus = \"waiting\" | \"started\" | \"cancelled\" | \"finished\";\ntype AsyncTaskInitiator = (done: () => void) => Cancellable;\n\n/**\n * Defines an async task which can be started and cancelled.\n * It's possible to observe the status changes of the task.\n */\nclass AsyncTask {\n  private readonly taskInitiator: AsyncTaskInitiator;\n  private cancellable: Cancellable = { cancel: () => {} };\n  private _status: AsyncTaskStatus = \"waiting\";\n\n  // Event manager for status change events.\n  private readonly statusChangeEventManager = new TypedEvent<AsyncTaskStatus>();\n  // List of references to clean the event listeners.\n  private readonly disposables: Disposable[] = [];\n\n  public constructor(taskInitiator: AsyncTaskInitiator) {\n    this.taskInitiator = taskInitiator;\n  }\n\n  /**\n   * Public setter of the `status` property.\n   * @param status.\n   */\n  public set status(status: AsyncTaskStatus) {\n    this._status = status;\n    this.statusChangeEventManager.emit(status);\n  }\n\n  /**\n   * Public accessor of the `status` property.\n   * @return status.\n   */\n  public get status() {\n    return this._status;\n  }\n\n  /**\n   * Start the async task.\n   */\n  public init(): void {\n    this.cancellable = this.taskInitiator(() => {\n      this.status = \"finished\";\n    });\n    this.status = \"started\";\n  }\n\n  /**\n   * Cancel the async task.\n   */\n  public cancel(): void {\n    this.cancellable.cancel();\n    this.status = \"cancelled\";\n  }\n\n  /**\n   * Add an event handler to the status change.\n   * @param listener Function which is going to be executed when the status changes.\n   */\n  public onStatusChange(listener: Listener<AsyncTaskStatus>): Disposable {\n    /*\n     * The '.on' function returns a function which will clean the event\n     * listener when executed. We store all the 'dispose' functions to\n     * call them when the item should be cleared.\n     */\n    const disposable = this.statusChangeEventManager.on(listener);\n    this.disposables.push(disposable);\n\n    return disposable;\n  }\n}\n\n/**\n * Wrap an async task into another which will execute that task indefinitely\n * every time the tash finnish and the chosen period ends.\n * Will last until cancellation.\n *\n * @param task Async task to execute.\n * @param period Time in milliseconds to wait until the next async esecution.\n *\n * @return A new async task.\n */\nfunction asyncPeriodic(task: AsyncTask, period: number): AsyncTask {\n  return new AsyncTask(() => {\n    let ref: number | null = null;\n\n    task.onStatusChange(status => {\n      if (status === \"finished\") {\n        ref = window.setTimeout(() => {\n          task.init();\n        }, period);\n      }\n    });\n\n    task.init();\n\n    return {\n      cancel: () => {\n        if (ref) clearTimeout(ref);\n        task.cancel();\n      }\n    };\n  });\n}\n\n/**\n * Manages a list of async tasks.\n */\nexport default class AsyncTaskManager {\n  private tasks: { [identifier: string]: AsyncTask } = {};\n\n  /**\n   * Adds an async task to the manager.\n   *\n   * @param identifier Unique identifier.\n   * @param taskInitiator Function to initialize the async task.\n   * Should return a structure to cancel the task.\n   * @param period Optional period to repeat the task indefinitely.\n   */\n  public add(\n    identifier: string,\n    taskInitiator: AsyncTaskInitiator,\n    period: number = 0\n  ): AsyncTask {\n    if (this.tasks[identifier] && this.tasks[identifier].status === \"started\") {\n      this.tasks[identifier].cancel();\n    }\n\n    const asyncTask =\n      period > 0\n        ? asyncPeriodic(new AsyncTask(taskInitiator), period)\n        : new AsyncTask(taskInitiator);\n\n    this.tasks[identifier] = asyncTask;\n\n    return this.tasks[identifier];\n  }\n\n  /**\n   * Starts an async task.\n   *\n   * @param identifier Unique identifier.\n   */\n  public init(identifier: string) {\n    if (\n      this.tasks[identifier] &&\n      (this.tasks[identifier].status === \"waiting\" ||\n        this.tasks[identifier].status === \"cancelled\" ||\n        this.tasks[identifier].status === \"finished\")\n    ) {\n      this.tasks[identifier].init();\n    }\n  }\n\n  /**\n   * Cancel a running async task.\n   *\n   * @param identifier Unique identifier.\n   */\n  public cancel(identifier: string) {\n    if (this.tasks[identifier] && this.tasks[identifier].status === \"started\") {\n      this.tasks[identifier].cancel();\n    }\n  }\n}\n","/*\n * Useful resources.\n * http://es6-features.org/\n * http://exploringjs.com/es6\n * https://www.typescriptlang.org/\n */\n\nimport \"./main.css\"; // CSS import.\nimport VisualConsole from \"./VisualConsole\";\nimport * as Form from \"./Form\";\nimport AsyncTaskManager from \"./lib/AsyncTaskManager\";\n\n// Export the VisualConsole class to the global object.\n// eslint-disable-next-line\n(window as any).VisualConsole = VisualConsole;\n\n// Export the VisualConsole's Form classes to the global object.\n// eslint-disable-next-line\n(window as any).VisualConsole.Form = Form;\n\n// Export the AsyncTaskManager class to the global object.\n// eslint-disable-next-line\n(window as any).AsyncTaskManager = AsyncTaskManager;\n"],"sourceRoot":""}